(window.reactiveAuthComponentWebpackJsonp=window.reactiveAuthComponentWebpackJsonp||[]).push([[0],{100:function(e,t,n){e.exports=n(233)},106:function(e,t){},107:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},145:function(e,t){},151:function(e,t){},18:function(e,t,n){"use strict";(function(e){var a=n(6),i=n(7),s=n(9),o=n(8),r=n(10),d=n(83),l=n(0),u=n.n(l),c=(n(107),n(98)),m=n(1),p=n(24);if(e.Intl){if(!Object(d.a)(["en","nb","nn","sv"])){var f=n(58);Intl.NumberFormat=f.NumberFormat,Intl.DateTimeFormat=f.DateTimeFormat}}else e.Intl=n(58);var h=function(e){function t(e){return Object(a.a)(this,t),Object(s.a)(this,Object(o.a)(t).call(this,e))}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.lang,t=this.props.theme,n=Object(p.a)(e,t),a=this.props.authBaseUri,i=this.props.termsAndConditions,s=this.props.clientId,o=this.props.authorizeUri,r=this.props.codeAuthorizeUri,d=this.props.authorizeType,l=this.props.username,f=this.props.email,h=this.props.emailJwt,g=this.props.logoutUri,E=this.props.abortUri,v=this.props.idpUrisJson,y=this.props.extParams,w="function"===typeof this.props.authorizationCodeCallback?this.props.authorizationCodeCallback:void 0;return u.a.createElement(m.b,{locale:e,messages:n},u.a.createElement(c.a,{authBaseUri:a,language:e,termsAndConditions:i,clientId:s,authorizeUri:o,codeAuthorizeUri:r,authorizeType:d,username:l,email:f,emailJwt:h,logoutUri:g,abortUri:E,idpUrisJson:v,extParams:y,authorizationCodeCallback:w}))}}],[{key:"getElementsByName",value:function(e){for(var t=document.getElementsByName(e),n=[],a=0;a<t.length;a++)n[a]=t.item(a);return n}},{key:"getMeta",value:function(e){var n=t.getElementsByName(e).filter(function(e){return"undefined"!==typeof e.tagName}).filter(function(e){return"meta"===e.tagName.toLowerCase()}).map(function(e){return e.getAttribute("content")}).filter(function(e){return"undefined"!==typeof e}).filter(function(e){return e});return n.length>0?n[0]:null}}]),t}(l.Component);t.a=h}).call(this,n(39))},232:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(19),o=n.n(s),r=n(18),d=n(6),l=n(7),u=n(9),c=n(8),m=n(10),p=n(24),f=n(1),h=n(99),g=n(11),E=n.n(g),v=n(5),y=n.n(v),w=n(31),C=n(27),k=Object(f.d)({signupPasswordFieldPlaceholder:{id:"signupPasswordFieldPlaceholder",defaultMessage:"(Choose a password)"},signupRepeatPasswordFieldPlaceholder:{id:"signupRepeatPasswordFieldPlaceholder",defaultMessage:"(Repeat password)"},passwordsDoNotMatchError:{id:"passwordsDoNotMatchError",defaultMessage:"Passwords do not match."},passwordTooShortError:{id:"passwordTooShortError",defaultMessage:"The password is too short. Minimum 6 characters."}}),b=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={errors:{}},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"setPasswordFieldType",value:function(e){for(var t=document.getElementsByClassName("password-field"),n=0;t.length;n++)t.item(n).type=e}},{key:"showPasswords",value:function(){this.setPasswordFieldType("text")}},{key:"hidePasswords",value:function(){this.setPasswordFieldType("password")}},{key:"getPassword",value:function(){return this.passwordField.value}},{key:"getRepeatedPassword",value:function(){return this.repeatPasswordField.value}},{key:"validatePassword",value:function(e){var t=this.props.intl.formatMessage,n=this.getPassword();n===this.getRepeatedPassword()?n.length>=6?e(n):this.setState({errors:{password:t(k.passwordTooShortError)}}):this.setState({errors:{password:t(k.passwordsDoNotMatchError)}})}},{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage;return i.a.createElement("div",null,"undefined"!==typeof e.state.errors&&"undefined"!==typeof e.state.errors.password?i.a.createElement("div",{className:"error col-sm-12 alert alert-danger"},e.state.errors.password):i.a.createElement("span",null),i.a.createElement("input",{className:"col-sm-12 password-field",type:"password",ref:function(t){e.passwordField=t},placeholder:t(k.signupPasswordFieldPlaceholder),name:"password"}),i.a.createElement("input",{className:"col-sm-12 password-field",type:"password",ref:function(t){e.repeatPasswordField=t},placeholder:t(k.signupRepeatPasswordFieldPlaceholder),name:"repeatpassword"}),i.a.createElement("div",{className:"col-sm-2 eyeholder",onMouseDown:function(){e.showPasswords()},onMouseUp:function(){e.hidePasswords()},onMouseOut:function(){e.hidePasswords()}}))}}]),t}(a.Component),A=Object(f.e)(b,{withRef:!0}),P=(Object(f.d)({}),function(e){function t(e){var n;Object(d.a)(this,t);var a={intl:(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).props.intl,authorizationCodeCallback:"function"===typeof e.authorizationCodeCallback?e.authorizationCodeCallback:void 0,authBaseUri:e.authBaseUri,clientId:e.clientId,codeAuthorizeUri:e.codeAuthorizeUri,onEmailConflict:function(e,t){alert("Forgot password failed with failure to resolve email conflict")},onTermsAndConditions:function(e,t){n.setState({jwt:e,termsAndConditions:t})}};return n.loginOperations=new w.a(a),n.state={errors:{},language:"undefined"!==typeof e.language?e.language:"en",termsAndConditions:!1,jwt:!1},n.passwordField=i.a.createRef(),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"declineTermsAndConditions",value:function(){document.location.href=this.props.logoutUri}},{key:"submit",value:function(){var e=this,t=this.props.code;this.passwordField.current.getWrappedInstance().validatePassword(function(n){var a={code:t,password:n};y.a.post(e.props.authBaseUri+"/v1/login/idp/forgotpassword/"+e.props.claimId,E.a.stringify(a),{xsrfCookieName:null,withCredentials:!0}).then(function(t){var n=t.data.jwt;"undefined"!==typeof n&&n?e.loginOperations.loggedIn(e.state.language,n):alert("Forgot password step did not produce a JWT")}).catch(function(e){alert("Forgot password step in login process failed")})})}},{key:"render",value:function(){var e=this;return!1===this.state.termsAndConditions?i.a.createElement("div",{className:"reactive-auth-login"},i.a.createElement("h1",null,"Reset password"),i.a.createElement("p",null,"Please reset your password by typing your new password twice below:"),i.a.createElement(A,{errors:this.state.errors,ref:this.passwordField}),i.a.createElement("div",null,i.a.createElement(h.a,{onClick:function(){e.submit()},className:"btn btn-success"},i.a.createElement(f.a,{id:"submitForgotPasswordButton",defaultMessage:"Save and continue"})))):i.a.createElement("div",{className:"reactive-auth-login"},i.a.createElement(C.a,{onAccept:function(){e.loginOperations.acceptTermsAndConditions(e.state.jwt)},onDecline:function(){e.declineTermsAndConditions()},termsAndConditions:this.state.termsAndConditions}))}}]),t}(a.Component)),M=Object(f.e)(P),S=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="undefined"!==typeof this.props.lang?this.props.lang:"en",t=Object(p.a)(e);return i.a.createElement(f.b,{locale:e,messages:t},i.a.createElement(M,this.props))}}]),t}(a.Component),N=(n(232),function(e){function t(e){var n;Object(d.a)(this,t);var a={intl:(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).props.intl,authorizationCodeCallback:"function"===typeof e.authorizationCodeCallback?e.authorizationCodeCallback:void 0,authBaseUri:e.authBaseUri,clientId:e.clientId,codeAuthorizeUri:e.codeAuthorizeUri,onEmailConflict:function(e,t){alert("Forgot password failed with failure to resolve email conflict")},onTermsAndConditions:function(e,t){n.setState({jwt:e,termsAndConditions:t})}};return n.loginOperations=new w.a(a),n.domKey=""+Math.random(),n.state={errors:{},language:"undefined"!==typeof e.language?e.language:"en",termsAndConditions:!1,jwt:!1,intermediateJwt:!1,accounts:[],claimEmail:!1,claimPasswordAccount:!1},n.passwordField=i.a.createRef(),n.pullAccounts(),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"pullAccounts",value:function(){var e=this;y.a.get(this.props.authBaseUri+"/v1/login/idp/claimaccounts/"+this.props.claimId+"?code="+encodeURIComponent(this.props.code),{}).then(function(t){var n=t.data;"undefined"!==typeof n.accounts&&"undefined"!==typeof n.intermediateJwt&&"undefined"!==typeof n.claimEmail?e.setState({accounts:n.accounts,intermediateJwt:n.intermediateJwt,claimEmail:n.claimEmail}):alert("Invalid response data on claim accounts")}).catch(function(e){alert("Claim accounts failure")})}},{key:"declineTermsAndConditions",value:function(){document.location.href=this.props.logoutUri}},{key:"accountName",value:function(e){return e.displayName?e.displayName:e.firstName?e.lastName?e.firstName+" "+e.lastName:e.firstName:e.lastName?e.lastName:"No Name"}},{key:"claimAccount",value:function(e,t){var n=this;if(e.hasPassword&&"undefined"===typeof t)this.setState({claimPasswordAccount:e});else{var a={id:e.identity.id};"undefined"!==typeof t&&(a.password=t),y.a.post(this.props.authBaseUri+"/v1/login/idp/claimaccount",E.a.stringify(a),{headers:{Authorization:"Bearer "+this.state.intermediateJwt}}).then(function(e){var t=e.data;if("undefined"!==typeof t.jwt){var a=t.jwt;n.loginOperations.loggedIn(n.state.language,a)}else alert("Claim account failed with bad response")}).catch(function(e){alert("Claim account failed")})}}},{key:"claimAccountWithPassword",value:function(){var e=this;this.passwordField.current.getWrappedInstance().validatePassword(function(t){e.claimAccount(e.state.claimPasswordAccount,t)})}},{key:"createNewAccount",value:function(){var e=this;y.a.post(this.props.authBaseUri+"/v1/login/idp/claimemail",E.a.stringify({email:this.state.claimEmail,allowLogin:!0}),{headers:{Authorization:"Bearer "+this.state.intermediateJwt}}).then(function(t){var n=t.data;if("undefined"!==typeof n.jwt){var a=n.jwt;e.loginOperations.loggedIn(e.state.language,a)}else alert("Claim email failed with bad response")}).catch(function(e){alert("Claim email failed")})}},{key:"renderClaimPasswordAccount",value:function(){var e=this;return i.a.createElement("div",{className:"reactive-auth-login"},i.a.createElement("p",null,"Please set a new password for your account:"),i.a.createElement(A,{ref:this.passwordField}),i.a.createElement(h.a,{onClick:function(){e.claimAccountWithPassword()},className:"btn btn-success"},i.a.createElement(f.a,{id:"submitForgotPasswordButton",defaultMessage:"Save and continue"})))}},{key:"render",value:function(){var e=this;return!1===this.state.termsAndConditions?!1!==this.state.claimPasswordAccount?this.renderClaimPasswordAccount():this.state.accounts.length>0?i.a.createElement("div",{className:"reactive-auth-login"},i.a.createElement("p",null,i.a.createElement(f.a,{id:"idpConflictProceedClaimEmail",defaultMessage:"You have successfully confirmed your email address {email}. Please use an existing account or create a new account:",values:{email:this.state.claimEmail}})),i.a.createElement("ul",null,function(){var t=e.state.accounts.map(function(t){return i.a.createElement("li",{key:t.identity.id},e.accountName(t.identity)," ",t.identity.email?t.identity.email:"(No primary email)",i.a.createElement(h.a,{onClick:function(){e.claimAccount(t)},className:"btn btn-success"},i.a.createElement(f.a,{id:"claimExistingAccountButton",defaultMessage:"Use this account"})))});return e.state.claimEmail&&(t[t.length]=i.a.createElement("li",null,i.a.createElement("p",null,i.a.createElement(f.a,{id:"questionCreateNewAccountAndDisconnectOthers",defaultMessage:"Would you like to create a new account using {email}? This email address will be removed from the other accounts.",values:{email:e.state.claimEmail}})),i.a.createElement(h.a,{onClick:function(){e.createNewAccount()},className:"btn btn-success"},i.a.createElement(f.a,{id:"createNewAccountLink",defaultMessage:"Create new account"})))),t}())):this.state.claimEmail?i.a.createElement("div",{className:"reactive-auth-login"},i.a.createElement("p",null,i.a.createElement(f.a,{id:"idpConflictProceedClaimSignupWithEmail",defaultMessage:"You have successfully confirmed your email address {email}. You can now proceed with signing up:",values:{email:this.state.claimEmail}})),i.a.createElement("div",null,i.a.createElement(h.a,{onClick:function(){e.createNewAccount()},className:"btn btn-success"},i.a.createElement(f.a,{id:"createNewAccountLink",defaultMessage:"Create new account"})))):i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement(f.a,{id:"idpConflictClaimSomethingWentWrong",defaultMessage:"Something went wrong during the signup process. There are no apparent ways to continue this signup. Please try again or contact support."}))):i.a.createElement("div",{className:"reactive-auth-login"},i.a.createElement(C.a,{onAccept:function(){e.loginOperations.acceptTermsAndConditions(e.state.jwt)},onDecline:function(){e.declineTermsAndConditions()},termsAndConditions:this.state.termsAndConditions}))}}]),t}(a.Component)),T=Object(f.e)(N),U=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="undefined"!==typeof this.props.lang?this.props.lang:"en",t=Object(p.a)(e);return i.a.createElement(f.b,{locale:e,messages:t},i.a.createElement(T,this.props))}}]),t}(a.Component),F=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"reactive-auth-login"},i.a.createElement("h1",null,i.a.createElement(f.a,{id:"invalidOrExpiredEmailCodeDescription",defaultMessage:"The link has expired"})),i.a.createElement("p",null,i.a.createElement(f.a,{id:"invalidOrExpiredEmailCodeDescription",defaultMessage:'We are very sorry, but this link is either invalid or it has expired. If you did forget your password please try the "forgot password" link on the login page again to get a new link. Otherwise try logging in again in order to resolve this issue.'})))}}]),t}(a.Component),L=Object(f.e)(F),I=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="undefined"!==typeof this.props.lang?this.props.lang:"en",t=Object(p.a)(e);return i.a.createElement(f.b,{locale:e,messages:t},i.a.createElement(L,this.props))}}]),t}(a.Component);!function(){var e=function(e,t,n,a,s,d,l,u,c,m,p,f,h,g,E,v,y){o.a.render(i.a.createElement(r.a,{lang:n,theme:a,authBaseUri:t,termsAndConditions:s,clientId:d,authorizeUri:l,codeAuthorizeUri:u,authorizeType:E,username:c,email:m,emailJwt:p,logoutUri:f,abortUri:h,idpUrisJson:g,extParams:v,authorizationCodeCallback:y}),e)};!function(){var t=document.getElementById("reactiveLoginRootElement");"undefined"!==typeof t&&t&&function(t){var n=r.a.getMeta("languageAlpha2"),a=r.a.getMeta("theme"),i=r.a.getMeta("termsAndConditions"),s=r.a.getMeta("clientId"),o=r.a.getMeta("authorizeUri"),d=r.a.getMeta("codeAuthorizeUri"),l=r.a.getMeta("authorizeType"),u=r.a.getMeta("username"),c=r.a.getMeta("email"),m=r.a.getMeta("emailJwt"),p=r.a.getMeta("logoutUri"),f=r.a.getMeta("abortUri"),h=r.a.getMeta("idpUrisJson");e(t,"",n,a,i,s,o,d,u,c,m,p,f,h,l,{},void 0)}(t)}(),window.applyForgotPassword=function(e,t){o.a.render(i.a.createElement(S,t),e)},window.applyClaimAccounts=function(e,t){o.a.render(i.a.createElement(U,t),e)},window.applyInvalidEmailCode=function(e,t){o.a.render(i.a.createElement(I,t),e)},window.applyReactiveLogin=e}()},24:function(e,t,n){"use strict";var a=n(38),i=n(1),s=n(94),o=n.n(s),r=n(95),d=n.n(r),l=n(96),u=n.n(l),c=n(97),m=n.n(c),p={continueButton:"Fortsett",weWillNeverPost:"Vi vil aldri poste uten din tillatelse.",orSeparator:"ELLER",resetPasswordHeading:"Nullstill eller opprett passord",emailFieldLabel:"E-post: ",weHaveSentEmail:"Vi har sendt en epost til{linebreak}{resetEmail} ({changeEmailLink})",changeForgottenEmail:"endre epostadresse",pleaseFollowTheLinkFromEmail:"Vennligst f\xf8lg lenken i eposten for \xe5 sette opp din konto",didNotGetEmail:"Fikk du ikke epost? {resendEmailLink}",resendEmail:"Send p\xe5 nytt.",rememberToCheckYourSpam:"Psst! Husk \xe5 sjekke spamfolderen",loginWith:"Logg inn med",signup:"Lag konto",signupWith:"Lag konto med",loginButton:"Logg inn",loginFailedError:"Innlogging feilet! Vennligst sjekk ditt brukernavn og passord.",forgotPasswordLink:"Glemt passord?",createNewAccountLink:"Lag ny konto",usernamePlaceholder:"(Brukernavn eller e-post)",passwordPlaceholder:"(Passord)",emailInUseError:"E-postadressen er allerede i bruk. Enten bruk glemt passord-lenken til \xe5 gjenvinne kontroll over brukerkontoen eller skriv inn en annen e-postadresse.",acceptTermsAndConditionsError:"Du m\xe5 godta vilk\xe5r og bestemmelser.",emailRequiredError:"E-post er p\xe5krevd.",passwordRequiredError:"Passord er p\xe5krevd.",passwordsDoNotMatchError:"Passordene er ikke like.",passwordTooShortError:"Passordet er for kort. Minimum 6 tegn",signupEmailFieldPlaceholder:"(Epost)",signupPasswordFieldPlaceholder:"(Velg passord)",signupRepeatPasswordFieldPlaceholder:"(Gjenta passord)",signupButton:"Lag konto",signupPasswordRequirements:"*Passord m\xe5 v\xe6re p\xe5 minimum 6 tegn.",signupTermsAndConditionsLabel:"Jeg godtar {termsAndConditions}",termsAndConditionsLink:"vilk\xe5r og bestemmelser",termsAndConditionsPopupTitle:"Vilk\xe5r og bestemmelser",closeButton:"Lukk",alreadyHaveAnAccount:"Har du allerede en konto? {logInHereLink}",logInHereLink:"Logg inn her",iAgreeButton:"Jeg godtar",iDoNotAgreeButton:"Jeg godtar ikke",weHaveSentEmailTitle:"Snart klart!",embedSignupHeading:"Bekreft din brukerprofil",embedSignupP1:"Siden dette er f\xf8rste gang du tar ett av v\xe5re kurs eller spill, ber vi her om en ekstra runde innlogging for at din konto skal bli verifisert. Dette for at vi skal v\xe6re 100% sikker p\xe5 at dette er deg og kunne ivareta din personsikkerhet.",embedSignupP2:"N\xe5r du har logget inn vil du f\xe5 en epost som du ogs\xe5 m\xe5 \xe5pne og bekrefte. Dette er en engangs foresp\xf8rsel og vil ikke v\xe6re n\xf8dvendig neste gang du logger inn."},f={continueButton:"Forts\xe4tt",weWillNeverPost:"Vi kommer aldrig anv\xe4nda ditt konto utan din till\xe5telse.",orSeparator:"ELLER",resetPasswordHeading:"\xc5terst\xe4ll eller skapa ett l\xf6senord",emailFieldLabel:"E-postadress: ",weHaveSentEmail:"Vi har skickat ett e-post till{linebreak}{resetEmail} ({changeEmailLink})",changeForgottenEmail:"byt e-postadress",pleaseFollowTheLinkFromEmail:"V\xe4nligen f\xf6lj l\xe4nken i det e-postmeddelandet f\xf6r att slutf\xf6ra inst\xe4llningarna av ditt konto.",didNotGetEmail:"Fick du inget e-post? {resendEmailLink}",resendEmail:"Skicka e-post p\xe5 nytt.",rememberToCheckYourSpam:"Psst! Kom ih\xe5g att titta i din skr\xe4ppostmappen",loginWith:"Logga in med",signup:"Registrera dig",signupWith:"Registrera dig med",loginButton:"Logga in",loginFailedError:"Inloggning misslyckades! V\xe4nligen kontrollera ditt anv\xe4ndarnamn och l\xf6senord.",forgotPasswordLink:"Gl\xf6mt l\xf6senordet?",createNewAccountLink:"Skapa ett nyt konto",usernamePlaceholder:"(Anv\xe4ndarnamn eller e-postadress)",passwordPlaceholder:"(L\xf6senord)",emailInUseError:"E-postadressen anv\xe4nds redan. V\xe4nligen anv\xe4nd l\xe4nken Gl\xf6mt l\xf6senord f\xf6r att \xe5terst\xe4lla ditt anv\xe4ndarkonto, annars m\xe5ste du skriva in en annan e-postadress.",acceptTermsAndConditionsError:"Du beh\xf6ver acceptera villkoren.",emailRequiredError:"E-postadress \xe4r obligatorisk.",passwordRequiredError:"L\xf6senord \xe4r obligatoriskt.",passwordsDoNotMatchError:"L\xf6senorden matchar inte.",passwordTooShortError:"L\xf6senordet \xe4r f\xf6r kort. Minst 6 tecken",signupEmailFieldPlaceholder:"(E-postadress)",signupPasswordFieldPlaceholder:"(V\xe4lj ett l\xf6senord)",signupRepeatPasswordFieldPlaceholder:"(Repetera l\xf6senord)",signupButton:"Registrera",signupPasswordRequirements:"*L\xf6senordet m\xe5ste vara minst 6 tecken l\xe5ngt.",signupTermsAndConditionsLabel:"Jag godk\xe4nner {termsAndConditions}",termsAndConditionsLink:"Villkor",termsAndConditionsPopupTitle:"Villkor",closeButton:"St\xe4nga",alreadyHaveAnAccount:"Har du redan ett konto? {logInHereLink}",logInHereLink:"Logga in h\xe4r",iAgreeButton:"Jag godk\xe4nner",iDoNotAgreeButton:"Jag godk\xe4nner ej",weHaveSentEmailTitle:"N\xe4stan klar!"},h={termsAndConditionsLink:"EdStep Terms and Conditions",termsAndConditionsPopupTitle:"EdStep Terms and Conditions"},g={termsAndConditionsLink:"vilk\xe5r og bestemmelser for EdStep",termsAndConditionsPopupTitle:"EdStep vilk\xe5r og bestemmelser"},E={termsAndConditionsLink:"EdSteps villkor",termsAndConditionsPopupTitle:"EdStep-villkor"},v={termsAndConditionsLink:"Learn Playground Terms and Conditions",termsAndConditionsPopupTitle:"Learn Playground Terms and Conditions"},y={termsAndConditionsLink:"vilk\xe5r og bestemmelser for Learn Playground",termsAndConditionsPopupTitle:"Learn Playground vilk\xe5r og bestemmelser"},w={termsAndConditionsLink:"Learn Playgrounds villkor",termsAndConditionsPopupTitle:"Learn Playground-villkor"},C={termsAndConditionsLink:"EdPlan Terms and Conditions",termsAndConditionsPopupTitle:"EdPlan Terms and Conditions"},k={termsAndConditionsLink:"vilk\xe5r og bestemmelser for EdPlan",termsAndConditionsPopupTitle:"EdPlan vilk\xe5r og bestemmelser"},b={termsAndConditionsLink:"EdPlans villkor",termsAndConditionsPopupTitle:"EdPlans-villkor"};Object(i.c)([].concat(Object(a.a)(o.a),Object(a.a)(d.a),Object(a.a)(u.a),Object(a.a)(m.a)));var A={nb:p,sv:f},P={edstep:{en:h,nb:g,sv:E},learnplayground:{en:v,nb:y,sv:w},edplan:{en:C,nb:k,sv:b}};t.a=function(e,t){var n={};if(A.hasOwnProperty(e)&&(n=A[e]),P.hasOwnProperty(t)){var a=P[t];if(a.hasOwnProperty(e))for(var i in a=a[e])a.hasOwnProperty(i)&&(n[i]=a[i])}return n}},27:function(e,t,n){"use strict";var a=n(6),i=n(7),s=n(9),o=n(8),r=n(10),d=n(0),l=n.n(d),u=n(99),c=n(1),m=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={termsAndConditions:"undefined"!==typeof e.termsAndConditions?e.termsAndConditions:""},n.onAccept="undefined"!==typeof e.onAccept?e.onAccept:function(){},n.onDecline="undefined"!==typeof e.onDecline?e.onDecline:function(){},n.domKey=""+Math.random(),n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"insertTermsAndConditions",value:function(){var e=document.getElementById("terms-and-conditions-text"+this.domKey);"undefined"!==typeof e&&(e.innerHTML=this.state.termsAndConditions)}},{key:"componentDidMount",value:function(){this.insertTermsAndConditions()}},{key:"componentDidUpdate",value:function(){this.insertTermsAndConditions()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"terms-and-conditions-text-and-title"},l.a.createElement("h1",null,l.a.createElement(c.a,{id:"termsAndConditionsPopupTitle",defaultMessage:"Terms and Conditions"})),l.a.createElement("div",{id:"terms-and-conditions-text"+this.domKey,className:"terms-and-conditions-text-area"})),l.a.createElement("div",{className:"terms-and-conditions-buttons"},l.a.createElement(u.a,{onClick:function(){e.onAccept()},className:"btn btn-success terms-and-conditions-buttons"},l.a.createElement(c.a,{id:"iAgreeButton",defaultMessage:"I Agree"})),l.a.createElement(u.a,{onClick:function(){e.onDecline()},className:"btn btn-danger terms-and-conditions-buttons"},l.a.createElement(c.a,{id:"iDoNotAgreeButton",defaultMessage:"I Do Not Agree"}))))}}]),t}(d.Component);t.a=m},31:function(e,t,n){"use strict";var a=n(6),i=n(7),s=n(11),o=n.n(s),r=n(5),d=n.n(r),l={id:"failedToAcceptTermsAndConditions",defaultMessage:"Failed to accept terms and conditions"},u={id:"errorCodeAcceptTermsAndConditions",defaultMessage:"Error response code {code} on accept terms and conditions. Please try again later."},c={id:"failedToRunAuthorize",defaultMessage:"Failed to run authorize request"},m={id:"errorCodeAuthorize",defaultMessage:"Error response code {code} on authorize endpoint. Please try again later."},p={id:"unexpectedAuthorizeResponse",defaultMessage:"Unexpected response from authorize endpoint"},f={id:"autoLinkAccountFailure",defaultMessage:"Auto link account failure"},h={id:"strangeResponseAutoLinkAccount",defaultMessage:"Strange response from auto link account endpoint"},g={id:"autoLinkDidNotIncludeIdentity",defaultMessage:"Auto link account did not include an identity id in the response"},E={id:"finalStepInLoginFailed",defaultMessage:"Final step in login process failed"},v={id:"finalStepInLoginFailedProduceJwt",defaultMessage:"Final login step did not produce a JWT"},y={id:"termsAndConditionsStatusFailed",defaultMessage:"Terms and conditions status request failed"},w=function(){function e(t){Object(a.a)(this,e),this.intl=t.intl,this.authorizationCodeCallback="function"===typeof t.authorizationCodeCallback?t.authorizationCodeCallback:void 0,this.authBaseUri=t.authBaseUri,this.clientId=t.clientId,this.codeAuthorizeUri=t.codeAuthorizeUri,this.onEmailConflict="function"===typeof t.onEmailConflict?t.onEmailConflict:function(e,t){},this.onTermsAndConditions="function"===typeof t.onTermsAndConditions?t.onTermsAndConditions:function(e,t){}}return Object(i.a)(e,[{key:"loggedIn",value:function(e,t){var n=this,a=this.intl.formatMessage,i=this.clientId;d.a.get(this.authBaseUri+"/v1/login/termsandconditions/status?"+o.a.stringify({clientId:i,language:e}),{headers:{Authorization:"Bearer "+t}}).then(function(e){var a=e.data,i="undefined"!==typeof a&&"undefined"!==typeof a.accepted&&a.accepted,s="undefined"!==typeof a&&"undefined"!==typeof a.termsAndConditions&&a.termsAndConditions?a.termsAndConditions:"";i?n.authorize(t):n.onTermsAndConditions(t,s)}).catch(function(e){alert(a(y))})}},{key:"loginWithIdentity",value:function(e,t,n){var a=this,i=this.intl.formatMessage;d.a.post(this.authBaseUri+"/v1/login/complete",o.a.stringify({}),{headers:{Authorization:"Bearer "+t},xsrfCookieName:null,withCredentials:!0}).then(function(t){var n=t.data.jwt;"undefined"!==typeof n&&n?a.loggedIn(e,n):alert(i(v))}).catch(function(e){alert(i(E))})}},{key:"autoConnectIdentity",value:function(e,t){var n=this,a=this.intl.formatMessage;d.a.post(this.authBaseUri+"/v1/login/idconnect/auto",o.a.stringify({}),{headers:{Authorization:"Bearer "+t}}).then(function(i){var s=i.data.identities;if("undefined"!==typeof s&&1===s.length){var o=s[0].id;"undefined"!==typeof o&&o?n.loginWithIdentity(e,t,o):alert(a(g))}else alert(a(h))}).catch(function(e){if(e.response&&409===e.response.status){var i=e.response.data;if(i&&"undefined"!==typeof i.length&&i.length>0){var s=i[0];if(s&&"undefined"!==typeof s.credentialsId&&"undefined"!==typeof s.email&&"email-conflict"===s.type&&"undefined"!==typeof s.conflictingIdentity&&"undefined"!==typeof s.conflictingIdentity.id)return void n.onEmailConflict(i,t)}}alert(a(f))})}},{key:"authorize",value:function(e){var t=this,n=this.intl.formatMessage,a=this.codeAuthorizeUri;d.a.get(this.authBaseUri+a,{headers:{Authorization:"Bearer "+e}}).then(function(e){var a=e.data;"undefined"!==typeof a&&"undefined"!==typeof a.type&&"redirect"===a.type&&"undefined"!==typeof a.redirect?t.authorizationRedirect(a.redirect):alert(n(p))}).catch(function(e){var t=e.response;"undefined"!==typeof t?alert(n(m,{code:t.status})):alert(n(c))})}},{key:"authorizationRedirect",value:function(e){if("function"===typeof this.authorizationCodeCallback){var t=e.indexOf("?"),n={};if(t>=0)e.substring(t+1).split("&").map(function(e){var t=e.indexOf("=");return t>=0?[e.substring(0,t),e.substring(t+1)]:[e,""]}).map(function(e){return e.map(decodeURIComponent)}).forEach(function(e){n[e[0]]=e[1]});if("undefined"!==typeof n.code&&n.code)return void this.authorizationCodeCallback(n.code)}window.location.href=e}},{key:"acceptTermsAndConditions",value:function(e){var t=this,n=this.intl.formatMessage,a=this.clientId;d.a.post(this.authBaseUri+"/v1/login/termsandconditions/accept",o.a.stringify({clientId:a,accepted:!0}),{headers:{Authorization:"Bearer "+e}}).then(function(n){t.authorize(e)}).catch(function(e){var t=e.response;"undefined"!==typeof t?alert(n(u,{code:t.status})):alert(n(l))})}}]),e}();t.a=w},84:function(e,t){},86:function(e,t,n){e.exports=n.p+"static/media/emblemhvit-01.cb1f3ee1.png"},98:function(e,t,n){"use strict";var a=n(6),i=n(7),s=n(9),o=n(8),r=n(10),d=n(0),l=n.n(d),u=n(11),c=n.n(u),m=n(5),p=n.n(m),f=n(44),h=n.n(f),g=(n(134),n(135),n(136),n(137),n(1)),E=n(30),v=n.n(E),y=n(86),w=n.n(y),C=Object(g.d)({loginButton:{id:"loginButton",defaultMessage:"Log in"},usernamePlaceholder:{id:"usernamePlaceholder",defaultMessage:"(Username or email)"},passwordPlaceholder:{id:"passwordPlaceholder",defaultMessage:"(Password)"}}),k=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={loginError:"undefined"!==typeof e.loginError&&e.loginError},n.onLogin="undefined"!==typeof e.onLogin?e.onLogin:function(e,t){},n.onForgotPassword="undefined"!==typeof e.onForgotPassword?e.onForgotPassword:function(){},n.onSignup="undefined"!==typeof e.onSignup?e.onSignup:null,n.username="undefined"!==typeof e.username?e.username:"",n.password="undefined"!==typeof e.password?e.password:"",n.usernameFieldDisabled="undefined"!==typeof n.props.usernameFieldDisabled&&n.props.usernameFieldDisabled,n.domKey=""+Math.random(),n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"clickLogIn",value:function(e){var t=document.getElementById("username"+this.domKey).value,n=document.getElementById("password"+this.domKey).value;return e.preventDefault(),this.onLogin(t,n),!1}},{key:"clickForgotPassword",value:function(e){return e.preventDefault(),this.onForgotPassword(),!1}},{key:"clickSignup",value:function(e){return e.preventDefault(),this.onSignup(),!1}},{key:"componentDidMount",value:function(){document.getElementById("username"+this.domKey).value=this.username,document.getElementById("password"+this.domKey).value=this.password}},{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage;return l.a.createElement("form",{onSubmit:function(t){return e.clickLogIn(t)},method:"POST"},e.state.loginError?l.a.createElement("div",{className:"error col-sm-12 alert alert-danger"},l.a.createElement(g.a,{id:"loginFailedError",defaultMessage:"Login failed! Please check your username and password."})):l.a.createElement("span",null),l.a.createElement("input",{key:"username-can-change",className:"col-sm-12",placeholder:t(C.usernamePlaceholder),type:"text",id:"username"+this.domKey,name:"username",disabled:this.usernameFieldDisabled?"disabled":void 0}),l.a.createElement("input",{key:"password-can-change",className:"col-sm-12",placeholder:t(C.passwordPlaceholder),type:"password",id:"password"+this.domKey,name:"password"}),l.a.createElement("input",{className:"col-sm-12",onClick:function(t){return e.clickLogIn(t)},type:"submit",value:t(C.loginButton)}),l.a.createElement("p",{className:"formlinks"},l.a.createElement("a",{onClick:function(t){return e.clickForgotPassword(t)},href:"#",className:"float-left"},l.a.createElement(g.a,{id:"forgotPasswordLink",defaultMessage:"Forgot password?"})),null!==e.onSignup?l.a.createElement("a",{onClick:function(t){return e.clickSignup(t)},href:"#",className:"float-right"},l.a.createElement(g.a,{id:"createNewAccountLink",defaultMessage:"Create new account"})):null))}}]),t}(d.Component),b=Object(g.e)(k),A=n(234),P=n(91),M=n(90),S=n(92),N=n(99),T=Object(g.d)({acceptTermsAndConditionsError:{id:"acceptTermsAndConditionsError",defaultMessage:"You need to accept the Terms and Conditions."},emailRequiredError:{id:"emailRequiredError",defaultMessage:"Email address is required."},passwordRequiredError:{id:"passwordRequiredError",defaultMessage:"Password is required."},passwordsDoNotMatchError:{id:"passwordsDoNotMatchError",defaultMessage:"Passwords do not match."},signupEmailFieldPlaceholder:{id:"signupEmailFieldPlaceholder",defaultMessage:"(E-Mail)"},signupPasswordFieldPlaceholder:{id:"signupPasswordFieldPlaceholder",defaultMessage:"(Choose a password)"},signupRepeatPasswordFieldPlaceholder:{id:"signupRepeatPasswordFieldPlaceholder",defaultMessage:"(Repeat password)"},signupButton:{id:"signupButton",defaultMessage:"Sign up"}}),U=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={showTermsAndConditions:!1,termsAndConditions:"undefined"!==typeof e.termsAndConditions&&e.termsAndConditions,errors:"undefined"!==typeof e.errors?e.errors:{},spinner:n.props.autoSubmit&&("undefined"===typeof e.errors||!e.errors)},n.onLogin="undefined"!==typeof e.onLogin?e.onLogin:function(){},n.onSignup="undefined"!==typeof e.onSignup?e.onSignup:function(e,t,n){},n.onTermsAndConditionsRequired="undefined"!==typeof e.onTermsAndConditionsRequired?e.onTermsAndConditionsRequired:function(e,t){t(!1)},n.domKey=""+Math.random(),n.prefillDone=!1,n.autoSubmitDone=!1,n.fields="undefined"!==typeof e.fields?e.fields:{},n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"clickSignup",value:function(e){var t=this,n=this.props.intl.formatMessage;null!==e&&e.preventDefault(),this.setState({spinner:!0});var a=document.getElementById("email"+this.domKey).value,i=this.props.withoutPassword?null:document.getElementById("password"+this.domKey).value,s=!1;!1!==this.state.termsAndConditions&&(s=document.getElementById("termsAndConditions"+this.domKey).checked),function(){var o=!0,r={};if(a||(r.email=n(T.emailRequiredError),o=!1),!t.props.withoutPassword)if(i){var d=document.getElementById("repeatpassword"+t.domKey).value;i!==d&&(r.password=n(T.passwordsDoNotMatchError),o=!1)}else r.password=n(T.passwordRequiredError),o=!1;return!1!==t.state.termsAndConditions&&(s||(o&&t.props.autoSubmit&&null===e&&(t.setState({spinner:!0}),t.onTermsAndConditionsRequired(t.state.termsAndConditions,function(e){e?(t.onSignup(a,i,!0),t.setState({spinner:!1})):t.setState({spinner:!1})})),r.termsAndConditions=n(T.acceptTermsAndConditionsError),o=!1)),o||t.setState({errors:r}),o}()?(this.onSignup(a,i,s),this.setState({spinner:!1})):this.setState({spinner:!1})}},{key:"clickLogin",value:function(e){e.preventDefault(),this.onLogin()}},{key:"setPasswordFieldType",value:function(e){for(var t=document.getElementsByClassName("password-field"),n=0;t.length;n++)t.item(n).type=e}},{key:"showPasswords",value:function(){this.setPasswordFieldType("text")}},{key:"hidePasswords",value:function(){this.setPasswordFieldType("password")}},{key:"showTermsAndConditions",value:function(e){e.preventDefault(),this.setState({showTermsAndConditions:!0})}},{key:"termsAndConditionsInnerHtml",value:function(){var e=document.getElementById("terms-and-conditions-text"+this.domKey);"undefined"!==typeof e&&e&&(e.innerHTML=this.state.termsAndConditions)}},{key:"prefill",value:function(){var e=document.getElementById("email"+this.domKey);if(!this.prefillDone&&"undefined"!==typeof e&&e){this.prefillDone=!0,"undefined"!==typeof this.fields.email&&(e.value=this.fields.email);var t=document.getElementById("password"+this.domKey);"undefined"!==typeof this.fields.password&&"undefined"!==typeof t&&t&&(t.value=this.fields.password,document.getElementById("repeatpassword"+this.domKey).value=this.fields.password)}}},{key:"componentDidMount",value:function(){this.prefill(),this.termsAndConditionsInnerHtml(),!this.props.autoSubmit||"undefined"!==typeof this.props.errors&&!t.isEmptyObject(this.props.errors)||this.autoSubmitDone||(this.autoSubmitDone=!0,this.clickSignup(null))}},{key:"componentDidUpdate",value:function(){this.prefill(),this.termsAndConditionsInnerHtml()}},{key:"getAppRoot",value:function(){var e=document.getElementsByClassName("reactive-auth-login");return e.length>0?e.item(0):document.body}},{key:"renderPasswordFields",value:function(){var e=this,t=this.props.intl.formatMessage;return l.a.createElement("div",null,l.a.createElement("input",{className:"col-sm-5 password-field",type:"password",id:"password"+this.domKey,placeholder:t(T.signupPasswordFieldPlaceholder),name:"password"}),l.a.createElement("input",{className:"col-sm-5 password-field",type:"password",id:"repeatpassword"+this.domKey,placeholder:t(T.signupRepeatPasswordFieldPlaceholder),name:"repeatpassword"}),l.a.createElement("div",{className:"col-sm-2 eyeholder",onMouseDown:function(){e.showPasswords()},onMouseUp:function(){e.hidePasswords()},onMouseOut:function(){e.hidePasswords()}}),l.a.createElement("p",{className:"terms"},l.a.createElement(g.a,{id:"signupPasswordRequirements",defaultMessage:"*Passwords must be minimum 6 characters long."})))}},{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage;if(this.state.spinner)return l.a.createElement(v.a,{type:"ThreeDots",color:"#00BFFF",height:"200",width:"200"});var n={display:this.props.visible?"block":"none"};return l.a.createElement("form",{method:"post",onSubmit:function(t){e.clickSignup(t)}},l.a.createElement("div",{style:n},"undefined"!==typeof e.state.errors&&"undefined"!==typeof e.state.errors.email?l.a.createElement("div",{className:"error col-sm-12 alert alert-danger"},e.state.errors.email):l.a.createElement("span",null),l.a.createElement("input",{className:"col-sm-12",type:"text",id:"email"+this.domKey,placeholder:t(T.signupEmailFieldPlaceholder),name:"email"}),"undefined"!==typeof e.state.errors&&"undefined"!==typeof e.state.errors.password?l.a.createElement("div",{className:"error col-sm-12 alert alert-danger"},e.state.errors.password):l.a.createElement("span",null),e.props.withoutPassword?l.a.createElement("span",null):e.renderPasswordFields(),!1!==e.state.termsAndConditions?l.a.createElement("div",{className:"terms"},"undefined"!==typeof e.state.errors&&"undefined"!==typeof e.state.errors.termsAndConditions?l.a.createElement("div",{className:"error col-sm-12 alert alert-danger"},e.state.errors.termsAndConditions):l.a.createElement("span",null),l.a.createElement("div",{className:"terms-field"},l.a.createElement("label",{className:"terms"},l.a.createElement("input",{type:"checkbox",id:"termsAndConditions"+e.domKey,name:"termsAndConditions",value:"true"}),l.a.createElement(g.a,{id:"signupTermsAndConditionsLabel",defaultMessage:"I agree to the {termsAndConditions}",values:{termsAndConditions:l.a.createElement("a",{onClick:function(t){e.showTermsAndConditions(t)},id:"terms-and-conditions-link",href:"/termsofservice",target:"_blank"},l.a.createElement(g.a,{id:"termsAndConditionsLink",defaultMessage:"Terms and Conditions"}))}}))),l.a.createElement(A.a,{show:e.state.showTermsAndConditions,onShow:function(){e.termsAndConditionsInnerHtml()},container:e.getAppRoot()},l.a.createElement(P.a,null,l.a.createElement("h2",{className:"terms-and-conditions-title"},l.a.createElement(g.a,{id:"termsAndConditionsPopupTitle",defaultMessage:"Terms and Conditions"}))),l.a.createElement(M.a,null,l.a.createElement("div",{id:"terms-and-conditions-text"+e.domKey,className:"terms-and-conditions-text"})),l.a.createElement(S.a,null,l.a.createElement(N.a,{onClick:function(t){e.setState({showTermsAndConditions:!1})},className:"bt btn-success"},l.a.createElement(g.a,{id:"closeButton",defaultMessage:"Close"}))))):l.a.createElement("span",null),l.a.createElement("div",null,l.a.createElement("input",{type:"submit",value:t(T.signupButton)}))),l.a.createElement("p",{className:"center-text",style:n},l.a.createElement(g.a,{id:"alreadyHaveAnAccount",defaultMessage:"Already have an account? {logInHereLink}",values:{logInHereLink:l.a.createElement("a",{onClick:function(t){e.clickLogin(t)},href:"/login"},l.a.createElement(g.a,{id:"logInHereLink",defaultMessage:"Log in here"}))}})))}}],[{key:"isEmptyObject",value:function(e){if("undefined"!==typeof Array.isArray&&Array.isArray(e)&&0===e.length)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}}]),t}(d.Component),F=Object(g.e)(U),L=Object(g.d)({acceptTermsAndConditionsError:{id:"acceptTermsAndConditionsError",defaultMessage:"You need to accept the Terms and Conditions."},passwordRequiredError:{id:"passwordRequiredError",defaultMessage:"Password is required."},passwordsDoNotMatchError:{id:"passwordsDoNotMatchError",defaultMessage:"Passwords do not match."},signupPasswordFieldPlaceholder:{id:"signupPasswordFieldPlaceholder",defaultMessage:"(Choose a password)"},signupRepeatPasswordFieldPlaceholder:{id:"signupRepeatPasswordFieldPlaceholder",defaultMessage:"(Repeat password)"},signupButton:{id:"signupButton",defaultMessage:"Sign up"}}),I=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={showTermsAndConditions:!1,termsAndConditions:"undefined"!==typeof e.termsAndConditions&&e.termsAndConditions,errors:"undefined"!==typeof e.errors?e.errors:{},spinner:n.props.autoSubmit&&("undefined"===typeof e.errors||!e.errors)},n.onLogin="undefined"!==typeof e.onLogin?e.onLogin:function(){},n.onSignup="undefined"!==typeof e.onSignup?e.onSignup:function(e,t){},n.onTermsAndConditionsRequired="undefined"!==typeof e.onTermsAndConditionsRequired?e.onTermsAndConditionsRequired:function(e,t){t(!1)},n.domKey=""+Math.random(),n.prefillDone=!1,n.fields="undefined"!==typeof e.fields?e.fields:{},n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"clickSignup",value:function(e){var t=this,n=this.props.intl.formatMessage;null!==e&&e.preventDefault();var a=this.props.withoutPassword?null:document.getElementById("password"+this.domKey).value,i=!1;!1!==this.state.termsAndConditions&&(i=document.getElementById("termsAndConditions"+this.domKey).checked),function(){var s=!0,o={};if(!t.props.withoutPassword)if(a){var r=document.getElementById("repeatpassword"+t.domKey).value;a!==r&&(o.password=n(L.passwordsDoNotMatchError),s=!1)}else o.password=n(L.passwordRequiredError),s=!1;return!1!==t.state.termsAndConditions&&(i||(s&&t.props.autoSubmit&&null===e&&(t.setState({spinner:!0}),t.onTermsAndConditionsRequired(t.state.termsAndConditions,function(e){e?(t.onSignup(a,!0),t.setState({spinner:!1})):t.setState({spinner:!1})})),o.termsAndConditions=n(L.acceptTermsAndConditionsError),s=!1)),s||t.setState({errors:o}),s}()?(this.onSignup(a,i),this.setState({spinner:!1})):this.setState({spinner:!1})}},{key:"clickLogin",value:function(e){e.preventDefault(),this.onLogin()}},{key:"setPasswordFieldType",value:function(e){for(var t=document.getElementsByClassName("password-field"),n=0;t.length;n++)t.item(n).type=e}},{key:"showPasswords",value:function(){this.setPasswordFieldType("text")}},{key:"hidePasswords",value:function(){this.setPasswordFieldType("password")}},{key:"showTermsAndConditions",value:function(e){e.preventDefault(),this.setState({showTermsAndConditions:!0})}},{key:"prefill",value:function(){var e=document.getElementById("password"+this.domKey);!this.prefillDone&&"undefined"!==typeof e&&e&&(this.prefillDone=!0,"undefined"!==typeof this.fields.password&&(e.value=this.fields.password,document.getElementById("repeatpassword"+this.domKey).value=this.fields.password))}},{key:"termsAndConditionsInnerHtml",value:function(){var e=document.getElementById("terms-and-conditions-text"+this.domKey);"undefined"!==typeof e&&e&&(e.innerHTML=this.state.termsAndConditions)}},{key:"componentDidMount",value:function(){this.prefill(),this.termsAndConditionsInnerHtml(),!this.props.autoSubmit||"undefined"!==typeof this.props.errors&&!t.isEmptyObject(this.props.errors)||this.autoSubmitDone||(this.autoSubmitDone=!0,this.clickSignup(null))}},{key:"componentDidUpdate",value:function(){this.prefill(),this.termsAndConditionsInnerHtml()}},{key:"renderPasswordFields",value:function(){var e=this,t=this.props.intl.formatMessage;return l.a.createElement("div",null,l.a.createElement("input",{className:"col-sm-5 password-field",type:"password",id:"password"+this.domKey,placeholder:t(L.signupPasswordFieldPlaceholder),name:"password"}),l.a.createElement("input",{className:"col-sm-5 password-field",type:"password",id:"repeatpassword"+this.domKey,placeholder:t(L.signupRepeatPasswordFieldPlaceholder),name:"repeatpassword"}),l.a.createElement("div",{className:"col-sm-2 eyeholder",onMouseDown:function(){e.showPasswords()},onMouseUp:function(){e.hidePasswords()},onMouseOut:function(){e.hidePasswords()}}),l.a.createElement("p",{className:"terms"},l.a.createElement(g.a,{id:"signupPasswordRequirements",defaultMessage:"*Passwords must be minimum 6 characters long."})))}},{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage;if(this.state.spinner)return l.a.createElement(v.a,{type:"ThreeDots",color:"#00BFFF",height:"200",width:"200"});var n={display:this.props.visible?"block":"none"};return l.a.createElement("form",{method:"post",onSubmit:function(t){e.clickSignup(t)}},l.a.createElement("div",{style:n},l.a.createElement("input",{className:"col-sm-12",type:"text",name:"email",value:this.props.email,disabled:"disabled"}),"undefined"!==typeof e.state.errors&&"undefined"!==typeof e.state.errors.password?l.a.createElement("div",{className:"error col-sm-12 alert alert-danger"},e.state.errors.password):l.a.createElement("span",null),e.props.withoutPassword?l.a.createElement("span",null):e.renderPasswordFields(),!1!==e.state.termsAndConditions?l.a.createElement("div",null,"undefined"!==typeof e.state.errors&&"undefined"!==typeof e.state.errors.termsAndConditions?l.a.createElement("div",{className:"error col-sm-12 alert alert-danger"},e.state.errors.termsAndConditions):l.a.createElement("span",null),l.a.createElement("p",{class:"center-text terms"},l.a.createElement("input",{type:"checkbox",id:"termsAndConditions"+e.domKey,name:"termsAndConditions",value:"true"}),l.a.createElement(g.a,{id:"signupTermsAndConditionsLabel",defaultMessage:"I agree to the {termsAndConditions}",values:{termsAndConditions:l.a.createElement("a",{onClick:function(t){e.showTermsAndConditions(t)},id:"terms-and-conditions-link",href:"/termsofservice",target:"_blank"},l.a.createElement(g.a,{id:"termsAndConditionsLink",defaultMessage:"Terms and Conditions"}))}})),l.a.createElement(A.a,{show:e.state.showTermsAndConditions,onShow:function(){e.termsAndConditionsInnerHtml()}},l.a.createElement(P.a,null,l.a.createElement("h2",{className:"terms-and-conditions-title"},l.a.createElement(g.a,{id:"termsAndConditionsPopupTitle",defaultMessage:"Terms and Conditions"}))),l.a.createElement(M.a,null,l.a.createElement("div",{id:"terms-and-conditions-text"+e.domKey,className:"terms-and-conditions-text"})),l.a.createElement(S.a,null,l.a.createElement(N.a,{onClick:function(t){e.setState({showTermsAndConditions:!1})},className:"bt btn-success"},l.a.createElement(g.a,{id:"closeButton",defaultMessage:"Close"}))))):l.a.createElement("span",null),l.a.createElement("div",null,l.a.createElement("input",{type:"submit",value:t(L.signupButton)}))),l.a.createElement("p",{className:"center-text",style:n},l.a.createElement(g.a,{id:"alreadyHaveAnAccount",defaultMessage:"Already have an account? {logInHereLink}",values:{logInHereLink:l.a.createElement("a",{onClick:function(t){e.clickLogin(t)},href:"/login"},l.a.createElement(g.a,{id:"logInHereLink",defaultMessage:"Log in here"}))}})))}}],[{key:"isEmptyObject",value:function(e){if("undefined"!==typeof Array.isArray&&Array.isArray(e)&&0===e.length)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}}]),t}(d.Component),O=Object(g.e)(I),B=n(27),j=n(31),R=Object(g.d)({continueButton:{id:"continueButton",defaultMessage:"Continue"},emailInUseError:{id:"emailInUseError",defaultMessage:"The email address is associated with an existing account. Please use forgot password, or sign up with a different address."},invalidEmailValidationError:{id:"invalidEmailValidationError",defaultMessage:"The supplied email address is invalid."},sameEmailSuppliedValidationError:{id:"sameEmailSuppliedValidationError",defaultMessage:"Type in another email address or choose to use the existing account (above)."},usernameTakenError:{id:"usernameTakenError",defaultMessage:"The username is taken. Please try something else."},newUsernameRequiredError:{id:"newUsernameRequiredError",defaultMessage:"New username required."},changeUsernameFailed:{id:"changeUsernameFailed",defaultMessage:"Change username failed"},ackChangeUsernameFailed:{id:"ackChangeUsernameFailed",defaultMessage:"Acknowledge change username failed"},forgotPasswordFailed:{id:"forgotPasswordFailed",defaultMessage:"Forgot password failed"},loginFailedWithErrorCode:{id:"loginFailedWithErrorCode",defaultMessage:"Login failed with error code {code}"},strangeResponseFromEndpoint:{id:"strangeResponseFromEndpoint",defaultMessage:"Strange response from {endpointName}"},didNotReceiveIdentityResponseFromEndpoint:{id:"didNotReceiveIdentityResponseFromEndpoint",defaultMessage:"Did not return an identity id in the response from {endpointName}"},signupFailure:{id:"signupFailure",defaultMessage:"Signup failure"},signupFailureNoClaimOptions:{id:"signupFailureNoClaimOptions",defaultMessage:"Signup failure. Backend failed to communicate email claim options."},unableToSendEmail:{id:"unableToSendEmail",defaultMessage:"Unable to send email"}}),D=function(e){function t(e){var n;Object(a.a)(this,t),n=Object(s.a)(this,Object(o.a)(t).call(this,e));var i={};Object.assign(i,e),i.onTermsAndConditions=function(e,t){n.setState({mode:"termsandconditions",jwt:e,termsAndConditions:t,termsAndConditionsCallback:null,termsAndConditionsMode:null,idpEmailConflict:!1,spinner:!1})},i.onEmailConflict=function(e,t){n.setState({idpEmailConflict:e,idpEmailToken:t,spinner:!1})},n.loginOperations=new j.a(i),n.objectId=h()(""+Math.random()+Math.random());var r=e.username;"undefined"===typeof r&&(r="");var d="signup"!==e.authorizeType?"login":"signup",l=e.email,u=e.emailJwt,c=l&&u;"login"===d&&c&&(d="signup");var m="undefined"!==typeof e.extParams?e.extParams:{},p={hideSignupIdps:"undefined"!==typeof m.hideSignupIdps&&m.hideSignupIdps,embedSignup:"undefined"!==typeof m.embedSignup&&m.embedSignup,signupWithoutPassword:"undefined"!==typeof m.signupWithoutPassword&&m.signupWithoutPassword,signupAutoSubmit:"undefined"!==typeof m.signupAutoSubmit&&m.signupAutoSubmit};return p.embedSignup&&!p.hideSignupIdps&&(p.hideSignupIdps=!0),n.state={mode:d,signupFields:{},signupErrors:{},username:r,password:"",loginError:!1,idpMergeLoginError:!1,idpMergeLoginPasswordPrefill:"",language:"undefined"!==typeof e.language?e.language:"en",email:c?l:null,emailJwt:c?u:null,extParams:p,idpEmailConflict:!1,idpEmailToken:!1,idpEmailValidationError:!1,idpChangeEmail:!1,idpEmailWaitForEmail:!1,claimVerified:!1,claimPassword:!1,mustChangeUsername:!1,changeUsernameJwt:null,changeUsernamePreviousEmail:null,changeUsernameOtherLogins:[],changeUsernameError:!1,termsAndConditions:null,termsAndConditionsMode:null,termsAndConditionsCallback:null,spinner:!0},!c&&l&&(n.state.signupFields.email=l),n.authorizeWithSession(),n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"listenEvent",value:function(e,t,n){"undefined"!=typeof e.addEventListener?e.addEventListener(t,n,!1):"undefined"!=typeof e.attachEvent&&e.attachEvent("on"+t,n)}},{key:"getMeta",value:function(e){return t.getMeta(e)}},{key:"getIdpUris",value:function(){var e=this.props.idpUrisJson;return JSON.parse(e)}},{key:"login",value:function(e,t){var n=this;this.setState({username:e,password:t,loginError:!1}),p.a.post(this.props.authBaseUri+"/v1/login/user",c.a.stringify({username:e,password:t})).then(function(e){var t=e.data;"undefined"!==typeof t.mustChangeUsername&&t.mustChangeUsername?n.setState({mustChangeUsername:!0,changeUsernameJwt:t.intermediateJwtToken,changeUsernamePreviousEmail:t.removedEmail,changeUsernameOtherLogins:t.alternativeLogins,changeUsernameError:!1}):n.loginOperations.autoConnectIdentity(n.state.language,t.intermediateJwtToken)}).catch(function(e){n.setState({loginError:!0})})}},{key:"signupSubmit",value:function(e,t,n){var a=this,i=this.props.intl.formatMessage,s=this.props.authorizeUri,o=this.props.abortUri,r=this.props.clientId;this.setState({signupFields:{email:e,password:t},spinner:!0});var d={email:e,success:s,abort:o,clientId:r,termsAndConditionsAccepted:n};null!==t&&(d.password=t),p.a.post(this.props.authBaseUri+"/v1/login/signup",c.a.stringify(d)).then(function(e){var t=e.data;a.loginOperations.loggedIn(a.state.language,t.jwt)}).catch(function(e){var t=e.response;if("undefined"!==typeof t)if(400==t.status){var n=t.data;if("undefined"!==typeof n&&"undefined"!==typeof n.fieldErrors){for(var s={},o=0;o<n.fieldErrors.length;o++)s[n.fieldErrors[o].field]=n.fieldErrors[o].message;a.setState({signupErrors:s})}else alert("Invalid request error on signup")}else 409==t.status?a.setState({signupErrors:{email:i(R.emailInUseError)}}):alert("Error code "+t.status+" on signup");else alert("Signup failed");a.setState({spinner:!1})})}},{key:"signupVerifiedSubmit",value:function(e,t){var n=this,a=(this.props.intl.formatMessage,this.props.authorizeUri,this.props.abortUri,this.props.clientId);this.setState({signupFields:{password:e},spinner:!0});var i={clientId:a,termsAndConditionsAccepted:t,language:this.state.language};null!==e&&(i.password=e),p.a.post(this.props.authBaseUri+"/v1/login/signupverified",c.a.stringify(i),{headers:{Authorization:"Bearer "+this.state.emailJwt}}).then(function(e){var t=e.data;n.loginOperations.loggedIn(n.state.language,t.jwt)}).catch(function(e){var t=e.response;if("undefined"!==typeof t)if(400==t.status){var a=t.data;if("undefined"!==typeof a&&"undefined"!==typeof a.fieldErrors){for(var i={},s=0;s<a.fieldErrors.length;s++)i[a.fieldErrors[s].field]=a.fieldErrors[s].message;n.setState({signupErrors:i})}else alert("Invalid request error on signup")}else alert("Error code "+t.status+" on signup");else alert("Signup failed");n.setState({spinner:!1})})}},{key:"forgotPasswordRequest",value:function(e){var t=this,n=this.props.authorizeUri,a=this.props.abortUri,i=this.props.clientId;p.a.post(this.props.authBaseUri+"/v1/login/forgotpassword",c.a.stringify({email:e,redirectUri:n,abortUri:a,clientId:i,language:this.state.language})).then(function(e){var n=e.data;t.setState({mode:"waitforemail",resetEmail:n.email})}).catch(function(e){alert("Forgot password error")})}},{key:"authorizeWithSession",value:function(){var e=this,t=function(){var t=e.props.codeAuthorizeUri;p.a.get(e.props.authBaseUri+t,{xsrfCookieName:null,withCredentials:!0}).then(function(t){var n=t.data;"undefined"!==typeof n&&"undefined"!==typeof n.type&&"redirect"===n.type&&"undefined"!==typeof n.redirect?e.loginOperations.authorizationRedirect(n.redirect):e.setState({spinner:!1})}).catch(function(t){var n=t.response;"undefined"!==typeof n&&alert("Error response code "+n.status+" on authorize endpoint. Please try again later."),e.setState({spinner:!1})})};p.a.get(this.props.authBaseUri+"/v1/login/emailverification",{xsrfCookieName:null,withCredentials:!0}).then(function(n){var a=n.data;if("undefined"!==typeof a&&"undefined"!==typeof a.intermediateJwtToken){var i=a.intermediateJwtToken;e.loginOperations.autoConnectIdentity(e.state.language,i)}else t()}).catch(function(e){t()})}},{key:"authorizationRedirect",value:function(e){if("function"===typeof this.props.authorizationCodeCallback){var t=e.indexOf("?"),n={};if(t>=0)e.substring(t+1).split("&").map(function(e){var t=e.indexOf("=");return t>=0?[e.substring(0,t),e.substring(t+1)]:[e,""]}).map(function(e){return e.map(decodeURIComponent)}).forEach(function(e){n[e[0]]=e[1]});if("undefined"!==typeof n.code&&n.code)return void this.props.authorizationCodeCallback(n.code)}window.location.href=e}},{key:"declineTermsAndConditions",value:function(){document.location.href=this.props.logoutUri}},{key:"isIE11orLess",value:function(){return"undefined"!==typeof window.document.documentMode&&window.document.documentMode<=11}},{key:"pollTokenReturn",value:function(e){var t=this;setTimeout(function(){p.a.get(e).then(function(n){var a=n.data;"undefined"!==typeof a&&(a.token?t.loginOperations.autoConnectIdentity(t.state.language,a.token):t.pollTokenReturn(e))})},1e3)}},{key:"startPopupLogin",value:function(e,t){var n=this,a=(this.props.intl.formatMessage,e.getAttribute("data-popup-href")),i=e.getAttribute("data-popup-width"),s=e.getAttribute("data-popup-height");if("undefined"!=typeof i&&i||(i=800),"undefined"!=typeof s&&s||(s=600),"undefined"!=typeof a&&a){"undefined"!=typeof t&&t||(t=window.event);var o=function(e){return window.open(a,"targetWindow","toolbar=no, location=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width="+i+", height="+s)};if(t.preventDefault(),this.isIE11orLess()){var r=o();p.a.post(this.props.authBaseUri+"/v1/login/popuptokenreturn").then(function(e){var t=e.data;"undefined"!==typeof t&&"undefined"!==typeof t.id&&"undefined"!==typeof t.url?(n.pollTokenReturn(t.url),r.location.href=a+"&popuptokenreturn="+t.id):(r.close(),alert("Unable to open login popup window"))}).catch(function(e){r.close(),alert("Unable to open login popup window")})}else o()}}},{key:"forgotPassword",value:function(){this.setState({mode:"forgotpassword"})}},{key:"forgotPasswordByEmail",value:function(e){e.preventDefault();var t=document.getElementById("email-input").value;this.forgotPasswordRequest(t)}},{key:"signup",value:function(){this.setState({mode:"signup"})}},{key:"setLoginMode",value:function(){this.setState({mode:"login"})}},{key:"verifyEmailAndLogIn",value:function(e){var t=this,n=this.props.intl.formatMessage;p.a.post(this.props.authBaseUri+"/v1/login/idp/verifymerge",c.a.stringify({credentialsId:e,codeAuthorizeUrl:this.props.codeAuthorizeUri}),{headers:{Authorization:"Bearer "+this.state.idpEmailToken}}).then(function(e){t.setState({idpEmailWaitForEmail:!0})}).catch(function(e){alert(n(R.unableToSendEmail))})}},{key:"verifyOverrideEmailAndClaimOptions",value:function(e,t){var n=this,a=this.props.intl.formatMessage;p.a.post(this.props.authBaseUri+"/v1/login/idp/verifyemailandclaim",c.a.stringify({credentialsId:e,email:t,codeAuthorizeUrl:this.props.codeAuthorizeUri}),{headers:{Authorization:"Bearer "+this.state.idpEmailToken}}).then(function(e){n.setState({idpEmailWaitForEmail:!0})}).catch(function(e){alert(a(R.unableToSendEmail))})}},{key:"changeEmailAndSignUp",value:function(e,t){var n=this,a=this.props.intl.formatMessage;if(!t||t.length<3||t.indexOf("@")<0){var i=a(R.invalidEmailValidationError);this.setState({idpEmailValidationError:i})}else if(this.state.idpChangeEmail!==t)this.setState({idpEmailValidationError:!1}),p.a.post(this.props.authBaseUri+"/v1/login/idp/email",c.a.stringify({credentialsId:e,email:t,codeAuthorizeUrl:this.props.codeAuthorizeUri}),{headers:{Authorization:"Bearer "+this.state.idpEmailToken}}).then(function(e){n.setState({idpEmailWaitForEmail:!0,idpChangeEmail:t})}).catch(function(i){if(i.response&&409===i.response.status){var s=i.response.data;if(s&&"undefined"!==typeof s.length&&s.length>0){var o=s[0];if(o&&"undefined"!==typeof o.credentialsId&&"undefined"!==typeof o.email&&"email-conflict"===o.type&&"undefined"!==typeof o.conflictingIdentity&&"undefined"!==typeof o.conflictingIdentity.id)return void p.a.post(n.props.authBaseUri+"/v1/login/idp/emailclaimoptions",c.a.stringify({credentialsId:e,email:t}),{headers:{Authorization:"Bearer "+n.state.idpEmailToken}}).then(function(e){var i=e.data;"undefined"!==typeof i.isVerified&&"undefined"!==typeof i.hasPassword?n.setState({idpChangeEmail:t,claimVerified:!!i.isVerified,claimPassword:!!i.hasPassword,idpMergeLoginPasswordPrefill:""}):alert(a(R.signupFailureNoClaimOptions))}).catch(function(e){alert(a(R.signupFailure))})}}alert(a(R.signupFailure))});else{var s=a(R.sameEmailSuppliedValidationError);this.setState({idpEmailValidationError:s})}}},{key:"idpSingupWithoutEmail",value:function(e){var t=this,n=this.props.intl.formatMessage;p.a.post(this.props.authBaseUri+"/v1/login/idp/noemail",c.a.stringify({credentialsId:e}),{headers:{Authorization:"Bearer "+this.state.idpEmailToken}}).then(function(e){return t.idconnectLikeResponse(e,"signup ext idp without email endpoint")}).catch(function(e){alert(n(R.signupFailure))})}},{key:"idconnectLikeResponse",value:function(e,t){var n=this.props.intl.formatMessage,a=e.data.identities;if("undefined"!==typeof a&&1===a.length){var i=a[0].id;"undefined"!==typeof i&&i?this.loginOperations.loginWithIdentity(this.state.language,this.state.idpEmailToken,i):alert(n(R.didNotReceiveIdentityResponseFromEndpoint,{endpointName:t}))}else alert(n(R.strangeResponseFromEndpoint,{endpointName:t}))}},{key:"idpLoginAndMerge",value:function(e){var t=this,n=this.props.intl.formatMessage;this.setState({idpMergeLoginError:!1}),p.a.post(this.props.authBaseUri+"/v1/login/idp/loginmerge",c.a.stringify({email:this.state.idpChangeEmail,password:e}),{headers:{Authorization:"Bearer "+this.state.idpEmailToken}}).then(function(e){return t.idconnectLikeResponse(e,"login and merge accounts")}).catch(function(a){401===a.response.status?t.setState({idpMergeLoginError:!0,idpMergeLoginPasswordPrefill:e}):alert(n(R.loginFailedWithErrorCode,{code:a.response.status}))})}},{key:"idpLoginAndMergeForgotPassword",value:function(){var e=this,t=this.props.intl.formatMessage;this.setState({idpMergeLoginError:!1}),p.a.post(this.props.authBaseUri+"/v1/login/idp/loginmergeforgotpassword",c.a.stringify({email:this.state.idpChangeEmail,codeAuthorizeUrl:this.props.codeAuthorizeUri}),{headers:{Authorization:"Bearer "+this.state.idpEmailToken}}).then(function(t){e.setState({idpEmailWaitForEmail:!0})}).catch(function(e){alert(t(R.forgotPasswordFailed))})}},{key:"changeUserProceedWithoutUsername",value:function(){var e=this,t=this.props.intl.formatMessage;p.a.post(this.props.authBaseUri+"/v1/changeusername/ack",c.a.stringify({email:this.state.changeUsernamePreviousEmail}),{headers:{Authorization:"Bearer "+this.state.changeUsernameJwt}}).then(function(t){e.loginOperations.autoConnectIdentity(e.state.language,e.state.changeUsernameJwt),e.setState({mustChangeUsername:!1})}).catch(function(n){alert(t(R.ackChangeUsernameFailed)),e.loginOperations.autoConnectIdentity(e.state.language,e.state.changeUsernameJwt),e.setState({mustChangeUsername:!1})})}},{key:"changeUserProceedWithUsername",value:function(e){var t=this,n=this.props.intl.formatMessage,a=e.value;"undefined"!==typeof a&&a?p.a.post(this.props.authBaseUri+"/v1/changeusername/change",c.a.stringify({email:this.state.changeUsernamePreviousEmail,username:a}),{headers:{Authorization:"Bearer "+this.state.changeUsernameJwt}}).then(function(e){t.loginOperations.autoConnectIdentity(t.state.language,t.state.changeUsernameJwt),t.setState({mustChangeUsername:!1})}).catch(function(e){var a=e.response;"undefined"!==typeof a&&409===a.status?t.setState({changeUsernameError:n(R.usernameTakenError)}):alert(n(R.changeUsernameFailed))}):this.setState({changeUsernameError:n(R.newUsernameRequiredError)})}},{key:"showTermsAndConditionsWithCallback",value:function(e,t){var n=this.state.mode;this.setState({mode:"signuptermsandconditions",termsAndConditions:e,termsAndConditionsMode:n,termsAndConditionsCallback:t,spinner:!1})}},{key:"componentDidMount",value:function(){var e=this;this.listenEvent(window,"message",function(t){"undefined"===typeof t&&"undefined"!==typeof window.event&&(t=window.event);var n=t.data;if("undefined"!==typeof n&&"undefined"!==typeof n.type&&"idpPopupJwt"===n.type){var a=n.jwt;e.loginOperations.autoConnectIdentity(e.state.language,a)}})}},{key:"renderIdpRecursiveInUse",value:function(){var e=this,t=this.state.idpEmailConflict[0].credentialsId;return this.state.claimPassword?l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(g.a,{id:"idpEmailConflictOverrideConflictLogin",defaultMessage:"The email address you provided is already in use. Please log in to your account:",values:{email:this.state.idpChangeEmail}})),l.a.createElement(b,{key:"idpLoginMerge"+this.state.idpChangeEmail+(this.state.idpMergeLoginError?"error":""),onLogin:function(t,n){e.idpLoginAndMerge(n)},onForgotPassword:function(){e.idpLoginAndMergeForgotPassword()},username:this.state.idpChangeEmail,password:"",loginError:this.state.idpMergeLoginError,usernameFieldDisabled:!0})):l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(g.a,{id:"idpEmailConflictOverrideConflictWithoutPassword",defaultMessage:"The email address you provided is already in use. Please verify that the email address is yours.",values:{email:this.state.idpChangeEmail}})),l.a.createElement("div",{className:"conflicting-override-email-buttons"},l.a.createElement(N.a,{onClick:function(){e.verifyOverrideEmailAndClaimOptions(t,e.state.idpChangeEmail)},className:"btn btn-success terms-and-conditions-buttons"},l.a.createElement(g.a,{id:"idpEmailConflictOverrideConflictClaimEmailButton",defaultMessage:"Send an email to {email}",values:{email:this.state.idpChangeEmail}})),l.a.createElement(N.a,{onClick:function(){e.setState({idpChangeEmail:!1})},className:"btn btn-danger terms-and-conditions-buttons"},l.a.createElement(g.a,{id:"idpEmailConflictOverrideConflictCancelClaimEmailButton",defaultMessage:"Don't use this email address"}))))}},{key:"renderMustChangeUsernameHasAlternatives",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(g.a,{id:"mustChangeLoginNameUseAlternatives",defaultMessage:"You do have alternative email addresses on your account. Please use one or more of the following email addresses as login username from now on:"})),l.a.createElement("ul",null,this.state.changeUsernameOtherLogins.map(function(e){return l.a.createElement("li",null,e)})),l.a.createElement(N.a,{onClick:function(){e.changeUserProceedWithoutUsername()},className:"btn btn-success"},l.a.createElement(g.a,{id:"continueButton",defaultMessage:"Continue"})))}},{key:"renderMustChangeUsernameNoAlternatives",value:function(){var e=this;this.props.intl.formatMessage;return l.a.createElement("div",null,e.state.changeUsernameError?l.a.createElement("div",{className:"error col-sm-12 alert alert-danger"},e.state.changeUsernameError):l.a.createElement("span",null),l.a.createElement("label",null,l.a.createElement(g.a,{id:"mustChangeLoginNameTypeNew",defaultMessage:"Please type in a new username for login:"}),l.a.createElement("input",{type:"text",ref:function(t){e.changeUsernameFieldRef=t}})),l.a.createElement(N.a,{onClick:function(){e.changeUserProceedWithUsername(e.changeUsernameFieldRef)},className:"btn btn-success"},l.a.createElement(g.a,{id:"continueButton",defaultMessage:"Continue"})))}},{key:"renderMustChangeUsername",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(g.a,{id:"mustChangeLoginNameDescription",defaultMessage:"The email address {email} had to be removed from your account because another user claimed ownership of it. You will not be able to log in using this address anymore.",values:{email:this.state.changeUsernamePreviousEmail}})),"undefined"!==typeof e.state.changeUsernameOtherLogins&&"undefined"!==typeof e.state.changeUsernameOtherLogins.length&&e.state.changeUsernameOtherLogins.length>0?e.renderMustChangeUsernameHasAlternatives():e.renderMustChangeUsernameNoAlternatives())}},{key:"renderIdpEmailInUse",value:function(){var e=this,t=this.state.idpEmailConflict[0].credentialsId;return!1!==this.state.idpEmailWaitForEmail?l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(g.a,{id:"idpEmailConflictSentEmailForMerge",defaultMessage:"We've sent you an email to the address {email}. Please check your email. In order to proceed please click the link in the email.",values:{email:this.state.idpChangeEmail?this.state.idpChangeEmail:this.state.idpEmailConflict[0].email}}))):this.state.idpChangeEmail?this.renderIdpRecursiveInUse():l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(g.a,{id:"idpEmailConflict",defaultMessage:"The email address we received from the external identity provider is already in use. Please choose one of the following resolutions:",values:{email:this.state.idpEmailConflict[0].email}})),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{onClick:function(){e.verifyEmailAndLogIn(t)}},l.a.createElement(g.a,{id:"idpEmailConflictVerify",defaultMessage:"Send an email to {email} and verify that it is yours. Then log in with the existing account",values:{email:this.state.idpEmailConflict[0].email}}))),l.a.createElement("li",null,l.a.createElement("label",null,l.a.createElement(g.a,{id:"idpEmailConflictTypeInEmail",defaultMessage:"Type in email: "}),l.a.createElement("input",{key:"idp-conflict-change-email-field",id:this.objectId+"-idp-signup-email",type:"text"})),l.a.createElement("button",{onClick:function(){var n=document.getElementById(e.objectId+"-idp-signup-email").value;e.changeEmailAndSignUp(t,n)}},l.a.createElement(g.a,{id:"signup",defaultMessage:"Sign up"})),this.state.idpEmailValidationError?l.a.createElement("span",{key:"idp-conflict-email-field-validation-error-"+this.state.idpEmailValidationError,className:"error"},this.state.idpEmailValidationError):l.a.createElement("span",{key:"idp-conflict-email-field-validation-error"})),l.a.createElement("li",null,l.a.createElement("a",{onClick:function(){e.idpSingupWithoutEmail(t)}},l.a.createElement(g.a,{id:"optionProceedWithoutEmailAfterConflict",defaultMessage:"Proceed without an email address. Certain functionality might be disabled. You'll be able to add your email address later."})))))}},{key:"renderExtIdpOrLoginHeading",value:function(){return"login"===this.state.mode?l.a.createElement("h3",{className:"center-text"},l.a.createElement(g.a,{id:"loginWith",defaultMessage:"Login with"})):this.state.extParams.embedSignup?l.a.createElement("div",{className:"embedded-signup-heading"},l.a.createElement("h3",{className:"center-text"},l.a.createElement(g.a,{id:"embedSignupHeading",defaultMessage:"Verify your user profile"})),l.a.createElement("p",null,l.a.createElement(g.a,{id:"embedSignupP1",defaultMessage:"Since this is the first time you take one of our courses, we ask you for an additional round of login for your user to be verified. This is to ensure that we are 100% sure that this is you and can safeguard your personal safety."})),l.a.createElement("p",null,l.a.createElement(g.a,{id:"embedSignupP2",defaultMessage:"Once you have logged in, you will receive an email that you also need to open and confirm. This is a one-time request and will not be required the next time you log in."}))):this.state.extParams.hideSignupIdps?l.a.createElement("h3",{className:"center-text"},l.a.createElement(g.a,{id:"signup",defaultMessage:"Signup"})):l.a.createElement("h3",{className:"center-text"},l.a.createElement(g.a,{id:"signupWith",defaultMessage:"Signup with"}))}},{key:"renderTopWithExtIdps",value:function(){var e=this,t={skolon:"btn-sko",feidetest:"btn-feide",feideopenidp:"btn-feide",feide:"btn-feide",dataporten:"btn-feide",google:"btn-go",facebook:"btn-fb",windowslive:"btn-wl",twitter:"btn-tw"},n={skolon:"Skolon",feidetest:"Feide (Test)",feideopenidp:"Feide (OpenIDP)",feide:"Feide",dataporten:"Dataporten",google:"Google",facebook:"Facebook",windowslive:"Windows Live ID",twitter:"Twitter"};return this.state.mustChangeUsername||"login"!==this.state.mode&&"signup"!==this.state.mode?l.a.createElement("span",null):!1===this.state.idpEmailConflict?l.a.createElement("div",null,this.renderExtIdpOrLoginHeading(),"signup"===e.state.mode&&e.state.extParams.hideSignupIdps?l.a.createElement("span",null):l.a.createElement("div",null,l.a.createElement("ul",{id:"loginlist"},e.getIdpUris().filter(function(e){return"local"!==e.id&&"pedagogvarmland"!==e.id}).map(function(a){var i=t[a.id];"undefined"===typeof i&&(i="btn");var s=n[a.id];return"undefined"===typeof s&&(s=a.id),l.a.createElement("li",{key:a.uri,className:i},function(){var t=600,n=500;"btn-go"===i&&(t=500,n=600);var o=function(){var t=e;return function(e){"undefined"!==typeof e&&e||(e=window.event);for(var n=e.target;n&&"idp-button-with-popup"!==n.className;)n=n.parentNode!=n?n.parentNode:null;n&&t.startPopupLogin(n,e)}}();return"btn-fb"===i?l.a.createElement("a",{onClick:o,className:"idp-button-with-popup",href:a.uri,"data-popup-href":a.popupTokenUri,"data-popup-width":t,"data-popup-height":n},l.a.createElement("span",{className:"icon-BB_icn_sm_facebook"},l.a.createElement("span",{className:"path1"}),l.a.createElement("span",{className:"path2"})),"Facebook"):"btn-go"===i?l.a.createElement("a",{onClick:o,className:"idp-button-with-popup",href:a.uri,"data-popup-href":a.popupTokenUri,"data-popup-width":t,"data-popup-height":n},l.a.createElement("span",{className:"icon-BB_icn_sm_google"},l.a.createElement("span",{className:"path1"}),l.a.createElement("span",{className:"path2"})),"Google"):"btn-tw"===i?l.a.createElement("a",{onClick:o,className:"idp-button-with-popup",href:a.uri,"data-popup-href":a.popupTokenUri,"data-popup-width":t,"data-popup-height":n},l.a.createElement("span",{className:"icon-BB_icn_sm_twitter"},l.a.createElement("span",{className:"path1"}),l.a.createElement("span",{className:"path2"})),"Twitter"):"btn-wl"===i?l.a.createElement("a",{onClick:o,className:"idp-button-with-popup",href:a.uri,"data-popup-href":a.popupTokenUri,"data-popup-width":t,"data-popup-height":n},l.a.createElement("span",{className:"icon-BB_icn_sm_windows"},l.a.createElement("span",{className:"path1"}),l.a.createElement("span",{className:"path2"}),l.a.createElement("span",{className:"path3"}),l.a.createElement("span",{className:"path4"})),"Windows Live ID"):"btn-sko"===i?l.a.createElement("a",{onClick:o,className:"idp-button-with-popup",href:a.uri,"data-popup-href":a.popupTokenUri,"data-popup-width":t,"data-popup-height":n},l.a.createElement("span",{className:"icon-BB_icn_sm_skolon"},l.a.createElement("span",{className:"path1"}),l.a.createElement("span",{className:"path2"})),"Skolon"):"btn-feide"===i?l.a.createElement("a",{onClick:o,className:"idp-button-with-popup",href:a.uri,"data-popup-href":a.popupTokenUri,"data-popup-width":t,"data-popup-height":n},l.a.createElement("img",{src:w.a,alt:""}),s):l.a.createElement("a",{onClick:o,className:"idp-button-with-popup",href:a.uri,"data-popup-href":a.popupTokenUri,"data-popup-width":t,"data-popup-height":n},l.a.createElement("span",null,a.id))}())})),l.a.createElement("p",{className:"center-text terms"},l.a.createElement(g.a,{id:"weWillNeverPost",defaultMessage:"We will never post without your permission."})),l.a.createElement("p",{className:"border-title text-center"},l.a.createElement("span",null,l.a.createElement(g.a,{id:"orSeparator",defaultMessage:"OR"}))))):l.a.createElement("span",null)}},{key:"renderMainContentPartDefaultLoginPart",value:function(){var e=this,t=this.props.intl.formatMessage;if(this.state.mustChangeUsername)return this.renderMustChangeUsername();if(!1!==this.state.idpEmailConflict)return this.renderIdpEmailInUse();if("login"===this.state.mode){var n=JSON.stringify({mode:"login",username:this.state.username,password:this.state.password,loginError:this.state.loginError}),a=h()(n);return l.a.createElement("div",{key:a},l.a.createElement(b,{onLogin:function(t,n){return e.login(t,n)},onForgotPassword:function(){return e.forgotPassword()},onSignup:function(){return e.signup()},username:this.state.username,password:this.state.password,loginError:this.state.loginError}))}if("signup"===this.state.mode||"signuptermsandconditions"===this.state.mode){n=JSON.stringify({mode:"signup",fields:this.state.signupFields,errors:this.state.signupErrors}),a=h()(n);var i,s=this.props.termsAndConditions;return s=s||!1,i="signuptermsandconditions"===this.state.mode?l.a.createElement(B.a,{key:"signuptermsandconditions",onAccept:function(){null!==e.state.termsAndConditionsCallback?(e.state.termsAndConditionsCallback(!0),e.state.termsAndConditionsMode&&e.setState({mode:e.state.termsAndConditionsMode,termsAndConditions:null,termsAndConditionsMode:null,termsAndConditionsCallback:null})):e.loginOperations.acceptTermsAndConditions(e.state.jwt)},onDecline:function(){null!==e.state.termsAndConditionsCallback?(e.state.termsAndConditionsCallback(!1),e.state.termsAndConditionsMode&&e.setState({mode:e.state.termsAndConditionsMode,termsAndConditions:null,termsAndConditionsMode:null,termsAndConditionsCallback:null})):e.declineTermsAndConditions()},termsAndConditions:this.state.termsAndConditions}):l.a.createElement("span",{key:"no-signuptermsandconditions"}),this.state.email?l.a.createElement("div",null,i,l.a.createElement("div",{key:a},l.a.createElement(O,{visible:"signup"===this.state.mode,email:this.state.email,withoutPassword:this.state.extParams.signupWithoutPassword,autoSubmit:this.state.extParams.signupAutoSubmit,termsAndConditions:s,fields:this.state.signupFields,errors:this.state.signupErrors,onSignup:function(t,n){e.signupVerifiedSubmit(t,n)},onLogin:function(){e.setLoginMode()},onTermsAndConditionsRequired:function(t,n){e.showTermsAndConditionsWithCallback(t,n)}}))):l.a.createElement("div",null,i,l.a.createElement("div",{key:a},l.a.createElement(F,{visible:"signup"===this.state.mode,withoutPassword:this.state.extParams.signupWithoutPassword,autoSubmit:this.state.extParams.signupAutoSubmit,termsAndConditions:s,fields:this.state.signupFields,errors:this.state.signupErrors,onSignup:function(t,n,a){e.signupSubmit(t,n,a)},onLogin:function(){e.setLoginMode()},onTermsAndConditionsRequired:function(t,n){e.showTermsAndConditionsWithCallback(t,n)}})))}return"forgotpassword"===this.state.mode?l.a.createElement("form",{key:"forgotpassword",method:"post"},l.a.createElement("div",null,l.a.createElement("h1",null,l.a.createElement(g.a,{id:"resetPasswordHeading",defaultMessage:"Reset or create password"})),l.a.createElement("label",{for:"email-input"},l.a.createElement(g.a,{id:"emailFieldLabel",defaultMessage:"Email: "})),l.a.createElement("input",{type:"text",id:"email-input",name:"email"})),l.a.createElement("div",null,l.a.createElement("input",{onClick:function(t){e.forgotPasswordByEmail(t)},type:"submit",value:t(R.continueButton)}))):"waitforemail"===this.state.mode?l.a.createElement("div",{key:"waitforemail",class:"surikatt"},l.a.createElement("div",{class:"col-sm-4"}),l.a.createElement("div",{class:"col-sm-8"},l.a.createElement("h1",null,l.a.createElement(g.a,{id:"weHaveSentEmailTitle",defaultMessage:"Nearly there!"})),l.a.createElement("p",null,l.a.createElement(g.a,{id:"weHaveSentEmail",defaultMessage:"We have sent you an e-mail to{linebreak}{resetEmail} ({changeEmailLink})",values:{linebreak:l.a.createElement("br",null),resetEmail:this.state.resetEmail,changeEmailLink:l.a.createElement("a",{onClick:function(t){t.preventDefault(),e.setState({mode:"forgotpassword"})},href:""},l.a.createElement(g.a,{id:"changeForgottenEmail",defaultMessage:"change email"}))}})),l.a.createElement("p",null,l.a.createElement(g.a,{id:"pleaseFollowTheLinkFromEmail",defaultMessage:"Please follow the link in that e-mail to finish setting up your account."})),l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(g.a,{id:"didNotGetEmail",defaultMessage:"Didn't get an email? {resendEmailLink}",values:{resendEmailLink:l.a.createElement("a",{onClick:function(t){t.preventDefault(),e.forgotPasswordRequest(e.state.resetEmail)},href:""},l.a.createElement(g.a,{id:"resendEmail",defaultMessage:"Resend email."}))}})),l.a.createElement("p",null,l.a.createElement(g.a,{id:"rememberToCheckYourSpam",defaultMessage:"Psst! Remember to check your spam folder"}))))):"termsandconditions"===this.state.mode?l.a.createElement(B.a,{onAccept:function(){null!==e.state.termsAndConditionsCallback?(e.state.termsAndConditionsCallback(!0),e.state.termsAndConditionsMode&&e.setState({mode:e.state.termsAndConditionsMode,termsAndConditions:null,termsAndConditionsMode:null,termsAndConditionsCallback:null})):e.loginOperations.acceptTermsAndConditions(e.state.jwt)},onDecline:function(){null!==e.state.termsAndConditionsCallback?(e.state.termsAndConditionsCallback(!1),e.state.termsAndConditionsMode&&e.setState({mode:e.state.termsAndConditionsMode,termsAndConditions:null,termsAndConditionsMode:null,termsAndConditionsCallback:null})):e.declineTermsAndConditions()},termsAndConditions:this.state.termsAndConditions}):l.a.createElement("span",{key:"unknown-mode"})}},{key:"render",value:function(){return this.state.spinner?l.a.createElement(v.a,{type:"ThreeDots",color:"#00BFFF",height:"200",width:"200"}):l.a.createElement("div",{className:"reactive-auth-login"},this.renderTopWithExtIdps(),this.renderMainContentPartDefaultLoginPart())}}],[{key:"getElementsByName",value:function(e){for(var t=document.getElementsByName(e),n=[],a=0;a<t.length;a++)n[a]=t.item(a);return n}},{key:"getMeta",value:function(e){var n=t.getElementsByName(e).filter(function(e){return"undefined"!==typeof e.tagName}).filter(function(e){return"meta"===e.tagName.toLowerCase()}).map(function(e){return e.getAttribute("content")}).filter(function(e){return"undefined"!==typeof e}).filter(function(e){return e});return n.length>0?n[0]:null}}]),t}(d.Component);t.a=Object(g.e)(D)}},[[100,1,2]]]);
//# sourceMappingURL=main.489a70a9.chunk.js.map