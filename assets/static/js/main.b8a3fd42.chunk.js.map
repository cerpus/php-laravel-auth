{"version":3,"sources":["ReactiveLoginApp.js","NewPassword.js","ForgotPassword.js","ForgotPasswordPage.js","ClaimAccounts.js","ClaimAccountsPage.js","InvalidEmailCode.js","InvalidEmailCodePage.js","index.js","lang/nb.js","lang/sv.js","lang/theme/edstep/en.js","lang/theme/edstep/nb.js","lang/theme/edstep/sv.js","lang/theme/learnplayground/en.js","lang/theme/learnplayground/nb.js","lang/theme/learnplayground/sv.js","lang/theme/edplan/en.js","lang/theme/edplan/nb.js","lang/theme/edplan/sv.js","lang.js","TermsAndConditions.js","LoginOperations.js","images/feide/emblemhvit-01.png","UserPasswordLogin.js","SignupForm.js","SignupVerifiedEmailForm.js","EnterpriseLogins.js","ReactiveLogin.js"],"names":["global","Intl","areIntlLocalesSupported","IntlPolyfill","require","NumberFormat","DateTimeFormat","ReactiveLoginApp","props","Object","_home_janeover_dev_javascript_reactive_auth_login_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_home_janeover_dev_javascript_reactive_auth_login_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_janeover_dev_javascript_reactive_auth_login_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","lang","theme","m","getMessages","authBaseUri","termsAndConditions","clientId","authorizeUri","codeAuthorizeUri","authorizeType","username","email","emailJwt","logoutUri","abortUri","idpUrisJson","extParams","authorizationCodeCallback","undefined","enterpriseLogins","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","react_intl__WEBPACK_IMPORTED_MODULE_9__","locale","messages","_ReactiveLogin__WEBPACK_IMPORTED_MODULE_8__","language","name","nodeList","document","getElementsByName","elements","i","length","item","matches","filter","element","tagName","toLowerCase","map","getAttribute","value","Component","defineMessages","signupPasswordFieldPlaceholder","id","defaultMessage","signupRepeatPasswordFieldPlaceholder","passwordsDoNotMatchError","passwordTooShortError","NewPassword","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","errors","type","fields","getElementsByClassName","setPasswordFieldType","passwordField","repeatPasswordField","consumer","formatMessage","intl","password","getPassword","getRepeatedPassword","setState","_this2","react_default","className","ref","placeholder","onMouseDown","showPasswords","onMouseUp","hidePasswords","onMouseOut","injectIntl","withRef","ForgotPassword","loginOpsProps","onEmailConflict","payload","intermediateToken","alert","onTermsAndConditions","jwt","loginOperations","LoginOperations","React","createRef","location","href","code","current","getWrappedInstance","validatePassword","requestBody","axios","post","claimId","querystring","stringify","xsrfCookieName","withCredentials","then","response","data","loggedIn","catch","error","_this3","src_NewPassword","Button","onClick","submit","index_es","TermsAndConditions","onAccept","acceptTermsAndConditions","onDecline","declineTermsAndConditions","ForgotPasswordPage","src_ForgotPassword","ClaimAccounts","domKey","Math","random","intermediateJwt","accounts","claimEmail","claimPasswordAccount","pullAccounts","get","encodeURIComponent","account","displayName","firstName","lastName","hasPassword","identity","headers","Authorization","_this4","claimAccount","_this5","allowLogin","_this6","claimAccountWithPassword","_this7","renderClaimPasswordAccount","values","options","key","accountName","createNewAccount","ClaimAccountsPage","src_ClaimAccounts","InvalidEmailCode","InvalidEmailCodePage","src_InvalidEmailCode","applyReactiveLogin","root","ReactDOM","render","rootElement","getElementById","getMeta","applyReactiveLoginFromMeta","window","applyForgotPassword","src_ForgotPasswordPage","applyClaimAccounts","src_ClaimAccountsPage","applyInvalidEmailCode","src_InvalidEmailCodePage","nbMessages","continueButton","weWillNeverPost","orSeparator","resetPasswordHeading","emailFieldLabel","weHaveSentEmail","changeForgottenEmail","pleaseFollowTheLinkFromEmail","didNotGetEmail","resendEmail","rememberToCheckYourSpam","loginWith","signup","signupWith","loginButton","loginFailedError","forgotPasswordLink","createNewAccountLink","usernamePlaceholder","passwordPlaceholder","emailInUseError","acceptTermsAndConditionsError","emailRequiredError","passwordRequiredError","signupEmailFieldPlaceholder","signupButton","signupPasswordRequirements","signupTermsAndConditionsLabel","termsAndConditionsLink","termsAndConditionsPopupTitle","closeButton","alreadyHaveAnAccount","logInHereLink","iAgreeButton","iDoNotAgreeButton","weHaveSentEmailTitle","embedSignupHeading","embedSignupP1","embedSignupP2","svMessages","enEdstepMessages","nbEdstepMessages","svEdstepMessages","enLearnplaygroundMessages","nbLearnplaygroundMessages","svLearnplaygroundMessages","enEdplanMessages","nbEdplanMessages","svEdplanMessages","addLocaleData","concat","toConsumableArray","en","nb","nn","sv","themes","edstep","learnplayground","edplan","hasOwnProperty","t","k","innerHTML","insertTermsAndConditions","react__WEBPACK_IMPORTED_MODULE_5___default","react_intl__WEBPACK_IMPORTED_MODULE_7__","react_bootstrap__WEBPACK_IMPORTED_MODULE_6__","tcStatus","accepted","authorize","identityId","identities","loginWithIdentity","status","credentialsId","conflictingIdentity","authorizeData","redirect","authorizationRedirect","queryPos","indexOf","params","substring","split","pair","eqPos","decodeURIComponent","forEach","module","exports","__webpack_require__","p","UserPasswordLogin","loginError","onLogin","onForgotPassword","onSignup","usernameFieldDisabled","event","preventDefault","onSubmit","clickLogIn","method","disabled","clickForgotPassword","clickSignup","SignupForm","showTermsAndConditions","spinner","autoSubmit","termsAndConditionsAccepted","onTermsAndConditionsRequired","callback","prefillDone","autoSubmitDone","withoutPassword","checked","ok","repeatPassword","emailField","prefill","termsAndConditionsInnerHtml","isEmptyObject","candidates","body","react_loader_spinner_default","color","height","width","formElementsStyle","display","visible","style","renderPasswordFields","target","Modal","show","onShow","container","getAppRoot","ModalTitle","ModalBody","ModalFooter","clickLogin","object","Array","isArray","prop","SignupVerifiedEmailForm","signupElementsStyle","class","EnterpriseLogins","onClose","login","open","uri","openLogin","close","renderLogins","invalidEmailValidationError","sameEmailSuppliedValidationError","usernameTakenError","newUsernameRequiredError","changeUsernameFailed","ackChangeUsernameFailed","forgotPasswordFailed","loginFailedWithErrorCode","strangeResponseFromEndpoint","didNotReceiveIdentityResponseFromEndpoint","signupFailure","signupFailureNoClaimOptions","unableToSendEmail","ReactiveLogin","assign","mode","termsAndConditionsCallback","termsAndConditionsMode","idpEmailConflict","idpEmailToken","objectId","sha1","hasVerifiedEmail","extParamsInput","hideSignupIdps","embedSignup","signupWithoutPassword","signupAutoSubmit","signupFields","signupErrors","idpMergeLoginError","idpMergeLoginPasswordPrefill","idpEmailValidationError","idpChangeEmail","idpEmailWaitForEmail","claimVerified","claimPassword","mustChangeUsername","changeUsernameJwt","changeUsernamePreviousEmail","changeUsernameOtherLogins","changeUsernameError","authorizeWithSession","listener","addEventListener","attachEvent","json","JSON","parse","loginData","intermediateJwtToken","removedEmail","alternativeLogins","autoConnectIdentity","redirectUri","signupRequestPayload","success","abort","signupData","validationErrors","fieldErrors","field","message","forgotPasswordData","resetEmail","tryAuthorize","emailVerified","emailError","documentMode","url","setTimeout","token","pollTokenReturn","_this8","popupHref","openPopup","isIE11orLess","popup","forgotPasswordRequest","_this9","codeAuthorizeUrl","_this10","_this11","validationError","claimOptResponse","claimOptions","isVerified","claimOptError","_this12","idconnectLikeResponse","endpointName","_this13","_this14","_this15","usernameFieldRef","_this16","previousMode","_this17","listenEvent","_this18","src_UserPasswordLogin","idpLoginAndMerge","idpLoginAndMergeForgotPassword","verifyOverrideEmailAndClaimOptions","_this19","changeUserProceedWithoutUsername","_this20","changeUsernameFieldRef","changeUserProceedWithUsername","_this21","renderMustChangeUsernameHasAlternatives","renderMustChangeUsernameNoAlternatives","_this22","renderIdpRecursiveInUse","verifyEmailAndLogIn","changeEmailAndSignUp","idpSingupWithoutEmail","_this23","btnClass","skolon","feidetest","feideopenidp","feide","dataporten","google","facebook","windowslive","twitter","btnTitle","getEnterpriseLogins","renderExtIdpOrLoginHeading","getIdpUris","info","btnClassName","btnTitleStr","clickHandler","obj","parentNode","startPopupLogin","data-popup-href","popupTokenUri","data-popup-width","data-popup-height","src","feideLogo","alt","_this24","renderMustChangeUsername","renderIdpEmailInUse","hash","forgotPassword","termsElement","src_SignupVerifiedEmailForm","signupVerifiedSubmit","setLoginMode","showTermsAndConditionsWithCallback","src_SignupForm","signupSubmit","for","forgotPasswordByEmail","linebreak","changeEmailLink","resendEmailLink","_this25","src_EnterpriseLogins","renderEnterpriseLogin","renderTopWithExtIdps","renderMainContentPartDefaultLoginPart"],"mappings":"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","file":"static/js/main.b8a3fd42.chunk.js","sourcesContent":["/* eslint-disable import/first */\n\nimport areIntlLocalesSupported from 'intl-locales-supported';\n\nvar localesMyAppSupports = [\n    \"en\", \"nb\", \"nn\", \"sv\"\n];\n\nif (global.Intl) {\n    // Determine if the built-in `Intl` has the locale data we need.\n    if (!areIntlLocalesSupported(localesMyAppSupports)) {\n        // `Intl` exists, but it doesn't have the data we need, so load the\n        // polyfill and replace the constructors with need with the polyfill's.\n        var IntlPolyfill = require('intl');\n        Intl.NumberFormat   = IntlPolyfill.NumberFormat;\n        Intl.DateTimeFormat = IntlPolyfill.DateTimeFormat;\n    }\n} else {\n    // No `Intl`, so use and load the polyfill.\n    global.Intl = require('intl');\n}\n\nimport React, { Component } from 'react';\nimport './App.css';\n\nimport ReactiveLogin from './ReactiveLogin';\n\nimport {IntlProvider} from 'react-intl';\nimport getMessages from './lang';\n\nclass ReactiveLoginApp extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    static getElementsByName(name) {\n        var nodeList = document.getElementsByName(name);\n        var elements = [];\n        for (var i = 0; i < nodeList.length; i++) {\n            elements[i] = nodeList.item(i);\n        }\n        return elements;\n    }\n    static getMeta(name) {\n        var matches =  ReactiveLoginApp.getElementsByName(name)\n            .filter(element => typeof(element.tagName) !== 'undefined')\n            .filter(element => element.tagName.toLowerCase() === \"meta\")\n            .map(element => element.getAttribute(\"content\"))\n            .filter(value => typeof(value) !== \"undefined\")\n            .filter(value => value);\n        if (matches.length > 0) {\n            return matches[0];\n        } else {\n            return null;\n        }\n    }\n    render() {\n        const lang = this.props.lang;\n        const theme = this.props.theme;\n\n        const m = getMessages(lang, theme);\n\n        const authBaseUri = this.props.authBaseUri;\n        const termsAndConditions = this.props.termsAndConditions;\n        const clientId = this.props.clientId;\n        const authorizeUri = this.props.authorizeUri;\n        const codeAuthorizeUri = this.props.codeAuthorizeUri;\n        const authorizeType = this.props.authorizeType;\n        const username = this.props.username;\n        const email = this.props.email;\n        const emailJwt = this.props.emailJwt;\n        const logoutUri = this.props.logoutUri;\n        const abortUri = this.props.abortUri;\n        const idpUrisJson = this.props.idpUrisJson;\n        const extParams = this.props.extParams;\n        const authorizationCodeCallback = typeof(this.props.authorizationCodeCallback) === 'function' ? this.props.authorizationCodeCallback : undefined;\n        const enterpriseLogins = this.props.enterpriseLogins;\n        return (\n            <IntlProvider locale={lang} messages={m}>\n                <ReactiveLogin\n                    authBaseUri={authBaseUri}\n                    language={lang}\n                    termsAndConditions={termsAndConditions}\n                    clientId={clientId}\n                    authorizeUri={authorizeUri}\n                    codeAuthorizeUri={codeAuthorizeUri}\n                    authorizeType={authorizeType}\n                    username={username}\n                    email={email}\n                    emailJwt={emailJwt}\n                    logoutUri={logoutUri}\n                    abortUri={abortUri}\n                    idpUrisJson={idpUrisJson}\n                    extParams={extParams}\n                    authorizationCodeCallback={authorizationCodeCallback}\n                    enterpriseLogins={enterpriseLogins}\n                />\n            </IntlProvider>\n        );\n    }\n}\n\nexport default ReactiveLoginApp;\n","\nimport React, {Component} from 'react';\nimport {FormattedMessage, intlShape, injectIntl, defineMessages} from 'react-intl';\nimport axios from \"axios\";\n\nconst messages = defineMessages({\n    signupPasswordFieldPlaceholder: {\n        'id': 'signupPasswordFieldPlaceholder',\n        'defaultMessage': '(Choose a password)'\n    },\n    signupRepeatPasswordFieldPlaceholder: {\n        'id': 'signupRepeatPasswordFieldPlaceholder',\n        'defaultMessage': '(Repeat password)'\n    },\n    passwordsDoNotMatchError:{\n        'id': 'passwordsDoNotMatchError',\n        'defaultMessage': 'Passwords do not match.'\n    },\n    passwordTooShortError:{\n        'id': 'passwordTooShortError',\n        'defaultMessage': 'The password is too short. Minimum 6 characters.'\n    }\n});\n\nclass NewPassword extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            'errors': {}\n        };\n    }\n\n    setPasswordFieldType(type) {\n        var fields = document.getElementsByClassName(\"password-field\");\n        for (var i = 0; fields.length; i++) {\n            fields.item(i).type = type;\n        }\n    }\n    showPasswords() {\n        this.setPasswordFieldType('text');\n    }\n    hidePasswords() {\n        this.setPasswordFieldType('password');\n    }\n\n    getPassword() {\n        const password = this.passwordField.value;\n        return password;\n    }\n\n    getRepeatedPassword() {\n        const repeatedPassword = this.repeatPasswordField.value;\n        return repeatedPassword;\n    }\n\n    validatePassword(consumer) {\n        const {formatMessage} = this.props.intl;\n        const password = this.getPassword();\n        const repeatedPassword = this.getRepeatedPassword();\n\n        if (password === repeatedPassword) {\n            if (password.length >= 6) {\n                consumer(password);\n            } else {\n                this.setState({\"errors\": {\"password\": formatMessage(messages.passwordTooShortError)}});\n            }\n        } else {\n            this.setState({\"errors\": {\"password\": formatMessage(messages.passwordsDoNotMatchError)}});\n        }\n    }\n\n    render() {\n        const {formatMessage} = this.props.intl;\n\n        return (\n            <div>\n                {\n                    (() => {\n                        if (typeof (this.state.errors) !== \"undefined\" && typeof (this.state.errors.password) !== \"undefined\") {\n                            return (\n                                <div\n                                    className=\"error col-sm-12 alert alert-danger\">{this.state.errors.password}</div>\n                            );\n                        } else {\n                            return (<span></span>);\n                        }\n                    })()\n                }\n\n                <input className=\"col-sm-12 password-field\" type=\"password\" ref={(ref) => { this.passwordField = ref; }}\n                       placeholder={formatMessage(messages.signupPasswordFieldPlaceholder)} name=\"password\"/>\n                <input className=\"col-sm-12 password-field\" type=\"password\" ref={(ref) => { this.repeatPasswordField = ref; }}\n                       placeholder={formatMessage(messages.signupRepeatPasswordFieldPlaceholder)}\n                       name=\"repeatpassword\"/>\n                <div className=\"col-sm-2 eyeholder\" onMouseDown={() => {\n                    this.showPasswords();\n                }} onMouseUp={() => {\n                    this.hidePasswords();\n                }} onMouseOut={() => {\n                    this.hidePasswords();\n                }}></div>\n            </div>\n        );\n    }\n}\n\nNewPassword.propTypes = {\n    intl: intlShape.isRequired\n};\n\nexport default injectIntl(NewPassword, {withRef: true});","\nimport React, {Component} from 'react';\nimport {Button} from 'react-bootstrap';\nimport {FormattedMessage, intlShape, injectIntl, defineMessages} from 'react-intl';\nimport querystring from 'querystring';\nimport axios from 'axios';\nimport LoginOperations from './LoginOperations';\nimport TermsAndConditions from \"./TermsAndConditions\";\nimport NewPassword from \"./NewPassword\";\n\nconst messages = defineMessages({\n});\n\nclass ForgotPassword extends Component {\n    constructor(props) {\n        super(props);\n\n        const loginOpsProps = {\n            intl: this.props.intl,\n            authorizationCodeCallback: typeof(props.authorizationCodeCallback) === 'function' ? props.authorizationCodeCallback : undefined,\n            authBaseUri: props.authBaseUri,\n            clientId: props.clientId,\n            codeAuthorizeUri: props.codeAuthorizeUri,\n            onEmailConflict: (payload, intermediateToken) => {\n                alert('Forgot password failed with failure to resolve email conflict');\n            },\n            onTermsAndConditions: (jwt, termsAndConditions) => {\n                this.setState({\n                    \"jwt\": jwt,\n                    \"termsAndConditions\": termsAndConditions\n                });\n            }\n        };\n        this.loginOperations = new LoginOperations(loginOpsProps);\n        this.state = {\n            'errors': {},\n            'language': typeof(props.language) !== 'undefined' ? props.language : 'en',\n            'termsAndConditions': false,\n            'jwt': false\n        };\n        this.passwordField = React.createRef();\n    }\n\n    declineTermsAndConditions() {\n        document.location.href = this.props.logoutUri;\n    }\n\n    submit() {\n        const code = this.props.code;\n        this.passwordField.current.getWrappedInstance().validatePassword((password) => {\n            const requestBody = {\n                'code': code,\n                'password': password\n            };\n            axios.post(\n                this.props.authBaseUri+'/v1/login/idp/forgotpassword/'+this.props.claimId, querystring.stringify(requestBody), {\n                    'xsrfCookieName': null,\n                    'withCredentials': true\n                }\n            )\n                .then((response) => {\n                    var loginResponse = response.data;\n                    var jwt = loginResponse.jwt;\n                    if (typeof(jwt) !== 'undefined' && jwt) {\n                        this.loginOperations.loggedIn(this.state.language, jwt);\n                    } else {\n                        alert('Forgot password step did not produce a JWT');\n                    }\n                })\n                .catch((error) => {\n                    alert('Forgot password step in login process failed');\n                });\n        });\n    }\n\n    render() {\n        if (this.state.termsAndConditions === false) {\n            return (\n                <div className=\"reactive-auth-login\">\n                    <h1>Reset password</h1>\n                    <p>Please reset your password by typing your new password twice below:</p>\n\n                    <NewPassword errors={this.state.errors} ref={this.passwordField}/>\n\n                    <div>\n                        <Button onClick={() => {\n                            this.submit();\n                        }} className=\"btn btn-success\">\n                            <FormattedMessage id=\"submitForgotPasswordButton\" defaultMessage=\"Save and continue\"/>\n                        </Button>\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"reactive-auth-login\">\n                    <TermsAndConditions onAccept={() => { this.loginOperations.acceptTermsAndConditions(this.state.jwt); }} onDecline={() => { this.declineTermsAndConditions(); }} termsAndConditions={this.state.termsAndConditions} />\n                </div>\n            );\n        }\n    }\n}\n\nForgotPassword.propTypes = {\n    intl: intlShape.isRequired\n};\n\nexport default injectIntl(ForgotPassword);\n","\nimport React, {Component} from 'react';\nimport getMessages from './lang';\nimport {IntlProvider} from \"react-intl\";\nimport ForgotPassword from \"./ForgotPassword\";\n\n\nclass ForgotPasswordPage extends Component {\n    render() {\n\n        const lang = typeof(this.props.lang) !== 'undefined' ? this.props.lang : 'en';\n        const messages = getMessages(lang);\n\n        return (\n            <IntlProvider locale={lang} messages={messages}>\n                <ForgotPassword {...this.props}/>\n            </IntlProvider>\n        );\n    }\n}\n\nexport default ForgotPasswordPage;\n","\nimport React, {Component} from 'react';\nimport {FormattedMessage, intlShape, injectIntl, defineMessages} from 'react-intl';\nimport LoginOperations from \"./LoginOperations\";\nimport TermsAndConditions from \"./TermsAndConditions\";\nimport axios from 'axios';\nimport {Button} from \"react-bootstrap\";\nimport querystring from 'querystring';\nimport NewPassword from \"./NewPassword\";\n\nclass ClaimAccounts extends Component {\n    constructor(props) {\n        super(props);\n\n        const loginOpsProps = {\n            intl: this.props.intl,\n            authorizationCodeCallback: typeof(props.authorizationCodeCallback) === 'function' ? props.authorizationCodeCallback : undefined,\n            authBaseUri: props.authBaseUri,\n            clientId: props.clientId,\n            codeAuthorizeUri: props.codeAuthorizeUri,\n            onEmailConflict: (payload, intermediateToken) => {\n                alert('Forgot password failed with failure to resolve email conflict');\n            },\n            onTermsAndConditions: (jwt, termsAndConditions) => {\n                this.setState({\n                    \"jwt\": jwt,\n                    \"termsAndConditions\": termsAndConditions\n                });\n            }\n        };\n        this.loginOperations = new LoginOperations(loginOpsProps);\n        this.domKey = \"\" + Math.random();\n        this.state = {\n            'errors': {},\n            'language': typeof(props.language) !== 'undefined' ? props.language : 'en',\n            'termsAndConditions': false,\n            'jwt': false,\n            'intermediateJwt': false,\n            'accounts': [],\n            'claimEmail': false,\n            'claimPasswordAccount': false\n        };\n        this.passwordField = React.createRef();\n        this.pullAccounts();\n    }\n\n    pullAccounts() {\n        axios.get(this.props.authBaseUri+'/v1/login/idp/claimaccounts/'+this.props.claimId+'?code='+encodeURIComponent(this.props.code), {\n        })\n            .then((response) => {\n                const data = response.data;\n                if (typeof(data.accounts) !== 'undefined' && typeof(data.intermediateJwt) !== 'undefined' && typeof(data.claimEmail) !== 'undefined') {\n                    this.setState({'accounts': data.accounts, 'intermediateJwt': data.intermediateJwt, 'claimEmail': data.claimEmail});\n                } else {\n                    alert('Invalid response data on claim accounts');\n                }\n            })\n            .catch((error) => {\n                alert('Claim accounts failure');\n            })\n    }\n\n    declineTermsAndConditions() {\n        document.location.href = this.props.logoutUri;\n    }\n\n    accountName(account) {\n        if (account.displayName) {\n            return account.displayName;\n        } else if (account.firstName) {\n            if (account.lastName) {\n                return account.firstName + \" \" + account.lastName;\n            } else {\n                return account.firstName;\n            }\n        } else if (account.lastName) {\n            return account.lastName;\n        } else {\n            return \"No Name\";\n        }\n    }\n\n    claimAccount(account, password) {\n        if (account.hasPassword && typeof(password) === 'undefined') {\n            this.setState({'claimPasswordAccount': account});\n        } else {\n            var data = {'id': account.identity.id};\n            if (typeof(password) !== 'undefined') {\n                data.password = password;\n            }\n            axios.post(this.props.authBaseUri + '/v1/login/idp/claimaccount', querystring.stringify(data), {\n                'headers': {\n                    'Authorization': 'Bearer ' + this.state.intermediateJwt\n                }\n            })\n                .then((response) => {\n                    const data = response.data;\n                    if (typeof (data.jwt) !== 'undefined') {\n                        const jwt = data.jwt;\n                        this.loginOperations.loggedIn(this.state.language, jwt);\n                    } else {\n                        alert('Claim account failed with bad response');\n                    }\n                })\n                .catch((error) => {\n                    alert('Claim account failed');\n                });\n        }\n    }\n\n    claimAccountWithPassword() {\n        this.passwordField.current.getWrappedInstance().validatePassword((password) => {\n           this.claimAccount(this.state.claimPasswordAccount, password);\n        });\n    }\n\n    createNewAccount() {\n        axios.post(this.props.authBaseUri+'/v1/login/idp/claimemail', querystring.stringify({'email': this.state.claimEmail, 'allowLogin': true}), {\n            'headers': {\n                'Authorization': 'Bearer '+this.state.intermediateJwt\n            }\n        })\n            .then((response) => {\n                const data = response.data;\n                if (typeof(data.jwt) !== 'undefined') {\n                    const jwt = data.jwt;\n                    this.loginOperations.loggedIn(this.state.language, jwt);\n                } else {\n                    alert('Claim email failed with bad response');\n                }\n            })\n            .catch((error) => {\n                alert('Claim email failed');\n            });\n    }\n\n    renderClaimPasswordAccount() {\n        return (\n            <div className=\"reactive-auth-login\">\n                <p>Please set a new password for your account:</p>\n                <NewPassword ref={this.passwordField}/>\n                <Button onClick={() => {\n                    this.claimAccountWithPassword();\n                }} className=\"btn btn-success\">\n                    <FormattedMessage id=\"submitForgotPasswordButton\" defaultMessage=\"Save and continue\"/>\n                </Button>\n            </div>\n        );\n    }\n\n    render() {\n        if (this.state.termsAndConditions === false) {\n            if (this.state.claimPasswordAccount !== false) {\n                return this.renderClaimPasswordAccount();\n            }\n            if (this.state.accounts.length > 0) {\n                return (\n                    <div className=\"reactive-auth-login\">\n                        <p>\n                            <FormattedMessage\n                                id={'idpConflictProceedClaimEmail'}\n                                defaultMessage={'You have successfully confirmed your email address {email}. Please use an existing account or create a new account:'}\n                                values={{'email': this.state.claimEmail}}\n                            />\n                        </p>\n                        <ul>\n                            {\n                                (() => {\n                                    let options = this.state.accounts.map((account) => {\n                                        return (\n                                            <li key={account.identity.id}>\n                                                {this.accountName(account.identity)} {account.identity.email ? account.identity.email : \"(No primary email)\"}\n                                                <Button onClick={() => {\n                                                    this.claimAccount(account);\n                                                }} className=\"btn btn-success\">\n                                                    <FormattedMessage id=\"claimExistingAccountButton\"\n                                                                      defaultMessage=\"Use this account\"/>\n                                                </Button>\n                                            </li>\n                                        );\n                                    });\n                                    if (this.state.claimEmail) {\n                                        options[options.length] = (\n                                            <li>\n                                                <p><FormattedMessage\n                                                    id=\"questionCreateNewAccountAndDisconnectOthers\"\n                                                    defaultMessage=\"Would you like to create a new account using {email}? This email address will be removed from the other accounts.\"\n                                                    values={{'email': this.state.claimEmail}}/></p>\n                                                <Button onClick={() => {\n                                                    this.createNewAccount();\n                                                }} className=\"btn btn-success\">\n                                                    <FormattedMessage id=\"createNewAccountLink\"\n                                                                      defaultMessage=\"Create new account\"/>\n                                                </Button>\n                                            </li>\n                                        );\n                                    }\n                                    return options;\n                                })()\n                            }\n                        </ul>\n                    </div>\n                );\n            } else if (this.state.claimEmail) {\n                return (\n                    <div className=\"reactive-auth-login\">\n                        <p>\n                            <FormattedMessage\n                                id={'idpConflictProceedClaimSignupWithEmail'}\n                                defaultMessage={'You have successfully confirmed your email address {email}. You can now proceed with signing up:'}\n                                values={{'email': this.state.claimEmail}}\n                            />\n                        </p>\n                        <div>\n                            <Button onClick={() => {\n                                this.createNewAccount();\n                            }} className=\"btn btn-success\">\n                                <FormattedMessage id=\"createNewAccountLink\"\n                                                  defaultMessage=\"Create new account\"/>\n                            </Button>\n                        </div>\n                    </div>\n                );\n            } else {\n                return (\n                    <div>\n                        <p>\n                            <FormattedMessage\n                                id={'idpConflictClaimSomethingWentWrong'}\n                                defaultMessage={'Something went wrong during the signup process. There are no apparent ways to continue this signup. Please try again or contact support.'}\n                            />\n                        </p>\n                    </div>\n                )\n            }\n        } else {\n            return (\n                <div className=\"reactive-auth-login\">\n                    <TermsAndConditions onAccept={() => { this.loginOperations.acceptTermsAndConditions(this.state.jwt); }} onDecline={() => { this.declineTermsAndConditions(); }} termsAndConditions={this.state.termsAndConditions} />\n                </div>\n            );\n        }\n    }\n}\n\nClaimAccounts.propTypes = {\n    intl: intlShape.isRequired\n};\n\nexport default injectIntl(ClaimAccounts);\n","\nimport React, {Component} from 'react';\nimport getMessages from './lang';\nimport {IntlProvider} from \"react-intl\";\nimport ClaimAccounts from './ClaimAccounts';\n\nclass ClaimAccountsPage extends Component {\n    render() {\n\n        const lang = typeof(this.props.lang) !== 'undefined' ? this.props.lang : 'en';\n        const messages = getMessages(lang);\n\n        return (\n            <IntlProvider locale={lang} messages={messages}>\n                <ClaimAccounts {...this.props}/>\n            </IntlProvider>\n        );\n    }\n}\n\nexport default ClaimAccountsPage;","\nimport React, {Component} from 'react';\nimport {FormattedMessage, intlShape, injectIntl, defineMessages} from 'react-intl';\n\nclass InvalidEmailCode extends Component {\n    render() {\n        return (\n            <div className=\"reactive-auth-login\">\n                <h1>\n                    <FormattedMessage id={'invalidOrExpiredEmailCodeDescription'} defaultMessage={'The link has expired'} />\n                </h1>\n                <p>\n                    <FormattedMessage id={'invalidOrExpiredEmailCodeDescription'} defaultMessage={'We are very sorry, but this link is either invalid or it has expired. If you did forget your password please try the \"forgot password\" link on the login page again to get a new link. Otherwise try logging in again in order to resolve this issue.'} />\n                </p>\n            </div>\n        )\n    }\n}\n\nInvalidEmailCode.propTypes = {\n    intl: intlShape.isRequired\n};\n\nexport default injectIntl(InvalidEmailCode);","\nimport React, {Component} from 'react';\nimport getMessages from './lang';\nimport {IntlProvider} from \"react-intl\";\nimport InvalidEmailCode from \"./InvalidEmailCode\";\n\n\nclass InvalidEmailCodePage extends Component {\n    render() {\n\n        const lang = typeof(this.props.lang) !== 'undefined' ? this.props.lang : 'en';\n        const messages = getMessages(lang);\n\n        return (\n            <IntlProvider locale={lang} messages={messages}>\n                <InvalidEmailCode {...this.props}/>\n            </IntlProvider>\n        );\n    }\n}\n\nexport default InvalidEmailCodePage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactiveLoginApp from './ReactiveLoginApp';\nimport ForgotPasswordPage from './ForgotPasswordPage';\nimport './index.css';\nimport ClaimAccountsPage from \"./ClaimAccountsPage\";\nimport InvalidEmailCodePage from \"./InvalidEmailCodePage\";\n\n(function () {\n    const applyForgotPassword = function (\n        root, props\n    ) {\n        ReactDOM.render(\n            <ForgotPasswordPage {...props}/>,\n            root\n        );\n    };\n\n    const applyClaimAccounts = function (\n        root, props\n    ) {\n        ReactDOM.render(\n            <ClaimAccountsPage {...props}/>,\n            root\n        );\n    };\n\n    const applyInvalidEmailCode = function(\n        root, props\n    ) {\n        ReactDOM.render(\n            <InvalidEmailCodePage {...props}/>,\n            root\n        );\n    };\n\n    const applyReactiveLogin = function (\n        root,\n        authBaseUri,\n        lang,\n        theme,\n        termsAndConditions,\n        clientId,\n        authorizeUri,\n        codeAuthorizeUri,\n        username,\n        email,\n        emailJwt,\n        logoutUri,\n        abortUri,\n        idpUrisJson,\n        authorizeType,\n        extParams,\n        authorizationCodeCallback,\n        enterpriseLogins\n    ) {\n        ReactDOM.render(\n            <ReactiveLoginApp\n                lang={lang}\n                theme={theme}\n                authBaseUri={authBaseUri}\n                termsAndConditions={termsAndConditions}\n                clientId={clientId}\n                authorizeUri={authorizeUri}\n                codeAuthorizeUri={codeAuthorizeUri}\n                authorizeType={authorizeType}\n                username={username}\n                email={email}\n                emailJwt={emailJwt}\n                logoutUri={logoutUri}\n                abortUri={abortUri}\n                idpUrisJson={idpUrisJson}\n                extParams={extParams}\n                authorizationCodeCallback={authorizationCodeCallback}\n                enterpriseLogins={enterpriseLogins}\n            />,\n            root\n        );\n    };\n\n    const applyReactiveLoginFromMeta = function (root) {\n        const authBaseUri = \"\";\n        const lang = ReactiveLoginApp.getMeta(\"languageAlpha2\");\n        const theme = ReactiveLoginApp.getMeta(\"theme\");\n        const termsAndConditions = ReactiveLoginApp.getMeta(\"termsAndConditions\");\n        const clientId = ReactiveLoginApp.getMeta(\"clientId\");\n        const authorizeUri = ReactiveLoginApp.getMeta(\"authorizeUri\");\n        const codeAuthorizeUri = ReactiveLoginApp.getMeta(\"codeAuthorizeUri\");\n        const authorizeType = ReactiveLoginApp.getMeta(\"authorizeType\");\n        const username = ReactiveLoginApp.getMeta(\"username\");\n        const email = ReactiveLoginApp.getMeta(\"email\");\n        const emailJwt = ReactiveLoginApp.getMeta(\"emailJwt\");\n        const logoutUri = ReactiveLoginApp.getMeta(\"logoutUri\");\n        const abortUri = ReactiveLoginApp.getMeta(\"abortUri\");\n        const idpUrisJson = ReactiveLoginApp.getMeta(\"idpUrisJson\");\n\n        applyReactiveLogin(\n            root,\n\n            authBaseUri,\n            lang,\n            theme,\n            termsAndConditions,\n            clientId,\n            authorizeUri,\n            codeAuthorizeUri,\n            username,\n            email,\n            emailJwt,\n            logoutUri,\n            abortUri,\n            idpUrisJson,\n            authorizeType,\n            /*extParams=*/ {},\n            /*authorizationCodeCallback=*/ undefined,\n            /*enterpriseLogins=*/ undefined\n        );\n    };\n\n    (function () {\n        var rootElement = document.getElementById('reactiveLoginRootElement');\n        if (typeof(rootElement) !== 'undefined' && rootElement) {\n            applyReactiveLoginFromMeta(rootElement);\n        }\n    })();\n\n    window.applyForgotPassword = applyForgotPassword;\n    window.applyClaimAccounts = applyClaimAccounts;\n    window.applyInvalidEmailCode = applyInvalidEmailCode;\n    window.applyReactiveLogin = applyReactiveLogin;\n})();","\nconst nbMessages = {\n    \"continueButton\": \"Fortsett\",\n    \"weWillNeverPost\": \"Vi vil aldri poste uten din tillatelse.\",\n    \"orSeparator\": \"ELLER\",\n    \"resetPasswordHeading\": \"Nullstill eller opprett passord\",\n    \"emailFieldLabel\": \"E-post: \",\n    \"weHaveSentEmail\": \"Vi har sendt en epost til{linebreak}{resetEmail} ({changeEmailLink})\",\n    \"changeForgottenEmail\": \"endre epostadresse\",\n    \"pleaseFollowTheLinkFromEmail\": \"Vennligst følg lenken i eposten for å sette opp din konto\",\n    \"didNotGetEmail\": \"Fikk du ikke epost? {resendEmailLink}\",\n    \"resendEmail\": \"Send på nytt.\",\n    \"rememberToCheckYourSpam\": \"Psst! Husk å sjekke spamfolderen\",\n    \"loginWith\": \"Logg inn med\",\n    \"signup\": \"Lag konto\",\n    \"signupWith\": \"Lag konto med\",\n    \"loginButton\": \"Logg inn\",\n    \"loginFailedError\": \"Innlogging feilet! Vennligst sjekk ditt brukernavn og passord.\",\n    \"forgotPasswordLink\": \"Glemt passord?\",\n    \"createNewAccountLink\": \"Lag ny konto\",\n    \"usernamePlaceholder\": \"(Brukernavn eller e-post)\",\n    \"passwordPlaceholder\": \"(Passord)\",\n    \"emailInUseError\": \"E-postadressen er allerede i bruk. Enten bruk glemt passord-lenken til å gjenvinne kontroll over brukerkontoen eller skriv inn en annen e-postadresse.\",\n    \"acceptTermsAndConditionsError\": \"Du må godta vilkår og bestemmelser.\",\n    \"emailRequiredError\": \"E-post er påkrevd.\",\n    \"passwordRequiredError\": \"Passord er påkrevd.\",\n    \"passwordsDoNotMatchError\": \"Passordene er ikke like.\",\n    \"passwordTooShortError\": \"Passordet er for kort. Minimum 6 tegn\",\n    \"signupEmailFieldPlaceholder\": \"(Epost)\",\n    \"signupPasswordFieldPlaceholder\": \"(Velg passord)\",\n    \"signupRepeatPasswordFieldPlaceholder\": \"(Gjenta passord)\",\n    \"signupButton\": \"Lag konto\",\n    \"signupPasswordRequirements\": \"*Passord må være på minimum 6 tegn.\",\n    \"signupTermsAndConditionsLabel\": \"Jeg godtar {termsAndConditions}\",\n    \"termsAndConditionsLink\": \"vilkår og bestemmelser\",\n    \"termsAndConditionsPopupTitle\": \"Vilkår og bestemmelser\",\n    \"closeButton\": \"Lukk\",\n    \"alreadyHaveAnAccount\": \"Har du allerede en konto? {logInHereLink}\",\n    \"logInHereLink\": \"Logg inn her\",\n    \"iAgreeButton\": \"Jeg godtar\",\n    \"iDoNotAgreeButton\": \"Jeg godtar ikke\",\n    \"weHaveSentEmailTitle\": \"Snart klart!\",\n    \"embedSignupHeading\": \"Bekreft din brukerprofil\",\n    \"embedSignupP1\": \"Siden dette er første gang du tar ett av våre kurs eller spill, ber vi her om en ekstra runde innlogging for at din konto skal bli verifisert. Dette for at vi skal være 100% sikker på at dette er deg og kunne ivareta din personsikkerhet.\",\n    \"embedSignupP2\": \"Når du har logget inn vil du få en epost som du også må åpne og bekrefte. Dette er en engangs forespørsel og vil ikke være nødvendig neste gang du logger inn.\"\n};\n\nexport default nbMessages;\n","\nconst svMessages = {\n    \"continueButton\": \"Fortsätt\",\n    \"weWillNeverPost\": \"Vi kommer aldrig använda ditt konto utan din tillåtelse.\",\n    \"orSeparator\": \"ELLER\",\n    \"resetPasswordHeading\": \"Återställ eller skapa ett lösenord\",\n    \"emailFieldLabel\": \"E-postadress: \",\n    \"weHaveSentEmail\": \"Vi har skickat ett e-post till{linebreak}{resetEmail} ({changeEmailLink})\",\n    \"changeForgottenEmail\": \"byt e-postadress\",\n    \"pleaseFollowTheLinkFromEmail\": \"Vänligen följ länken i det e-postmeddelandet för att slutföra inställningarna av ditt konto.\",\n    \"didNotGetEmail\": \"Fick du inget e-post? {resendEmailLink}\",\n    \"resendEmail\": \"Skicka e-post på nytt.\",\n    \"rememberToCheckYourSpam\": \"Psst! Kom ihåg att titta i din skräppostmappen\",\n    \"loginWith\": \"Logga in med\",\n    \"signup\": \"Registrera dig\",\n    \"signupWith\": \"Registrera dig med\",\n    \"loginButton\": \"Logga in\",\n    \"loginFailedError\": \"Inloggning misslyckades! Vänligen kontrollera ditt användarnamn och lösenord.\",\n    \"forgotPasswordLink\": \"Glömt lösenordet?\",\n    \"createNewAccountLink\": \"Skapa ett nyt konto\",\n    \"usernamePlaceholder\": \"(Användarnamn eller e-postadress)\",\n    \"passwordPlaceholder\": \"(Lösenord)\",\n    \"emailInUseError\": \"E-postadressen används redan. Vänligen använd länken Glömt lösenord för att återställa ditt användarkonto, annars måste du skriva in en annan e-postadress.\",\n    \"acceptTermsAndConditionsError\": \"Du behöver acceptera villkoren.\",\n    \"emailRequiredError\": \"E-postadress är obligatorisk.\",\n    \"passwordRequiredError\": \"Lösenord är obligatoriskt.\",\n    \"passwordsDoNotMatchError\": \"Lösenorden matchar inte.\",\n    \"passwordTooShortError\": \"Lösenordet är för kort. Minst 6 tecken\",\n    \"signupEmailFieldPlaceholder\": \"(E-postadress)\",\n    \"signupPasswordFieldPlaceholder\": \"(Välj ett lösenord)\",\n    \"signupRepeatPasswordFieldPlaceholder\": \"(Repetera lösenord)\",\n    \"signupButton\": \"Registrera\",\n    \"signupPasswordRequirements\": \"*Lösenordet måste vara minst 6 tecken långt.\",\n    \"signupTermsAndConditionsLabel\": \"Jag godkänner {termsAndConditions}\",\n    \"termsAndConditionsLink\": \"Villkor\",\n    \"termsAndConditionsPopupTitle\": \"Villkor\",\n    \"closeButton\": \"Stänga\",\n    \"alreadyHaveAnAccount\": \"Har du redan ett konto? {logInHereLink}\",\n    \"logInHereLink\": \"Logga in här\",\n    \"iAgreeButton\": \"Jag godkänner\",\n    \"iDoNotAgreeButton\": \"Jag godkänner ej\",\n    \"weHaveSentEmailTitle\": \"Nästan klar!\"\n};\n\nexport default svMessages;\n","\nconst enEdstepMessages = {\n    \"termsAndConditionsLink\": \"EdStep Terms and Conditions\",\n    \"termsAndConditionsPopupTitle\": \"EdStep Terms and Conditions\"\n};\n\nexport default enEdstepMessages;","\nconst nbEdstepMessages = {\n    \"termsAndConditionsLink\": \"vilkår og bestemmelser for EdStep\",\n    \"termsAndConditionsPopupTitle\": \"EdStep vilkår og bestemmelser\"\n};\n\nexport default nbEdstepMessages;","\nconst svEdstepMessages = {\n    \"termsAndConditionsLink\": \"EdSteps villkor\",\n    \"termsAndConditionsPopupTitle\": \"EdStep-villkor\"\n};\n\nexport default svEdstepMessages;","\nconst enLearnplaygroundMessages = {\n    \"termsAndConditionsLink\": \"Learn Playground Terms and Conditions\",\n    \"termsAndConditionsPopupTitle\": \"Learn Playground Terms and Conditions\"\n};\n\nexport default enLearnplaygroundMessages;","\nconst nbLearnplaygroundMessages = {\n    \"termsAndConditionsLink\": \"vilkår og bestemmelser for Learn Playground\",\n    \"termsAndConditionsPopupTitle\": \"Learn Playground vilkår og bestemmelser\"\n};\n\nexport default nbLearnplaygroundMessages;","\nconst svLearnplaygroundMessages = {\n    \"termsAndConditionsLink\": \"Learn Playgrounds villkor\",\n    \"termsAndConditionsPopupTitle\": \"Learn Playground-villkor\"\n};\n\nexport default svLearnplaygroundMessages;","\nconst enEdplanMessages = {\n    \"termsAndConditionsLink\": \"EdPlan Terms and Conditions\",\n    \"termsAndConditionsPopupTitle\": \"EdPlan Terms and Conditions\"\n};\n\nexport default enEdplanMessages;","\nconst nbEdplanMessages = {\n    \"termsAndConditionsLink\": \"vilkår og bestemmelser for EdPlan\",\n    \"termsAndConditionsPopupTitle\": \"EdPlan vilkår og bestemmelser\"\n};\n\nexport default nbEdplanMessages;","\nconst svEdplanMessages = {\n    \"termsAndConditionsLink\": \"EdPlans villkor\",\n    \"termsAndConditionsPopupTitle\": \"EdPlans-villkor\"\n};\n\nexport default svEdplanMessages;","import {addLocaleData} from 'react-intl';\nimport en from 'react-intl/locale-data/en';\nimport nb from 'react-intl/locale-data/nb';\nimport nn from 'react-intl/locale-data/nn';\nimport sv from 'react-intl/locale-data/sv';\n\nimport nbMessages from './lang/nb';\nimport svMessages from './lang/sv';\n\nimport enEdstepMessages from './lang/theme/edstep/en';\nimport nbEdstepMessages from './lang/theme/edstep/nb';\nimport svEdstepMessages from './lang/theme/edstep/sv';\n\nimport enLearnplaygroundMessages from './lang/theme/learnplayground/en';\nimport nbLearnplaygroundMessages from './lang/theme/learnplayground/nb';\nimport svLearnplaygroundMessages from './lang/theme/learnplayground/sv';\n\nimport enEdplanMessages from './lang/theme/edplan/en';\nimport nbEdplanMessages from './lang/theme/edplan/nb';\nimport svEdplanMessages from './lang/theme/edplan/sv';\n\naddLocaleData([...en, ...nb, ...nn, ...sv]);\n\nconst messages = {\n    \"nb\": nbMessages,\n    \"sv\": svMessages\n};\nconst themes = {\n    \"edstep\": {\n        \"en\": enEdstepMessages,\n        \"nb\": nbEdstepMessages,\n        \"sv\": svEdstepMessages\n    },\n    \"learnplayground\": {\n        \"en\": enLearnplaygroundMessages,\n        \"nb\": nbLearnplaygroundMessages,\n        \"sv\": svLearnplaygroundMessages\n    },\n    \"edplan\": {\n        \"en\": enEdplanMessages,\n        \"nb\": nbEdplanMessages,\n        \"sv\": svEdplanMessages\n    }\n};\n\nconst getMessages = function (lang, theme) {\n    let m = {};\n    if (messages.hasOwnProperty(lang)) {\n        m = messages[lang];\n    }\n    /*\n     * Let the theme override default messages\n     */\n    if (themes.hasOwnProperty(theme)) {\n        let t = themes[theme];\n        if (t.hasOwnProperty(lang)) {\n            t = t[lang];\n            for (let k in t) {\n                if (t.hasOwnProperty(k)) {\n                    m[k] = t[k];\n                }\n            }\n        }\n    }\n\n    return m;\n};\n\nexport default getMessages;\n","import React, { Component } from 'react';\nimport {Button} from 'react-bootstrap';\nimport {FormattedMessage} from 'react-intl';\n\nclass TermsAndConditions extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            \"termsAndConditions\": typeof(props.termsAndConditions) !== \"undefined\" ? props.termsAndConditions : \"\"\n        };\n\n        this.onAccept = typeof(props.onAccept) !== \"undefined\" ? props.onAccept : () => {};\n        this.onDecline = typeof(props.onDecline) !== \"undefined\" ? props.onDecline : () => {};\n\n        this.domKey = \"\"+Math.random();\n    }\n\n    insertTermsAndConditions() {\n        var element = document.getElementById(\"terms-and-conditions-text\" + this.domKey);\n        if (typeof(element) !== \"undefined\") {\n            element.innerHTML = this.state.termsAndConditions;\n        }\n    }\n\n    componentDidMount() {\n        this.insertTermsAndConditions();\n    }\n\n    componentDidUpdate() {\n        this.insertTermsAndConditions();\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"terms-and-conditions-text-and-title\">\n                    <h1>\n                        <FormattedMessage\n                            id=\"termsAndConditionsPopupTitle\"\n                            defaultMessage=\"Terms and Conditions\"\n                        />\n                    </h1>\n                    <div id={\"terms-and-conditions-text\" + this.domKey} className=\"terms-and-conditions-text-area\"></div>\n                </div>\n                <div className=\"terms-and-conditions-buttons\">\n                    <Button onClick={() => {this.onAccept();}} className=\"btn btn-success terms-and-conditions-buttons\">\n                        <FormattedMessage\n                            id=\"iAgreeButton\"\n                            defaultMessage=\"I Agree\"\n                        />\n                    </Button>\n                    <Button onClick={() => {this.onDecline();}} className=\"btn btn-danger terms-and-conditions-buttons\">\n                        <FormattedMessage\n                            id=\"iDoNotAgreeButton\"\n                            defaultMessage=\"I Do Not Agree\"\n                        />\n                    </Button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default TermsAndConditions;\n","\nimport querystring from 'querystring';\nimport axios from 'axios';\n\nconst messages = {\n    failedToAcceptTermsAndConditions: {\n        'id': 'failedToAcceptTermsAndConditions',\n        'defaultMessage': \"Failed to accept terms and conditions\"\n    },\n    errorCodeAcceptTermsAndConditions: {\n        'id': 'errorCodeAcceptTermsAndConditions',\n        'defaultMessage': \"Error response code {code} on accept terms and conditions. Please try again later.\"\n    },\n    failedToRunAuthorize: {\n        'id': 'failedToRunAuthorize',\n        'defaultMessage': \"Failed to run authorize request\"\n    },\n    errorCodeAuthorize: {\n        'id': 'errorCodeAuthorize',\n        'defaultMessage': \"Error response code {code} on authorize endpoint. Please try again later.\"\n    },\n    unexpectedAuthorizeResponse: {\n        'id': 'unexpectedAuthorizeResponse',\n        'defaultMessage': 'Unexpected response from authorize endpoint'\n    },\n    autoLinkAccountFailure: {\n        'id': 'autoLinkAccountFailure',\n        'defaultMessage': 'Auto link account failure'\n    },\n    strangeResponseAutoLinkAccount: {\n        'id': 'strangeResponseAutoLinkAccount',\n        'defaultMessage': 'Strange response from auto link account endpoint'\n    },\n    autoLinkDidNotIncludeIdentity: {\n        'id': 'autoLinkDidNotIncludeIdentity',\n        'defaultMessage': 'Auto link account did not include an identity id in the response'\n    },\n    finalStepInLoginFailed: {\n        'id': 'finalStepInLoginFailed',\n        'defaultMessage': 'Final step in login process failed'\n    },\n    finalStepInLoginFailedProduceJwt: {\n        'id': 'finalStepInLoginFailedProduceJwt',\n        'defaultMessage': 'Final login step did not produce a JWT'\n    },\n    termsAndConditionsStatusFailed: {\n        'id': 'termsAndConditionsStatusFailed',\n        'defaultMessage': \"Terms and conditions status request failed\"\n    }\n};\n\nclass LoginOperations {\n    constructor(props) {\n        this.intl = props.intl;\n        this.authorizationCodeCallback = typeof(props.authorizationCodeCallback) === 'function' ? props.authorizationCodeCallback : undefined;\n        this.authBaseUri = props.authBaseUri;\n        this.clientId = props.clientId;\n        this.codeAuthorizeUri = props.codeAuthorizeUri;\n        this.onEmailConflict = typeof(props.onEmailConflict) === 'function' ? props.onEmailConflict : function (payload, intermediateToken) {};\n        this.onTermsAndConditions = typeof(props.onTermsAndConditions) === 'function' ? props.onTermsAndConditions : function (jwt, termsAndConditions) {};\n    }\n\n    loggedIn(language, jwt) {\n        const {formatMessage} = this.intl;\n\n        var clientId = this.clientId;\n        axios.get(this.authBaseUri+\"/v1/login/termsandconditions/status?\"+querystring.stringify({\"clientId\": clientId, \"language\": language}), {\n                'headers' : {\n                    'Authorization': 'Bearer '+jwt\n                }\n            }\n        )\n            .then((response) => {\n                var tcStatus = response.data;\n                var accepted = typeof(tcStatus) !== \"undefined\" && typeof(tcStatus.accepted) !== \"undefined\" && tcStatus.accepted;\n                var termsAndConditions = typeof(tcStatus) !== \"undefined\" && typeof(tcStatus.termsAndConditions) !== \"undefined\" && tcStatus.termsAndConditions ? tcStatus.termsAndConditions : \"\";\n                if (accepted) {\n                    this.authorize(jwt);\n                } else {\n                    this.onTermsAndConditions(jwt, termsAndConditions);\n                    //this.setState({\n                    //    \"mode\": \"termsandconditions\",\n                    //    \"jwt\": jwt,\n                    //    \"termsAndConditions\": termsAndConditions\n                    //});\n                }\n            })\n            .catch((error) => {\n                alert(formatMessage(messages.termsAndConditionsStatusFailed));\n            });\n    }\n\n    loginWithIdentity(language, intermediateToken, identityId) {\n        const {formatMessage} = this.intl;\n\n        axios.post(\n            this.authBaseUri+'/v1/login/complete', querystring.stringify({}), {\n                'headers' : {\n                    'Authorization': 'Bearer '+intermediateToken\n                },\n                'xsrfCookieName': null,\n                'withCredentials': true\n            }\n        )\n            .then((response) => {\n                var loginResponse = response.data;\n                var jwt = loginResponse.jwt;\n                if (typeof(jwt) !== 'undefined' && jwt) {\n                    this.loggedIn(language, jwt);\n                } else {\n                    alert(formatMessage(messages.finalStepInLoginFailedProduceJwt));\n                }\n            })\n            .catch((error) => {\n                alert(formatMessage(messages.finalStepInLoginFailed));\n            });\n    }\n    autoConnectIdentity(language, intermediateToken) {\n        const {formatMessage} = this.intl;\n\n        axios.post(\n            this.authBaseUri+'/v1/login/idconnect/auto', querystring.stringify({}), {\n                'headers' : {\n                    'Authorization': 'Bearer '+intermediateToken\n                }\n            }\n        )\n            .then((response) => {\n                var accountData = response.data;\n                var identities = accountData.identities;\n                if (typeof(identities) !== 'undefined' && identities.length === 1) {\n                    var identity = identities[0];\n                    var identityId = identity.id;\n                    if (typeof(identityId) !== 'undefined' && identityId) {\n                        this.loginWithIdentity(language, intermediateToken, identityId);\n                    } else {\n                        alert(formatMessage(messages.autoLinkDidNotIncludeIdentity));\n                    }\n                } else {\n                    alert(formatMessage(messages.strangeResponseAutoLinkAccount));\n                }\n            })\n            .catch((error) => {\n                if (error.response && error.response.status === 409) {\n                    /* 409=conflict */\n                    const payload = error.response.data;\n                    if (payload && typeof(payload.length) !== \"undefined\" && payload.length > 0) {\n                        const item = payload[0];\n                        if (\n                            item &&\n                            typeof(item.credentialsId) !== \"undefined\" &&\n                            typeof(item.email) !== \"undefined\" &&\n                            item.type === \"email-conflict\" &&\n                            typeof(item.conflictingIdentity) !== \"undefined\" &&\n                            typeof(item.conflictingIdentity.id) !== \"undefined\"\n                        ) {\n                            this.onEmailConflict(payload, intermediateToken);\n                            //this.setState({\"idpEmailConflict\": payload, \"idpEmailToken\": intermediateToken});\n                            return;\n                        }\n                    }\n                }\n                alert(formatMessage(messages.autoLinkAccountFailure));\n            });\n    }\n\n    authorize(intermediateToken) {\n        const {formatMessage} = this.intl;\n\n        var codeAuthorizeUri = this.codeAuthorizeUri;\n        axios.get(\n            this.authBaseUri+codeAuthorizeUri, {\n                'headers': {\n                    'Authorization': 'Bearer ' + intermediateToken\n                }\n            }\n        )\n            .then((response) => {\n                var authorizeData = response.data;\n                if (typeof(authorizeData) !== 'undefined' && typeof(authorizeData.type) !== 'undefined' && authorizeData.type === 'redirect' && typeof(authorizeData.redirect) !== 'undefined') {\n                    this.authorizationRedirect(authorizeData.redirect);\n                } else {\n                    alert(formatMessage(messages.unexpectedAuthorizeResponse));\n                }\n            })\n            .catch((error) => {\n                var response = error.response;\n                if (typeof(response) !== 'undefined') {\n                    alert(formatMessage(messages.errorCodeAuthorize, {'code': response.status}));\n                } else {\n                    alert(formatMessage(messages.failedToRunAuthorize));\n                }\n            })\n    }\n\n    authorizationRedirect(redirect) {\n        if (typeof(this.authorizationCodeCallback) === 'function') {\n            const queryPos = redirect.indexOf('?');\n            let params = {};\n            if (queryPos >= 0) {\n                const query = redirect.substring(queryPos + 1);\n                const pairs = query.split('&')\n                    .map(function (pair) {\n                        const eqPos = pair.indexOf('=');\n                        if (eqPos >= 0) {\n                            return [pair.substring(0, eqPos), pair.substring(eqPos + 1)];\n                        } else {\n                            return [pair, ''];\n                        }\n                    })\n                    .map(function (pair) {\n                        return pair.map(decodeURIComponent);\n                    });\n                pairs.forEach((pair) => {\n                    params[pair[0]] = pair[1];\n                });\n            }\n            if (typeof(params.code) !== 'undefined' && params.code) {\n                this.authorizationCodeCallback(params.code);\n                return;\n            }\n\n        }\n        window.location.href = redirect;\n    }\n\n    acceptTermsAndConditions(jwt) {\n        const {formatMessage} = this.intl;\n\n        var clientId = this.clientId;\n        axios.post(this.authBaseUri+\"/v1/login/termsandconditions/accept\", querystring.stringify({\n            \"clientId\": clientId,\n            \"accepted\": true\n        }), {\n            'headers' : {\n                'Authorization': 'Bearer '+jwt\n            }\n        })\n            .then((response) => {\n                this.authorize(jwt);\n            })\n            .catch((error) => {\n                var response = error.response;\n                if (typeof(response) !== 'undefined') {\n                    alert(formatMessage(messages.errorCodeAcceptTermsAndConditions, {'code': response.status}));\n                } else {\n                    alert(formatMessage(messages.failedToAcceptTermsAndConditions));\n                }\n            });\n    }\n}\n\nexport default LoginOperations;\n","module.exports = __webpack_public_path__ + \"static/media/emblemhvit-01.cb1f3ee1.png\";","import React, { Component } from 'react';\n\nimport {FormattedMessage, intlShape, injectIntl, defineMessages} from 'react-intl';\n\nconst messages = defineMessages({\n    loginButton: {\n        'id': 'loginButton',\n        'defaultMessage': 'Log in'\n    },\n    usernamePlaceholder: {\n        'id': 'usernamePlaceholder',\n        'defaultMessage': '(Username or email)'\n    },\n    passwordPlaceholder: {\n        'id': 'passwordPlaceholder',\n        'defaultMessage': '(Password)'\n    }\n});\n\nclass UserPasswordLogin extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            \"loginError\": typeof(props.loginError) !== \"undefined\" ? props.loginError : false\n        };\n\n        this.onLogin = typeof(props.onLogin) !== 'undefined' ? props.onLogin : (username, password) => {};\n        this.onForgotPassword = typeof(props.onForgotPassword) !== 'undefined' ? props.onForgotPassword : () => {};\n        this.onSignup = typeof(props.onSignup) !== 'undefined' ? props.onSignup : null;\n\n        this.username = typeof(props.username) !== \"undefined\" ? props.username : \"\";\n        this.password = typeof(props.password) !== \"undefined\" ? props.password : \"\";\n\n        this.usernameFieldDisabled = typeof(this.props.usernameFieldDisabled) !== 'undefined' ? this.props.usernameFieldDisabled : false;\n\n        this.domKey = \"\"+Math.random();\n    }\n\n    clickLogIn(event) {\n        var username = document.getElementById('username' + this.domKey).value;\n        var password = document.getElementById('password' + this.domKey).value;\n        event.preventDefault();\n        this.onLogin(username, password);\n        return false;\n    }\n\n    clickForgotPassword(event) {\n        event.preventDefault();\n        this.onForgotPassword();\n        return false;\n    }\n\n    clickSignup(event) {\n        event.preventDefault();\n        this.onSignup();\n        return false;\n    }\n\n    componentDidMount() {\n        document.getElementById('username' + this.domKey).value = this.username;\n        document.getElementById('password' + this.domKey).value = this.password;\n    }\n\n    render() {\n        const {formatMessage} = this.props.intl;\n\n        return (\n            <form onSubmit={(event) => { return this.clickLogIn(event); }} method=\"POST\">\n                {\n                    (() => {\n                        if (this.state.loginError) {\n                            return (\n                                <div className=\"error col-sm-12 alert alert-danger\">\n                                    <FormattedMessage id=\"loginFailedError\" defaultMessage=\"Login failed! Please check your username and password.\" />\n                                </div>\n                            );\n                        } else {\n                            return (\n                                <span></span>\n                            );\n                        }\n                    })()\n                }\n                <input key=\"username-can-change\" className=\"col-sm-12\" placeholder={formatMessage(messages.usernamePlaceholder)} type=\"text\" id={\"username\" + this.domKey} name=\"username\" disabled={ this.usernameFieldDisabled ? 'disabled' : undefined} />\n                <input key=\"password-can-change\" className=\"col-sm-12\" placeholder={formatMessage(messages.passwordPlaceholder)} type=\"password\" id={\"password\" + this.domKey} name=\"password\" />\n                <input className=\"col-sm-12\" onClick={(event) => { return this.clickLogIn(event); }} type=\"submit\" value={formatMessage(messages.loginButton)} />\n\n                <p className=\"formlinks\">\n                    <a onClick={(event) => { return this.clickForgotPassword(event); }} href=\"#\" className=\"float-left\">\n                        <FormattedMessage\n                            id=\"forgotPasswordLink\"\n                            defaultMessage=\"Forgot password?\"\n                        />\n                    </a>\n                    {(() => {\n                        if (this.onSignup !== null) {\n                            return (\n                                <a onClick={(event) => { return this.clickSignup(event); }} href=\"#\" className=\"float-right\">\n                                    <FormattedMessage\n                                        id=\"createNewAccountLink\"\n                                        defaultMessage=\"Create new account\"\n                                    />\n                                </a>\n                            );\n                        } else {\n                            return null;\n                        }\n                    })()}\n                </p>\n            </form>\n        );\n    }\n}\n\nUserPasswordLogin.propTypes = {\n    intl: intlShape.isRequired,\n};\n\nexport default injectIntl(UserPasswordLogin);\n","import React, { Component } from 'react';\nimport {Modal, ModalBody, ModalFooter, ModalHeader, ModalTitle, Button} from 'react-bootstrap';\nimport {FormattedMessage, intlShape, injectIntl, defineMessages} from 'react-intl';\nimport Loader from 'react-loader-spinner';\n\nconst messages = defineMessages({\n    acceptTermsAndConditionsError: {\n        'id': 'acceptTermsAndConditionsError',\n        'defaultMessage': 'You need to accept the Terms and Conditions.'\n    },\n    emailRequiredError:{\n        'id': 'emailRequiredError',\n        'defaultMessage': 'Email address is required.'\n    },\n    passwordRequiredError:{\n        'id': 'passwordRequiredError',\n        'defaultMessage': 'Password is required.'\n    },\n    passwordsDoNotMatchError:{\n        'id': 'passwordsDoNotMatchError',\n        'defaultMessage': 'Passwords do not match.'\n    },\n    signupEmailFieldPlaceholder: {\n        'id': 'signupEmailFieldPlaceholder',\n        'defaultMessage': '(E-Mail)'\n    },\n    signupPasswordFieldPlaceholder: {\n        'id': 'signupPasswordFieldPlaceholder',\n        'defaultMessage': '(Choose a password)'\n    },\n    signupRepeatPasswordFieldPlaceholder: {\n        'id': 'signupRepeatPasswordFieldPlaceholder',\n        'defaultMessage': '(Repeat password)'\n    },\n    signupButton: {\n        'id': 'signupButton',\n        'defaultMessage': 'Sign up'\n    }\n});\n\nclass SignupForm extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            \"showTermsAndConditions\": false,\n            \"termsAndConditions\": typeof(props.termsAndConditions) !== \"undefined\" ? props.termsAndConditions : false,\n            \"errors\": typeof(props.errors) !== \"undefined\" ? props.errors : {},\n            \"spinner\": this.props.autoSubmit && (typeof(props.errors) === \"undefined\" || !props.errors)\n        };\n\n        this.onLogin = typeof(props.onLogin) !== \"undefined\" ? props.onLogin : () => {};\n        this.onSignup = typeof(props.onSignup) !== \"undefined\" ? props.onSignup : (email, password, termsAndConditionsAccepted) => {};\n        this.onTermsAndConditionsRequired = typeof(props.onTermsAndConditionsRequired) !== 'undefined' ? props.onTermsAndConditionsRequired : (termsAndConditions, callback) => { callback(false); };\n\n        this.domKey = \"\"+Math.random();\n\n        this.prefillDone = false;\n        this.autoSubmitDone = false;\n        this.fields = typeof(props.fields) !== \"undefined\" ? props.fields : {};\n    }\n\n    clickSignup(event) {\n        const {formatMessage} = this.props.intl;\n\n        if (event !== null) {\n            event.preventDefault();\n        }\n        this.setState({\"spinner\": true});\n        const email = document.getElementById(\"email\" + this.domKey).value;\n        const password = !this.props.withoutPassword ? document.getElementById(\"password\" + this.domKey).value : null;\n        let termsAndConditions = false;\n        if (this.state.termsAndConditions !== false) {\n            termsAndConditions = document.getElementById(\"termsAndConditions\" + this.domKey).checked;\n        }\n\n        if (!(() => {\n            let ok = true;\n            let errors = {};\n            if (!email) {\n                errors.email = formatMessage(messages.emailRequiredError);\n                ok = false;\n            }\n            if (!this.props.withoutPassword) {\n                if (!password) {\n                    errors.password = formatMessage(messages.passwordRequiredError);\n                    ok = false;\n                } else {\n                    const repeatPassword = document.getElementById(\"repeatpassword\" + this.domKey).value;\n                    if (password !== repeatPassword) {\n                        errors.password = formatMessage(messages.passwordsDoNotMatchError);\n                        ok = false;\n                    }\n                }\n            }\n            if (this.state.termsAndConditions !== false) {\n                if (!termsAndConditions) {\n                    /*\n                     * Auto submit, and T&C is the only thing missing:\n                     */\n                    if (ok && this.props.autoSubmit && event === null) {\n                        this.setState({\"spinner\": true});\n                        this.onTermsAndConditionsRequired(this.state.termsAndConditions, (accepted) => {\n                            if (accepted) {\n                                this.onSignup(email, password, true);\n                                this.setState({\"spinner\": false});\n                            } else {\n                                this.setState({\"spinner\": false});\n                            }\n                        });\n                    }\n                    errors.termsAndConditions = formatMessage(messages.acceptTermsAndConditionsError);\n                    ok = false;\n                }\n            }\n            if (!ok) {\n                this.setState({\n                    'errors': errors\n                });\n            }\n            return ok;\n        })()) {\n            this.setState({\"spinner\": false});\n            return;\n        }\n\n        this.onSignup(email, password, termsAndConditions);\n        this.setState({\"spinner\": false});\n    }\n\n    clickLogin(event) {\n        event.preventDefault();\n        this.onLogin();\n    }\n\n    setPasswordFieldType(type) {\n        var fields = document.getElementsByClassName(\"password-field\");\n        for (var i = 0; fields.length; i++) {\n            fields.item(i).type = type;\n        }\n    }\n    showPasswords() {\n        this.setPasswordFieldType('text');\n    }\n    hidePasswords() {\n        this.setPasswordFieldType('password');\n    }\n\n    showTermsAndConditions(event) {\n        event.preventDefault();\n        this.setState({\"showTermsAndConditions\": true});\n    }\n\n    termsAndConditionsInnerHtml() {\n        var element = document.getElementById(\"terms-and-conditions-text\" + this.domKey);\n        if (typeof(element) !== \"undefined\" && element) {\n            element.innerHTML = this.state.termsAndConditions;\n        }\n    }\n\n    static isEmptyObject(object) {\n        if (typeof(Array.isArray) !== 'undefined' && Array.isArray(object) && object.length === 0) {\n            return true;\n        }\n        for (var prop in object) {\n            if (object.hasOwnProperty(prop)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    prefill() {\n        const emailField = document.getElementById(\"email\" + this.domKey);\n        if (!this.prefillDone && typeof(emailField) !== 'undefined' && emailField) {\n            this.prefillDone = true;\n            if (typeof(this.fields.email) !== \"undefined\") {\n                emailField.value = this.fields.email;\n            }\n            const passwordField = document.getElementById(\"password\" + this.domKey);\n            if (typeof(this.fields.password) !== \"undefined\" && typeof(passwordField) !== 'undefined' && passwordField) {\n                passwordField.value = this.fields.password;\n                document.getElementById(\"repeatpassword\" + this.domKey).value = this.fields.password;\n            }\n        }\n    }\n\n    componentDidMount() {\n        this.prefill();\n        this.termsAndConditionsInnerHtml();\n\n        if (this.props.autoSubmit && (typeof(this.props.errors) === \"undefined\" || SignupForm.isEmptyObject(this.props.errors)) && !this.autoSubmitDone) {\n            this.autoSubmitDone = true;\n            this.clickSignup(null);\n        }\n    }\n\n    componentDidUpdate() {\n        this.prefill();\n        this.termsAndConditionsInnerHtml();\n    }\n\n    getAppRoot() {\n       var candidates = document.getElementsByClassName('reactive-auth-login');\n       if (candidates.length > 0) {\n           return candidates.item(0);\n       } else {\n           return document.body;\n       }\n    }\n\n    renderPasswordFields() {\n        const {formatMessage} = this.props.intl;\n\n        return (\n            <div>\n                <input className=\"col-sm-5 password-field\" type=\"password\" id={\"password\" + this.domKey} placeholder={formatMessage(messages.signupPasswordFieldPlaceholder)} name=\"password\" />\n                <input className=\"col-sm-5 password-field\" type=\"password\" id={\"repeatpassword\" + this.domKey} placeholder={formatMessage(messages.signupRepeatPasswordFieldPlaceholder)} name=\"repeatpassword\" />\n                <div className=\"col-sm-2 eyeholder\" onMouseDown={() => {this.showPasswords();}} onMouseUp={() => {this.hidePasswords();}} onMouseOut={() => {this.hidePasswords();}}></div>\n\n                <p className=\"terms\">\n                    <FormattedMessage\n                        id=\"signupPasswordRequirements\"\n                        defaultMessage=\"*Passwords must be minimum 6 characters long.\"\n                    />\n                </p>\n            </div>\n        );\n    }\n\n    render() {\n        const {formatMessage} = this.props.intl;\n\n        if (this.state.spinner) {\n            return (\n                <Loader\n                    type=\"ThreeDots\"\n                    color=\"#00BFFF\"\n                    height=\"200\"\n                    width=\"200\"\n                />\n            );\n        }\n        const formElementsStyle = {'display': this.props.visible ? 'block' : 'none'};\n        return (\n            <form method=\"post\" onSubmit={(event) => { this.clickSignup(event); }}>\n                <div style={formElementsStyle}>\n                    {\n                        (() => {\n                            if (typeof(this.state.errors) !== \"undefined\" && typeof(this.state.errors.email) !== \"undefined\") {\n                                return (\n                                    <div className=\"error col-sm-12 alert alert-danger\">{this.state.errors.email}</div>\n                                );\n                            } else {\n                                return ( <span></span> );\n                            }\n                        })()\n                    }\n\n                    <input className=\"col-sm-12\" type=\"text\" id={\"email\" + this.domKey} placeholder={formatMessage(messages.signupEmailFieldPlaceholder)} name=\"email\" />\n\n                    {\n                        (() => {\n                            if (typeof(this.state.errors) !== \"undefined\" && typeof(this.state.errors.password) !== \"undefined\") {\n                                return (\n                                    <div className=\"error col-sm-12 alert alert-danger\">{this.state.errors.password}</div>\n                                );\n                            } else {\n                                return ( <span></span> );\n                            }\n                        })()\n                    }\n\n                    {\n                        (() => {\n                            if (!this.props.withoutPassword) {\n                                return this.renderPasswordFields();\n                            } else {\n                                return ( <span></span> );\n                            }\n                        })()\n                    }\n                    {\n                        (() => {\n                            if (this.state.termsAndConditions !== false) {\n                                return (\n                                    <div className=\"terms\">\n                                        {\n                                            (() => {\n                                                if (typeof(this.state.errors) !== \"undefined\" && typeof(this.state.errors.termsAndConditions) !== \"undefined\") {\n                                                    return (\n                                                        <div\n                                                            className=\"error col-sm-12 alert alert-danger\">{this.state.errors.termsAndConditions}</div>\n                                                    );\n                                                } else {\n                                                    return (<span></span>);\n                                                }\n                                            })()\n                                        }\n\n                                        <div className=\"terms-field\">\n                                            <label className=\"terms\">\n                                                <input type=\"checkbox\" id={\"termsAndConditions\" + this.domKey} name=\"termsAndConditions\"\n                                                                                value=\"true\"/>\n                                                <FormattedMessage\n                                                    id=\"signupTermsAndConditionsLabel\"\n                                                    defaultMessage={'I agree to the {termsAndConditions}'}\n                                                    values={{\n                                                        \"termsAndConditions\": <a onClick={(event) => { this.showTermsAndConditions(event); }}\n                                                                                 id=\"terms-and-conditions-link\"\n                                                                                 href=\"/termsofservice\"\n                                                                                 target=\"_blank\">\n                                                            <FormattedMessage id=\"termsAndConditionsLink\" defaultMessage=\"Terms and Conditions\"/>\n                                                        </a>\n                                                    }}\n                                                />\n                                            </label>\n                                        </div>\n\n                                        <Modal show={this.state.showTermsAndConditions} onShow={() => { this.termsAndConditionsInnerHtml(); }} container={this.getAppRoot()}>\n                                            <ModalTitle>\n                                                <h2 className=\"terms-and-conditions-title\">\n                                                    <FormattedMessage id=\"termsAndConditionsPopupTitle\" defaultMessage=\"Terms and Conditions\"/>\n                                                </h2>\n                                            </ModalTitle>\n                                            <ModalBody>\n                                                <div id={\"terms-and-conditions-text\" + this.domKey} className=\"terms-and-conditions-text\"></div>\n                                            </ModalBody>\n                                            <ModalFooter>\n                                                <Button onClick={(event) => { this.setState({\"showTermsAndConditions\": false}); }} className=\"bt btn-success\">\n                                                    <FormattedMessage id=\"closeButton\" defaultMessage=\"Close\" />\n                                                </Button>\n                                            </ModalFooter>\n                                        </Modal>\n                                    </div>\n                                );\n                            } else {\n                                return ( <span></span> );\n                            }\n                        })()\n                    }\n\n                    <div>\n                        <input type=\"submit\" value={formatMessage(messages.signupButton)}/>\n                    </div>\n                </div>\n\n                <p className=\"center-text\" style={formElementsStyle}>\n                    <FormattedMessage\n                        id=\"alreadyHaveAnAccount\"\n                        defaultMessage={'Already have an account? {logInHereLink}'}\n                        values={{\n                            \"logInHereLink\": <a onClick={(event) => {this.clickLogin(event);}} href=\"/login\">\n                                <FormattedMessage id=\"logInHereLink\" defaultMessage=\"Log in here\" />\n                            </a>\n                        }}\n                    />\n                </p>\n\n            </form>\n        );\n    }\n}\n\nSignupForm.propTypes = {\n    intl: intlShape.isRequired,\n};\n\nexport default injectIntl(SignupForm);\n","import React, { Component } from 'react';\nimport {Modal, ModalBody, ModalFooter, ModalHeader, ModalTitle, Button} from 'react-bootstrap';\nimport {FormattedMessage, intlShape, injectIntl, defineMessages} from 'react-intl';\nimport Loader from 'react-loader-spinner';\n\nconst messages = defineMessages({\n    acceptTermsAndConditionsError: {\n        'id': 'acceptTermsAndConditionsError',\n        'defaultMessage': 'You need to accept the Terms and Conditions.'\n    },\n    passwordRequiredError:{\n        'id': 'passwordRequiredError',\n        'defaultMessage': 'Password is required.'\n    },\n    passwordsDoNotMatchError:{\n        'id': 'passwordsDoNotMatchError',\n        'defaultMessage': 'Passwords do not match.'\n    },\n    signupPasswordFieldPlaceholder: {\n        'id': 'signupPasswordFieldPlaceholder',\n        'defaultMessage': '(Choose a password)'\n    },\n    signupRepeatPasswordFieldPlaceholder: {\n        'id': 'signupRepeatPasswordFieldPlaceholder',\n        'defaultMessage': '(Repeat password)'\n    },\n    signupButton: {\n        'id': 'signupButton',\n        'defaultMessage': 'Sign up'\n    }\n});\n\nclass SignupVerifiedEmailForm extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            \"showTermsAndConditions\": false,\n            \"termsAndConditions\": typeof(props.termsAndConditions) !== \"undefined\" ? props.termsAndConditions : false,\n            \"errors\": typeof(props.errors) !== \"undefined\" ? props.errors : {},\n            \"spinner\": this.props.autoSubmit && (typeof(props.errors) === \"undefined\" || !props.errors)\n        };\n\n        this.onLogin = typeof(props.onLogin) !== \"undefined\" ? props.onLogin : () => {};\n        this.onSignup = typeof(props.onSignup) !== \"undefined\" ? props.onSignup : (password, termsAndConditionsAccepted) => {};\n        this.onTermsAndConditionsRequired = typeof(props.onTermsAndConditionsRequired) !== 'undefined' ? props.onTermsAndConditionsRequired : (termsAndConditions, callback) => { callback(false); };\n\n        this.domKey = \"\"+Math.random();\n\n        this.prefillDone = false;\n        this.fields = typeof(props.fields) !== \"undefined\" ? props.fields : {};\n    }\n\n    clickSignup(event) {\n        const {formatMessage} = this.props.intl;\n\n        if (event !== null) {\n            event.preventDefault();\n        }\n        const password = !this.props.withoutPassword ? document.getElementById(\"password\" + this.domKey).value : null;\n        let termsAndConditions = false;\n        if (this.state.termsAndConditions !== false) {\n            termsAndConditions = document.getElementById(\"termsAndConditions\" + this.domKey).checked;\n        }\n\n        if (!(() => {\n            let ok = true;\n            let errors = {};\n            if (!this.props.withoutPassword) {\n                if (!password) {\n                    errors.password = formatMessage(messages.passwordRequiredError);\n                    ok = false;\n                } else {\n                    const repeatPassword = document.getElementById(\"repeatpassword\" + this.domKey).value;\n                    if (password !== repeatPassword) {\n                        errors.password = formatMessage(messages.passwordsDoNotMatchError);\n                        ok = false;\n                    }\n                }\n            }\n            if (this.state.termsAndConditions !== false) {\n                if (!termsAndConditions) {\n                    /*\n                     * Auto submit, and T&C is the only thing missing:\n                     */\n                    if (ok && this.props.autoSubmit && event === null) {\n                        this.setState({\"spinner\": true});\n                        this.onTermsAndConditionsRequired(this.state.termsAndConditions, (accepted) => {\n                            if (accepted) {\n                                this.onSignup(password, true);\n                                this.setState({\"spinner\": false});\n                            } else {\n                                this.setState({\"spinner\": false});\n                            }\n                        });\n                    }\n                    errors.termsAndConditions = formatMessage(messages.acceptTermsAndConditionsError);\n                    ok = false;\n                }\n            }\n            if (!ok) {\n                this.setState({\n                    'errors': errors\n                });\n            }\n            return ok;\n        })()) {\n            this.setState({\"spinner\": false});\n            return;\n        }\n\n        this.onSignup(password, termsAndConditions);\n        this.setState({\"spinner\": false});\n    }\n\n    clickLogin(event) {\n        event.preventDefault();\n        this.onLogin();\n    }\n\n    setPasswordFieldType(type) {\n        var fields = document.getElementsByClassName(\"password-field\");\n        for (var i = 0; fields.length; i++) {\n            fields.item(i).type = type;\n        }\n    }\n    showPasswords() {\n        this.setPasswordFieldType('text');\n    }\n    hidePasswords() {\n        this.setPasswordFieldType('password');\n    }\n\n    showTermsAndConditions(event) {\n        event.preventDefault();\n        this.setState({\"showTermsAndConditions\": true});\n    }\n\n    static isEmptyObject(object) {\n        if (typeof(Array.isArray) !== 'undefined' && Array.isArray(object) && object.length === 0) {\n            return true;\n        }\n        for (var prop in object) {\n            if (object.hasOwnProperty(prop)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    prefill() {\n        const passwordField = document.getElementById(\"password\" + this.domKey);\n        if (!this.prefillDone && typeof(passwordField) !== 'undefined' && passwordField) {\n            this.prefillDone = true;\n            if (typeof(this.fields.password) !== \"undefined\") {\n                passwordField.value = this.fields.password;\n                document.getElementById(\"repeatpassword\" + this.domKey).value = this.fields.password;\n            }\n        }\n    }\n\n    termsAndConditionsInnerHtml() {\n        var element = document.getElementById(\"terms-and-conditions-text\" + this.domKey);\n        if (typeof(element) !== \"undefined\" && element) {\n            element.innerHTML = this.state.termsAndConditions;\n        }\n    }\n\n    componentDidMount() {\n        this.prefill();\n        this.termsAndConditionsInnerHtml();\n\n        if (this.props.autoSubmit && (typeof(this.props.errors) === \"undefined\" || SignupVerifiedEmailForm.isEmptyObject(this.props.errors)) && !this.autoSubmitDone) {\n            this.autoSubmitDone = true;\n            this.clickSignup(null);\n        }\n    }\n\n    componentDidUpdate() {\n        this.prefill();\n        this.termsAndConditionsInnerHtml();\n    }\n\n    renderPasswordFields() {\n        const {formatMessage} = this.props.intl;\n\n        return (\n            <div>\n                <input className=\"col-sm-5 password-field\" type=\"password\" id={\"password\" + this.domKey} placeholder={formatMessage(messages.signupPasswordFieldPlaceholder)} name=\"password\" />\n                <input className=\"col-sm-5 password-field\" type=\"password\" id={\"repeatpassword\" + this.domKey} placeholder={formatMessage(messages.signupRepeatPasswordFieldPlaceholder)} name=\"repeatpassword\" />\n                <div className=\"col-sm-2 eyeholder\" onMouseDown={() => {this.showPasswords();}} onMouseUp={() => {this.hidePasswords();}} onMouseOut={() => {this.hidePasswords();}}></div>\n\n                <p className=\"terms\">\n                    <FormattedMessage\n                        id=\"signupPasswordRequirements\"\n                        defaultMessage=\"*Passwords must be minimum 6 characters long.\"\n                    />\n                </p>\n            </div>\n        );\n    }\n\n    render() {\n        const {formatMessage} = this.props.intl;\n\n        if (this.state.spinner) {\n            return (\n                <Loader\n                    type=\"ThreeDots\"\n                    color=\"#00BFFF\"\n                    height=\"200\"\n                    width=\"200\"\n                />\n            );\n        }\n        const signupElementsStyle = {'display': this.props.visible ? 'block' : 'none'};\n        return (\n            <form method=\"post\" onSubmit={(event) => { this.clickSignup(event); }}>\n                <div style={signupElementsStyle}>\n                    <input className=\"col-sm-12\" type=\"text\" name=\"email\" value={this.props.email} disabled=\"disabled\" />\n\n                    {\n                        (() => {\n                            if (typeof(this.state.errors) !== \"undefined\" && typeof(this.state.errors.password) !== \"undefined\") {\n                                return (\n                                    <div className=\"error col-sm-12 alert alert-danger\">{this.state.errors.password}</div>\n                                );\n                            } else {\n                                return ( <span></span> );\n                            }\n                        })()\n                    }\n\n                    {\n                        (() => {\n                            if (!this.props.withoutPassword) {\n                                return this.renderPasswordFields();\n                            } else {\n                                return ( <span></span> );\n                            }\n                        })()\n                    }\n                    {\n                        (() => {\n                            if (this.state.termsAndConditions !== false) {\n                                return (\n                                    <div>\n                                        {\n                                            (() => {\n                                                if (typeof(this.state.errors) !== \"undefined\" && typeof(this.state.errors.termsAndConditions) !== \"undefined\") {\n                                                    return (\n                                                        <div\n                                                            className=\"error col-sm-12 alert alert-danger\">{this.state.errors.termsAndConditions}</div>\n                                                    );\n                                                } else {\n                                                    return (<span></span>);\n                                                }\n                                            })()\n                                        }\n\n                                        <p class=\"center-text terms\">\n                                            <input type=\"checkbox\" id={\"termsAndConditions\" + this.domKey} name=\"termsAndConditions\"\n                                                                            value=\"true\"/>\n                                            <FormattedMessage\n                                                id=\"signupTermsAndConditionsLabel\"\n                                                defaultMessage={'I agree to the {termsAndConditions}'}\n                                                values={{\n                                                    \"termsAndConditions\": <a onClick={(event) => { this.showTermsAndConditions(event); }}\n                                                                             id=\"terms-and-conditions-link\"\n                                                                             href=\"/termsofservice\"\n                                                                             target=\"_blank\">\n                                                        <FormattedMessage id=\"termsAndConditionsLink\" defaultMessage=\"Terms and Conditions\"/>\n                                                    </a>\n                                                }}\n                                            />\n                                        </p>\n\n                                        <Modal show={this.state.showTermsAndConditions} onShow={() => { this.termsAndConditionsInnerHtml(); }}>\n                                            <ModalTitle>\n                                                <h2 className=\"terms-and-conditions-title\">\n                                                    <FormattedMessage id=\"termsAndConditionsPopupTitle\" defaultMessage=\"Terms and Conditions\"/>\n                                                </h2>\n                                            </ModalTitle>\n                                            <ModalBody>\n                                                <div id={\"terms-and-conditions-text\" + this.domKey} className=\"terms-and-conditions-text\"></div>\n                                            </ModalBody>\n                                            <ModalFooter>\n                                                <Button onClick={(event) => { this.setState({\"showTermsAndConditions\": false}); }} className=\"bt btn-success\">\n                                                    <FormattedMessage id=\"closeButton\" defaultMessage=\"Close\" />\n                                                </Button>\n                                            </ModalFooter>\n                                        </Modal>\n                                    </div>\n                                );\n                            } else {\n                                return ( <span></span> );\n                            }\n                        })()\n                    }\n\n                    <div>\n                        <input type=\"submit\" value={formatMessage(messages.signupButton)}/>\n                    </div>\n                </div>\n\n                <p className=\"center-text\" style={signupElementsStyle}>\n                    <FormattedMessage\n                        id=\"alreadyHaveAnAccount\"\n                        defaultMessage={'Already have an account? {logInHereLink}'}\n                        values={{\n                            \"logInHereLink\": <a onClick={(event) => {this.clickLogin(event);}} href=\"/login\">\n                                <FormattedMessage id=\"logInHereLink\" defaultMessage=\"Log in here\" />\n                            </a>\n                        }}\n                    />\n                </p>\n\n            </form>\n        );\n    }\n}\n\nSignupVerifiedEmailForm.propTypes = {\n    intl: intlShape.isRequired,\n};\n\nexport default injectIntl(SignupVerifiedEmailForm);\n","import React, { Component } from 'react';\nimport {injectIntl, intlShape} from \"react-intl\";\n\nclass EnterpriseLogins extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    close() {\n        if (typeof(this.props.onClose) === 'function') {\n            this.props.onClose();\n        }\n    }\n\n    openLogin(login) {\n        const width = 800;\n        const height = 600;\n        return window.open(\n            login.uri,\n\n            \"targetWindow\",\n\n            \"toolbar=no, \" +\n            \"location=no, \" +\n            \"status=no, \" +\n            \"menubar=no, \" +\n            \"scrollbars=yes, \" +\n            \"resizable=yes, \" +\n            \"width=\"+width+\", \" +\n            \"height=\"+height\n        );\n    }\n\n    renderLogins() {\n        return this.props.enterpriseLogins\n            .map((login) => {\n                return (\n                    <li>\n                        <a href={\"#\"} onClick={(event) => { event.preventDefault(); this.openLogin(login) }}>\n                            <h2>{login.name}</h2>\n                            <p>Log in to {login.name}</p>\n                        </a>\n                    </li>\n                )\n            })\n    }\n\n    render() {\n        return (\n            <div>\n                <h1>Login to company account</h1>\n                <p><a href={\"\"} onClick={() => { this.close() }}>Close</a></p>\n                <ul>\n                    {(() => { return this.renderLogins() })()}\n                </ul>\n            </div>\n        );\n    }\n}\n\nEnterpriseLogins.propTypes = {\n    intl: intlShape.isRequired,\n};\n\nconst EnterpriseLoginsClass = EnterpriseLogins;\n\nexport {EnterpriseLoginsClass};\nexport default injectIntl(EnterpriseLogins);\n","import React, { Component } from 'react';\nimport querystring from 'querystring';\nimport axios from 'axios';\nimport sha1 from 'sha1';\nimport './css/style.css';\nimport './css/icons.css';\nimport './css/login.css';\nimport 'bootstrap/dist/css/bootstrap-bundle.css';\nimport {FormattedMessage, intlShape, injectIntl, defineMessages} from 'react-intl';\nimport Loader from 'react-loader-spinner';\n\nimport feideLogo from './images/feide/emblemhvit-01.png';\n\nimport UserPasswordLogin from './UserPasswordLogin';\nimport SignupForm from \"./SignupForm\";\nimport SignupVerifiedEmailForm from \"./SignupVerifiedEmailForm\";\nimport TermsAndConditions from \"./TermsAndConditions\";\nimport LoginOperations from './LoginOperations';\nimport {Button} from \"react-bootstrap\";\nimport EnterpriseLogins from \"./EnterpriseLogins\";\n\nconst messages = defineMessages({\n    continueButton: {\n        \"id\": \"continueButton\",\n        \"defaultMessage\": \"Continue\"\n    },\n    emailInUseError: {\n        \"id\": \"emailInUseError\",\n        \"defaultMessage\": \"The email address is associated with an existing account. Please use forgot password, or sign up with a different address.\"\n    },\n    invalidEmailValidationError: {\n        \"id\": \"invalidEmailValidationError\",\n        \"defaultMessage\": \"The supplied email address is invalid.\"\n    },\n    sameEmailSuppliedValidationError: {\n        \"id\": \"sameEmailSuppliedValidationError\",\n        \"defaultMessage\": \"Type in another email address or choose to use the existing account (above).\"\n    },\n    usernameTakenError: {\n        'id': 'usernameTakenError',\n        'defaultMessage': 'The username is taken. Please try something else.'\n    },\n    newUsernameRequiredError: {\n        'id': 'newUsernameRequiredError',\n        'defaultMessage': 'New username required.'\n    },\n    changeUsernameFailed: {\n        'id': 'changeUsernameFailed',\n        'defaultMessage': 'Change username failed'\n    },\n    ackChangeUsernameFailed: {\n        'id': 'ackChangeUsernameFailed',\n        'defaultMessage': 'Acknowledge change username failed'\n    },\n    forgotPasswordFailed: {\n        'id': 'forgotPasswordFailed',\n        'defaultMessage': 'Forgot password failed'\n    },\n    loginFailedWithErrorCode: {\n        'id': 'loginFailedWithErrorCode',\n        'defaultMessage': 'Login failed with error code {code}'\n    },\n    strangeResponseFromEndpoint: {\n        'id': 'strangeResponseFromEndpoint',\n        'defaultMessage': 'Strange response from {endpointName}'\n    },\n    didNotReceiveIdentityResponseFromEndpoint: {\n        'id': 'didNotReceiveIdentityResponseFromEndpoint',\n        'defaultMessage': 'Did not return an identity id in the response from {endpointName}'\n    },\n    signupFailure: {\n        'id': 'signupFailure',\n        'defaultMessage': 'Signup failure'\n    },\n    signupFailureNoClaimOptions: {\n        'id': 'signupFailureNoClaimOptions',\n        'defaultMessage': 'Signup failure. Backend failed to communicate email claim options.'\n    },\n    unableToSendEmail: {\n        'id': 'unableToSendEmail',\n        'defaultMessage': 'Unable to send email'\n    }\n});\n\nclass ReactiveLogin extends Component {\n    constructor(props) {\n        super(props);\n\n        var loginOpsProps = {};\n        Object.assign(loginOpsProps, props);\n        loginOpsProps.onTermsAndConditions = (jwt, termsAndConditions) => {\n            this.setState({\n                \"mode\": \"termsandconditions\",\n                \"jwt\": jwt,\n                \"termsAndConditions\": termsAndConditions,\n                'termsAndConditionsCallback': null,\n                'termsAndConditionsMode': null,\n                'idpEmailConflict': false,\n                /*\n                 * SPINNER: Important to disable spinner if not done already!\n                 */\n                'spinner': false\n            });\n        };\n        loginOpsProps.onEmailConflict = (payload, intermediateToken) => {\n            /*\n             * SPINNER: Important to disable spinner if not done already!\n             */\n            this.setState({\"idpEmailConflict\": payload, \"idpEmailToken\": intermediateToken, 'spinner': false});\n        };\n        this.loginOperations = new LoginOperations(loginOpsProps);\n\n        this.objectId = sha1(\"\" + Math.random() + Math.random());\n\n        let username = props.username;\n        if (typeof(username) === \"undefined\") {\n            username = \"\";\n        }\n        const authorizeType = props.authorizeType;\n\n        let mode = authorizeType !== \"signup\" ? 'login' : \"signup\";\n        const email = props.email;\n        const emailJwt = props.emailJwt;\n        const hasVerifiedEmail = email && emailJwt;\n        if (mode === \"login\" && hasVerifiedEmail) {\n            mode = \"signup\";\n        }\n        const extParamsInput = typeof(props.extParams) !== 'undefined' ? props.extParams : {};\n        const extParams = {\n            'hideSignupIdps': typeof(extParamsInput.hideSignupIdps) !== 'undefined' ? extParamsInput.hideSignupIdps : false,\n            'embedSignup': typeof(extParamsInput.embedSignup) !== 'undefined' ? extParamsInput.embedSignup : false,\n            'signupWithoutPassword': typeof(extParamsInput.signupWithoutPassword) !== 'undefined' ? extParamsInput.signupWithoutPassword : false,\n            'signupAutoSubmit': typeof(extParamsInput.signupAutoSubmit) !== 'undefined' ? extParamsInput.signupAutoSubmit : false\n        };\n        if (extParams.embedSignup && !extParams.hideSignupIdps) {\n            extParams.hideSignupIdps = true;\n        }\n        this.state = {\n            'mode': mode,\n            \"signupFields\": {},\n            \"signupErrors\": {},\n            \"username\": username,\n            \"password\": \"\",\n            \"loginError\": false,\n            \"idpMergeLoginError\": false,\n            \"idpMergeLoginPasswordPrefill\": \"\",\n            \"language\": typeof(props.language) !== \"undefined\" ? props.language : \"en\",\n            \"email\": hasVerifiedEmail ? email : null,\n            \"emailJwt\": hasVerifiedEmail ? emailJwt : null,\n            \"extParams\": extParams,\n            \"idpEmailConflict\": false,\n            \"idpEmailToken\": false,\n            \"idpEmailValidationError\": false,\n            \"idpChangeEmail\": false,\n            \"idpEmailWaitForEmail\": false,\n            \"claimVerified\": false,\n            \"claimPassword\": false,\n            \"mustChangeUsername\": false,\n            \"changeUsernameJwt\": null,\n            \"changeUsernamePreviousEmail\": null,\n            \"changeUsernameOtherLogins\": [],\n            \"changeUsernameError\": false,\n            \"termsAndConditions\": null,\n            'termsAndConditionsMode': null,\n            'termsAndConditionsCallback': null,\n            \"spinner\": true // SPINNER: This is a bit risky! Need to remember to disable when: Loginbox shown, terms and conditions, email conflict (everywhere the UI is needed)\n        };\n\n        if (!hasVerifiedEmail && email) {\n            this.state.signupFields.email = email;\n        }\n\n        this.authorizeWithSession();\n    }\n\n    listenEvent(element, event, listener) {\n        if (typeof(element.addEventListener) != 'undefined') {\n            element.addEventListener(event, listener, false);\n        } else if (typeof(element.attachEvent) != 'undefined') {\n            element.attachEvent(\"on\" + event, listener);\n        }\n    }\n    static getElementsByName(name) {\n        var nodeList = document.getElementsByName(name);\n        var elements = [];\n        for (var i = 0; i < nodeList.length; i++) {\n            elements[i] = nodeList.item(i);\n        }\n        return elements;\n    }\n    static getMeta(name) {\n        var matches =  ReactiveLogin.getElementsByName(name)\n            .filter(element => typeof(element.tagName) !== 'undefined')\n            .filter(element => element.tagName.toLowerCase() === \"meta\")\n            .map(element => element.getAttribute(\"content\"))\n            .filter(value => typeof(value) !== \"undefined\")\n            .filter(value => value);\n        if (matches.length > 0) {\n            return matches[0];\n        } else {\n            return null;\n        }\n    }\n    getMeta(name) {\n        return ReactiveLogin.getMeta(name);\n    }\n\n    getIdpUris() {\n        var json = this.props.idpUrisJson;\n        var uris = JSON.parse(json);\n        return uris;\n    }\n\n    getEnterpriseLogins() {\n        const json = this.props.enterpriseLogins;\n        if (json !== undefined) {\n            return JSON.parse(json);\n        } else {\n            return [];\n        }\n    }\n\n    login(username, password) {\n        this.setState({\n            \"username\": username,\n            \"password\": password,\n            \"loginError\": false\n        });\n        axios.post(\n            this.props.authBaseUri+'/v1/login/user', querystring.stringify({\n                'username': username,\n                'password': password\n            })\n        )\n            .then((response) => {\n                var loginData = response.data;\n                if (typeof(loginData.mustChangeUsername) !== 'undefined' && loginData.mustChangeUsername) {\n                    this.setState({\n                        'mustChangeUsername': true,\n                        'changeUsernameJwt': loginData.intermediateJwtToken,\n                        'changeUsernamePreviousEmail': loginData.removedEmail,\n                        'changeUsernameOtherLogins': loginData.alternativeLogins,\n                        'changeUsernameError': false\n                    });\n                } else {\n                    this.loginOperations.autoConnectIdentity(this.state.language, loginData.intermediateJwtToken);\n                }\n            })\n            .catch((error) => {\n                this.setState({\"loginError\": true});\n            })\n    }\n\n    signupSubmit(email, password, termsAndConditions) {\n        const {formatMessage} = this.props.intl;\n\n        const redirectUri = this.props.authorizeUri;\n        const abortUri = this.props.abortUri;\n        const clientId = this.props.clientId;\n        this.setState({\"signupFields\": {\"email\": email, \"password\": password}, \"spinner\": true});\n        const signupRequestPayload = {\n            'email': email,\n            'success': redirectUri,\n            'abort': abortUri,\n            'clientId': clientId,\n            'termsAndConditionsAccepted': termsAndConditions\n        };\n        if (password !== null) {\n            signupRequestPayload.password = password;\n        }\n        axios.post(\n            this.props.authBaseUri+'/v1/login/signup', querystring.stringify(signupRequestPayload))\n            .then((response) => {\n                const signupData = response.data;\n                this.loginOperations.loggedIn(this.state.language, signupData.jwt);\n            })\n            .catch((error) => {\n                const response = error.response;\n                if (typeof(response) !== \"undefined\") {\n                    if (response.status == 400) {\n                        var validationErrors = response.data;\n                        if (typeof(validationErrors) !== \"undefined\" && typeof(validationErrors.fieldErrors) !== \"undefined\") {\n                            var errors = {};\n                            for (var i = 0; i < validationErrors.fieldErrors.length; i++) {\n                                errors[validationErrors.fieldErrors[i].field] = validationErrors.fieldErrors[i].message;\n                            }\n                            this.setState({\"signupErrors\": errors});\n                        } else {\n                            alert(\"Invalid request error on signup\");\n                        }\n                    } else if (response.status == 409) {\n                        this.setState({\"signupErrors\": {\"email\": formatMessage(messages.emailInUseError)}});\n                    } else {\n                        alert(\"Error code \"+response.status+\" on signup\");\n                    }\n                } else {\n                    alert(\"Signup failed\");\n                }\n                this.setState({\"spinner\": false});\n            });\n    }\n\n    signupVerifiedSubmit(password, termsAndConditions) {\n        const {formatMessage} = this.props.intl;\n\n        const redirectUri = this.props.authorizeUri;\n        const abortUri = this.props.abortUri;\n        const clientId = this.props.clientId;\n        this.setState({\"signupFields\": {\"password\": password}, \"spinner\": true});\n        const signupRequestPayload = {\n            'clientId': clientId,\n            'termsAndConditionsAccepted': termsAndConditions,\n            'language': this.state.language\n        };\n        if (password !== null) {\n            signupRequestPayload.password = password;\n        }\n        axios.post(\n            this.props.authBaseUri+'/v1/login/signupverified', querystring.stringify(signupRequestPayload), {\n                'headers': {\n                    'Authorization': 'Bearer ' + this.state.emailJwt\n                }\n            })\n            .then((response) => {\n                const signupData = response.data;\n                this.loginOperations.loggedIn(this.state.language, signupData.jwt);\n            })\n            .catch((error) => {\n                const response = error.response;\n                if (typeof(response) !== \"undefined\") {\n                    if (response.status == 400) {\n                        var validationErrors = response.data;\n                        if (typeof(validationErrors) !== \"undefined\" && typeof(validationErrors.fieldErrors) !== \"undefined\") {\n                            var errors = {};\n                            for (var i = 0; i < validationErrors.fieldErrors.length; i++) {\n                                errors[validationErrors.fieldErrors[i].field] = validationErrors.fieldErrors[i].message;\n                            }\n                            this.setState({\"signupErrors\": errors});\n                        } else {\n                            alert(\"Invalid request error on signup\");\n                        }\n                    } else {\n                        alert(\"Error code \"+response.status+\" on signup\");\n                    }\n                } else {\n                    alert(\"Signup failed\");\n                }\n                this.setState({\"spinner\": false});\n            });\n    }\n\n    forgotPasswordRequest(email) {\n        var redirectUri = this.props.authorizeUri;\n        var abortUri = this.props.abortUri;\n        var clientId = this.props.clientId;\n        axios.post(\n            this.props.authBaseUri+'/v1/login/forgotpassword', querystring.stringify({\n                'email': email,\n                'redirectUri': redirectUri,\n                'abortUri': abortUri,\n                'clientId': clientId,\n                'language': this.state.language\n            })\n        )\n            .then((response) => {\n                var forgotPasswordData = response.data;\n                this.setState({'mode': 'waitforemail', 'resetEmail': forgotPasswordData.email});\n            })\n            .catch((error) => {\n                alert(\"Forgot password error\");\n            })\n    }\n\n    authorizeWithSession() {\n        var tryAuthorize = () => {\n            var codeAuthorizeUri = this.props.codeAuthorizeUri;\n            axios.get(\n                this.props.authBaseUri+codeAuthorizeUri, {\n                    'xsrfCookieName': null,\n                    'withCredentials': true\n                }\n            )\n                .then((response) => {\n                    var authorizeData = response.data;\n                    if (typeof(authorizeData) !== 'undefined' && typeof(authorizeData.type) !== 'undefined' && authorizeData.type === 'redirect' && typeof(authorizeData.redirect) !== 'undefined') {\n                        this.loginOperations.authorizationRedirect(authorizeData.redirect);\n                    } else {\n                        /* Normal when not logged in */\n                        this.setState({'spinner': false});\n                    }\n                })\n                .catch((error) => {\n                    var response = error.response;\n                    if (typeof(response) !== 'undefined') {\n                        alert(\"Error response code \"+response.status+\" on authorize endpoint. Please try again later.\");\n                    } else {\n                        /* Normal when not logged in */\n                    }\n                    this.setState({'spinner': false});\n                });\n        };\n\n        axios.get(\n            this.props.authBaseUri+'/v1/login/emailverification', {\n                'xsrfCookieName': null,\n                'withCredentials': true\n            }\n        )\n            .then((response) => {\n                var emailVerified = response.data;\n                if (typeof(emailVerified) !== 'undefined' && typeof(emailVerified.intermediateJwtToken) !== 'undefined') {\n                    var intermediateToken = emailVerified.intermediateJwtToken;\n                    this.loginOperations.autoConnectIdentity(this.state.language, intermediateToken);\n                } else {\n                    tryAuthorize();\n                }\n            })\n            .catch((emailError) => {\n                tryAuthorize();\n            });\n    }\n\n    authorizationRedirect(redirect) {\n        if (typeof(this.props.authorizationCodeCallback) === 'function') {\n            const queryPos = redirect.indexOf('?');\n            let params = {};\n            if (queryPos >= 0) {\n                const query = redirect.substring(queryPos + 1);\n                const pairs = query.split('&')\n                    .map(function (pair) {\n                        const eqPos = pair.indexOf('=');\n                        if (eqPos >= 0) {\n                            return [pair.substring(0, eqPos), pair.substring(eqPos + 1)];\n                        } else {\n                            return [pair, ''];\n                        }\n                    })\n                    .map(function (pair) {\n                        return pair.map(decodeURIComponent);\n                    });\n                pairs.forEach((pair) => {\n                    params[pair[0]] = pair[1];\n                });\n            }\n            if (typeof(params.code) !== 'undefined' && params.code) {\n                this.props.authorizationCodeCallback(params.code);\n                return;\n            }\n\n        }\n        window.location.href = redirect;\n    }\n\n    declineTermsAndConditions() {\n        document.location.href = this.props.logoutUri;\n    }\n\n    isIE11orLess() {\n        return typeof(window.document.documentMode) !== 'undefined' && window.document.documentMode <= 11;\n    }\n\n    pollTokenReturn(url) {\n        setTimeout(() => {\n            axios.get(url)\n                .then((response) => {\n                    var data = response.data;\n                    if (typeof(data) !== 'undefined') {\n                        if (data.token) {\n                            this.loginOperations.autoConnectIdentity(this.state.language, data.token);\n                        } else {\n                            this.pollTokenReturn(url);\n                        }\n                    }\n                })\n        }, 1000);\n    }\n\n    startPopupLogin(element, event) {\n        const {formatMessage} = this.props.intl;\n\n        var popupHref = element.getAttribute(\"data-popup-href\");\n        var width = element.getAttribute(\"data-popup-width\");\n        var height = element.getAttribute(\"data-popup-height\");\n        if (typeof(width) == 'undefined' || !width) {\n            width = 800;\n        }\n        if (typeof(height) == 'undefined' || !height) {\n            height = 600;\n        }\n        if (typeof(popupHref) != 'undefined' && popupHref) {\n            if (typeof(event) == 'undefined' || !event) {\n                event = window.event;\n            }\n\n            const openPopup = function (url) {\n                return window.open(\n                    popupHref,\n\n                    \"targetWindow\",\n\n                    \"toolbar=no, \" +\n                    \"location=no, \" +\n                    \"status=no, \" +\n                    \"menubar=no, \" +\n                    \"scrollbars=yes, \" +\n                    \"resizable=yes, \" +\n                    \"width=\"+width+\", \" +\n                    \"height=\"+height\n                );\n            };\n\n            event.preventDefault();\n\n            if (this.isIE11orLess()) {\n                var popup = openPopup('about:blank');\n                axios.post(this.props.authBaseUri+\"/v1/login/popuptokenreturn\")\n                    .then((response) => {\n                        var data = response.data;\n                        if (typeof(data) !== 'undefined' && typeof(data.id) !== 'undefined' && typeof(data.url) !== 'undefined') {\n                            this.pollTokenReturn(data.url);\n\n                            popup.location.href = popupHref + '&popuptokenreturn='+data.id;\n                        } else {\n                            popup.close();\n                            alert('Unable to open login popup window');\n                        }\n                    })\n                    .catch((error) => {\n                        popup.close();\n                        alert('Unable to open login popup window');\n                    });\n            } else {\n                openPopup(popupHref);\n            }\n        }\n    }\n\n    forgotPassword() {\n        this.setState({'mode': 'forgotpassword'});\n    }\n    forgotPasswordByEmail(event) {\n        event.preventDefault();\n        var email = document.getElementById(\"email-input\").value;\n        this.forgotPasswordRequest(email);\n    }\n    signup() {\n        this.setState({'mode': 'signup'});\n    }\n    setLoginMode() {\n        this.setState({'mode': 'login'});\n    }\n\n    verifyEmailAndLogIn(credentialsId) {\n        const {formatMessage} = this.props.intl;\n\n        axios.post(this.props.authBaseUri+\"/v1/login/idp/verifymerge\", querystring.stringify({\n            \"credentialsId\": credentialsId,\n            \"codeAuthorizeUrl\": this.props.codeAuthorizeUri\n        }), {\n            'headers' : {\n                'Authorization': 'Bearer '+this.state.idpEmailToken\n            }\n        })\n            .then((response) => {\n                this.setState({'idpEmailWaitForEmail': true});\n            })\n            .catch((error) => {\n                alert(formatMessage(messages.unableToSendEmail));\n            });\n    }\n\n    verifyOverrideEmailAndClaimOptions(credentialsId, email) {\n        const {formatMessage} = this.props.intl;\n\n        axios.post(this.props.authBaseUri+\"/v1/login/idp/verifyemailandclaim\", querystring.stringify({\n            \"credentialsId\": credentialsId,\n            \"email\": email,\n            \"codeAuthorizeUrl\": this.props.codeAuthorizeUri\n        }), {\n            'headers' : {\n                'Authorization': 'Bearer '+this.state.idpEmailToken\n            }\n        })\n            .then((response) => {\n                this.setState({'idpEmailWaitForEmail': true});\n            })\n            .catch((error) => {\n                alert(formatMessage(messages.unableToSendEmail));\n            });\n    }\n\n    changeEmailAndSignUp(credentialsId, email) {\n        const {formatMessage} = this.props.intl;\n\n        if (!email || email.length < 3 || email.indexOf('@') < 0) {\n            const validationError = formatMessage(messages.invalidEmailValidationError);\n            this.setState({'idpEmailValidationError': validationError});\n            return;\n        } else if (this.state.idpChangeEmail === email) {\n            const validationError = formatMessage(messages.sameEmailSuppliedValidationError);\n            this.setState({'idpEmailValidationError': validationError});\n            return;\n        } else {\n            this.setState({'idpEmailValidationError': false});\n        }\n        axios.post(this.props.authBaseUri+\"/v1/login/idp/email\", querystring.stringify({\n            \"credentialsId\": credentialsId,\n            \"email\": email,\n            \"codeAuthorizeUrl\": this.props.codeAuthorizeUri\n        }), {\n            'headers' : {\n                'Authorization': 'Bearer '+this.state.idpEmailToken\n            }\n        })\n            .then((response) => {\n                this.setState({'idpEmailWaitForEmail': true, \"idpChangeEmail\": email});\n            })\n            .catch((error) => {\n                if (error.response && error.response.status === 409) {\n                    /* 409=conflict */\n                    const payload = error.response.data;\n                    if (payload && typeof(payload.length) !== \"undefined\" && payload.length > 0) {\n                        const item = payload[0];\n                        if (\n                            item &&\n                            typeof(item.credentialsId) !== \"undefined\" &&\n                            typeof(item.email) !== \"undefined\" &&\n                            item.type === \"email-conflict\" &&\n                            typeof(item.conflictingIdentity) !== \"undefined\" &&\n                            typeof(item.conflictingIdentity.id) !== \"undefined\"\n                        ) {\n                            axios.post(this.props.authBaseUri+\"/v1/login/idp/emailclaimoptions\", querystring.stringify({\n                                \"credentialsId\": credentialsId,\n                                \"email\": email\n                            }), {\n                                'headers' : {\n                                    'Authorization': 'Bearer '+this.state.idpEmailToken\n                                }\n                            })\n                                .then((claimOptResponse) => {\n                                    const claimOptions = claimOptResponse.data;\n                                    if (typeof(claimOptions.isVerified) !== 'undefined' && typeof(claimOptions.hasPassword) !== 'undefined') {\n                                        this.setState({\"idpChangeEmail\": email, \"claimVerified\": !!claimOptions.isVerified, \"claimPassword\": !!claimOptions.hasPassword, \"idpMergeLoginPasswordPrefill\": \"\"});\n                                    } else {\n                                        alert(formatMessage(messages.signupFailureNoClaimOptions));\n                                    }\n                                })\n                                .catch((claimOptError) => {\n                                    alert(formatMessage(messages.signupFailure));\n                                });\n                            return;\n                        }\n                    }\n                }\n                alert(formatMessage(messages.signupFailure));\n            });\n    }\n\n    idpSingupWithoutEmail(credentialsId) {\n        const {formatMessage} = this.props.intl;\n        axios.post(this.props.authBaseUri+\"/v1/login/idp/noemail\", querystring.stringify({\n            \"credentialsId\": credentialsId\n        }), {\n            'headers' : {\n                'Authorization': 'Bearer '+this.state.idpEmailToken\n            }\n        })\n            .then((response) => {\n                return this.idconnectLikeResponse(response, 'signup ext idp without email endpoint');\n            })\n            .catch((error) => {\n                alert(formatMessage(messages.signupFailure));\n            });\n    }\n\n    idconnectLikeResponse(response, endpointName) {\n        const {formatMessage} = this.props.intl;\n        var accountData = response.data;\n        var identities = accountData.identities;\n        if (typeof(identities) !== 'undefined' && identities.length === 1) {\n            var identity = identities[0];\n            var identityId = identity.id;\n            if (typeof(identityId) !== 'undefined' && identityId) {\n                this.loginOperations.loginWithIdentity(this.state.language, this.state.idpEmailToken, identityId);\n            } else {\n                alert(formatMessage(messages.didNotReceiveIdentityResponseFromEndpoint, {'endpointName': endpointName}));\n            }\n        } else {\n            alert(formatMessage(messages.strangeResponseFromEndpoint, {'endpointName': endpointName}));\n        }\n    }\n\n    idpLoginAndMerge(password) {\n        const {formatMessage} = this.props.intl;\n        this.setState({'idpMergeLoginError': false});\n        axios.post(this.props.authBaseUri+\"/v1/login/idp/loginmerge\", querystring.stringify({\n            \"email\": this.state.idpChangeEmail,\n            \"password\": password\n        }), {\n            'headers' : {\n                'Authorization': 'Bearer '+this.state.idpEmailToken\n            }\n        })\n            .then((response) => {\n                return this.idconnectLikeResponse(response, 'login and merge accounts');\n            })\n            .catch((error) => {\n                if (error.response.status === 401) {\n                    this.setState({'idpMergeLoginError': true, 'idpMergeLoginPasswordPrefill': password});\n                } else {\n                    alert(formatMessage(messages.loginFailedWithErrorCode, {'code': error.response.status}));\n                }\n            })\n    }\n\n    idpLoginAndMergeForgotPassword() {\n        const {formatMessage} = this.props.intl;\n        this.setState({'idpMergeLoginError': false});\n        axios.post(this.props.authBaseUri+\"/v1/login/idp/loginmergeforgotpassword\", querystring.stringify({\n            \"email\": this.state.idpChangeEmail,\n            \"codeAuthorizeUrl\": this.props.codeAuthorizeUri\n        }), {\n            'headers' : {\n                'Authorization': 'Bearer '+this.state.idpEmailToken\n            }\n        })\n            .then((response) => {\n                this.setState({'idpEmailWaitForEmail': true});\n            })\n            .catch((error) => {\n                alert(formatMessage(messages.forgotPasswordFailed));\n            });\n    }\n\n    changeUserProceedWithoutUsername() {\n        const {formatMessage} = this.props.intl;\n        axios.post(this.props.authBaseUri+\"/v1/changeusername/ack\", querystring.stringify({\n            \"email\": this.state.changeUsernamePreviousEmail\n        }), {\n            'headers' : {\n                'Authorization': 'Bearer '+this.state.changeUsernameJwt\n            }\n        })\n            .then((response) => {\n                this.loginOperations.autoConnectIdentity(this.state.language, this.state.changeUsernameJwt);\n                this.setState({'mustChangeUsername': false});\n            })\n            .catch((error) => {\n                alert(formatMessage(messages.ackChangeUsernameFailed));\n                this.loginOperations.autoConnectIdentity(this.state.language, this.state.changeUsernameJwt);\n                this.setState({'mustChangeUsername': false});\n            });\n    }\n\n    changeUserProceedWithUsername(usernameFieldRef) {\n        const {formatMessage} = this.props.intl;\n        const username = usernameFieldRef.value;\n        if (typeof(username) !== 'undefined' && username) {\n            axios.post(this.props.authBaseUri + \"/v1/changeusername/change\", querystring.stringify({\n                \"email\": this.state.changeUsernamePreviousEmail,\n                \"username\": username\n            }), {\n                'headers': {\n                    'Authorization': 'Bearer ' + this.state.changeUsernameJwt\n                }\n            })\n                .then((response) => {\n                    this.loginOperations.autoConnectIdentity(this.state.language, this.state.changeUsernameJwt);\n                    this.setState({'mustChangeUsername': false});\n                })\n                .catch((error) => {\n                    const response = error.response;\n                    if (typeof(response) !== 'undefined' && response.status === 409) {\n                        this.setState({'changeUsernameError': formatMessage(messages.usernameTakenError)});\n                    } else {\n                        alert(formatMessage(messages.changeUsernameFailed));\n                    }\n                });\n        } else {\n            this.setState({'changeUsernameError': formatMessage(messages.newUsernameRequiredError)});\n        }\n    }\n\n    showTermsAndConditionsWithCallback(termsAndConditions, callback) {\n        const previousMode = this.state.mode;\n        this.setState({\n            'mode': 'signuptermsandconditions',\n            'termsAndConditions': termsAndConditions,\n            'termsAndConditionsMode': previousMode,\n            'termsAndConditionsCallback': callback,\n            /*\n             * SPINNER: Important to disable spinner if not done already!\n             */\n            'spinner': false\n        });\n    }\n\n    componentDidMount() {\n        this.listenEvent(window, 'message', (event) => {\n            /*\n             * For Internet Explorer:\n             */\n            if (typeof(event) === 'undefined' && typeof(window.event) !== 'undefined') {\n                event = window.event;\n            }\n\n            var data = event.data;\n            if (typeof(data) !== 'undefined' && typeof(data.type) !== 'undefined') {\n                if (data.type === 'idpPopupJwt') {\n                    var jwt = data.jwt;\n                    this.loginOperations.autoConnectIdentity(this.state.language, jwt);\n                } else if (data.type === 'enterprisePopupJwt') {\n                    const jwt = data.jwt;\n                    this.loginOperations.loginWithIdentity(this.state.language, jwt, null);\n                }\n            }\n        });\n    }\n\n    renderIdpRecursiveInUse() {\n        const credentialsId = this.state.idpEmailConflict[0].credentialsId;\n        if (this.state.claimPassword) {\n            return (\n                <div>\n                    <p>\n                        <FormattedMessage\n                            id=\"idpEmailConflictOverrideConflictLogin\"\n                            defaultMessage={'The email address you provided is already in use. Please log in to your account:'}\n                            values={{'email': this.state.idpChangeEmail}}\n                        />\n                    </p>\n                    <UserPasswordLogin key={'idpLoginMerge'+this.state.idpChangeEmail+(this.state.idpMergeLoginError?'error':'')} onLogin={(username, password) => {\n                        this.idpLoginAndMerge(password);\n                    }} onForgotPassword={() => {\n                        this.idpLoginAndMergeForgotPassword();\n                    }} username={this.state.idpChangeEmail} password={''} loginError={this.state.idpMergeLoginError} usernameFieldDisabled={true} />\n                </div>\n            );\n        } else {\n            return (\n                <div>\n                    <p>\n                        <FormattedMessage\n                            id=\"idpEmailConflictOverrideConflictWithoutPassword\"\n                            defaultMessage={'The email address you provided is already in use. Please verify that the email address is yours.'}\n                            values={{'email': this.state.idpChangeEmail}}\n                        />\n                    </p>\n                    <div className=\"conflicting-override-email-buttons\">\n                        <Button onClick={() => { this.verifyOverrideEmailAndClaimOptions(credentialsId, this.state.idpChangeEmail); }} className=\"btn btn-success terms-and-conditions-buttons\">\n                            <FormattedMessage\n                                id=\"idpEmailConflictOverrideConflictClaimEmailButton\"\n                                defaultMessage=\"Send an email to {email}\"\n                                values={{'email': this.state.idpChangeEmail}}\n                            />\n                        </Button>\n                        <Button onClick={() => { this.setState({\"idpChangeEmail\": false}); }} className=\"btn btn-danger terms-and-conditions-buttons\">\n                            <FormattedMessage\n                                id=\"idpEmailConflictOverrideConflictCancelClaimEmailButton\"\n                                defaultMessage=\"Don't use this email address\"\n                            />\n                        </Button>\n                    </div>\n                </div>\n            );\n        }\n    }\n\n    renderMustChangeUsernameHasAlternatives() {\n        return (\n            <div>\n                <p><FormattedMessage id={'mustChangeLoginNameUseAlternatives'} defaultMessage={'You do have alternative email addresses on your account. Please use one or more of the following email addresses as login username from now on:'} /></p>\n                <ul>\n                    {this.state.changeUsernameOtherLogins.map((email) => {\n                        return ( <li>{email}</li>);\n                    })}\n                </ul>\n                <Button onClick={() => { this.changeUserProceedWithoutUsername(); }} className=\"btn btn-success\">\n                    <FormattedMessage id={'continueButton'} defaultMessage={'Continue'} />\n                </Button>\n            </div>\n        );\n    }\n\n    renderMustChangeUsernameNoAlternatives() {\n        const {formatMessage} = this.props.intl;\n\n        return (\n            <div>\n                {\n                    (() => {\n                        if (this.state.changeUsernameError) {\n                            return ( <div className={'error col-sm-12 alert alert-danger'}>{this.state.changeUsernameError}</div> );\n                        } else {\n                            return ( <span></span> );\n                        }\n                    })()\n                }\n                <label>\n                    <FormattedMessage id={'mustChangeLoginNameTypeNew'} defaultMessage={'Please type in a new username for login:'}/>\n                    <input type={'text'} ref={(ref) => { this.changeUsernameFieldRef = ref; }} />\n                </label>\n                <Button onClick={() => { this.changeUserProceedWithUsername(this.changeUsernameFieldRef); }} className=\"btn btn-success\">\n                    <FormattedMessage id={'continueButton'} defaultMessage={'Continue'} />\n                </Button>\n            </div>\n        );\n    }\n\n    renderMustChangeUsername() {\n        return (\n            <div>\n                <p>\n                    <FormattedMessage id={'mustChangeLoginNameDescription'} defaultMessage={'The email address {email} had to be removed from your account because another user claimed ownership of it. You will not be able to log in using this address anymore.'} values={{email: this.state.changeUsernamePreviousEmail}} />\n                </p>\n                {(() => {\n                    if (typeof(this.state.changeUsernameOtherLogins) !== 'undefined' && typeof(this.state.changeUsernameOtherLogins.length) !== 'undefined' && this.state.changeUsernameOtherLogins.length > 0) {\n                        return this.renderMustChangeUsernameHasAlternatives();\n                    } else {\n                        return this.renderMustChangeUsernameNoAlternatives();\n                    }\n                })()}\n            </div>\n        );\n    }\n\n    renderIdpEmailInUse() {\n        const credentialsId = this.state.idpEmailConflict[0].credentialsId;\n        if (this.state.idpEmailWaitForEmail !== false) {\n            return (\n                <div>\n                    <p>\n                        <FormattedMessage\n                            id=\"idpEmailConflictSentEmailForMerge\"\n                            defaultMessage={'We\\'ve sent you an email to the address {email}. Please check your email. In order to proceed please click the link in the email.'}\n                            values={{'email': this.state.idpChangeEmail ? this.state.idpChangeEmail : this.state.idpEmailConflict[0].email}}\n                        />\n                    </p>\n                </div>\n            );\n        } else {\n            if (!this.state.idpChangeEmail) {\n                return (\n                    <div>\n                        <p>\n                            <FormattedMessage\n                                id=\"idpEmailConflict\"\n                                defaultMessage={'The email address we received from the external identity provider is already in use. Please choose one of the following resolutions:'}\n                                values={{'email': this.state.idpEmailConflict[0].email}}\n                            />\n                        </p>\n\n                        <ul>\n                            <li>\n                                <a onClick={() => {\n                                    this.verifyEmailAndLogIn(credentialsId);\n                                }}>\n                                    <FormattedMessage\n                                        id=\"idpEmailConflictVerify\"\n                                        defaultMessage={'Send an email to {email} and verify that it is yours. Then log in with the existing account'}\n                                        values={{'email': this.state.idpEmailConflict[0].email}}\n                                    />\n                                </a>\n                            </li>\n                            <li>\n                                <label>\n                                    <FormattedMessage\n                                        id=\"idpEmailConflictTypeInEmail\"\n                                        defaultMessage={'Type in email: '}\n                                    />\n                                    <input key=\"idp-conflict-change-email-field\" id={this.objectId + \"-idp-signup-email\"} type=\"text\"/>\n                                </label>\n                                <button onClick={() => {\n                                    const email = document.getElementById(this.objectId + \"-idp-signup-email\").value;\n                                    this.changeEmailAndSignUp(credentialsId, email);\n                                }}>\n                                    <FormattedMessage id={'signup'} defaultMessage={'Sign up'} />\n                                </button>\n                                { this.state.idpEmailValidationError ? ( <span key={'idp-conflict-email-field-validation-error-'+this.state.idpEmailValidationError} className={'error'}>{this.state.idpEmailValidationError}</span> ) : ( <span key={'idp-conflict-email-field-validation-error'}></span> )}\n                            </li>\n                            <li>\n                                <a onClick={() => {\n                                    this.idpSingupWithoutEmail(credentialsId);\n                                }}>\n                                    <FormattedMessage id={'optionProceedWithoutEmailAfterConflict'} defaultMessage={'Proceed without an email address. Certain functionality might be disabled. You\\'ll be able to add your email address later.'} />\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                );\n            } else {\n                return this.renderIdpRecursiveInUse();\n            }\n        }\n    }\n\n    renderExtIdpOrLoginHeading() {\n        if (this.state.mode === 'login') {\n            return (\n                <h3 className=\"center-text\">\n                    <FormattedMessage id=\"loginWith\"\n                                      defaultMessage=\"Login with\"/>\n                </h3>\n            );\n        } else {\n            if (this.state.extParams.embedSignup) {\n                return (\n                    <div className={'embedded-signup-heading'}>\n                        <h3 className=\"center-text\">\n                            <FormattedMessage id=\"embedSignupHeading\"\n                                              defaultMessage=\"Verify your user profile\"/>\n                        </h3>\n                        <p>\n                            <FormattedMessage id={'embedSignupP1'}\n                                              defaultMessage={'Since this is the first time you take one of our courses, we ask you for an additional round of login for your user to be verified. This is to ensure that we are 100% sure that this is you and can safeguard your personal safety.'} />\n                        </p>\n                        <p>\n                            <FormattedMessage id={'embedSignupP2'}\n                                              defaultMessage={'Once you have logged in, you will receive an email that you also need to open and confirm. This is a one-time request and will not be required the next time you log in.'} />\n                        </p>\n                    </div>\n                );\n            } else if (this.state.extParams.hideSignupIdps) {\n                return (\n                    <h3 className=\"center-text\">\n                        <FormattedMessage id=\"signup\"\n                                          defaultMessage=\"Signup\"/>\n                    </h3>\n                );\n            } else {\n                return (\n                    <h3 className=\"center-text\">\n                        <FormattedMessage id=\"signupWith\"\n                                          defaultMessage=\"Signup with\"/>\n                    </h3>\n                );\n            }\n        }\n    }\n\n    renderTopWithExtIdps() {\n        var btnClass = {\n            \"skolon\": \"btn-sko\",\n            \"feidetest\": \"btn-feide\",\n            \"feideopenidp\": \"btn-feide\",\n            \"feide\": \"btn-feide\",\n            \"dataporten\": \"btn-feide\",\n            \"google\": \"btn-go\",\n            \"facebook\": \"btn-fb\",\n            \"windowslive\": \"btn-wl\",\n            \"twitter\": \"btn-tw\"\n        };\n        var btnTitle = {\n            \"skolon\": \"Skolon\",\n            \"feidetest\": \"Feide (Test)\",\n            \"feideopenidp\": \"Feide (OpenIDP)\",\n            \"feide\": \"Feide\",\n            \"dataporten\": \"Dataporten\",\n            \"google\": \"Google\",\n            \"facebook\": \"Facebook\",\n            \"windowslive\": \"Windows Live ID\",\n            \"twitter\": \"Twitter\"\n        };\n\n        if (!this.state.mustChangeUsername && (this.state.mode === 'login' || this.state.mode === 'signup')) {\n            if (this.state.idpEmailConflict === false) {\n                return (\n                    <div>\n                        {\n                            (() => {\n                                const enterpriseLogins = this.getEnterpriseLogins();\n                                if (enterpriseLogins.length > 0) {\n                                    return (\n                                        <div className={'enterprise-logins'}>\n                                            <a href={'#'} onClick={() => { this.setState({'mode': 'enterprise-login'}); }}>Company login</a>\n                                        </div>\n                                    );\n                                } else {\n                                    return (\n                                        <div className={'enterprise-logins'}></div>\n                                    );\n                                }\n                            })()\n                        }\n                        { this.renderExtIdpOrLoginHeading() }\n\n                        {\n                            (() => {\n                                if (this.state.mode !== 'signup' || !this.state.extParams.hideSignupIdps) {\n                                    return (\n                                        <div>\n                                            <ul id=\"loginlist\">\n                                                {\n                                                    this.getIdpUris().filter((info) => {\n                                                        return (info.id !== \"local\" && info.id !== \"pedagogvarmland\");\n                                                    }).map((info) => {\n                                                        var btnClassName = btnClass[info.id];\n                                                        if (typeof(btnClassName) === 'undefined') {\n                                                            btnClassName = \"btn\";\n                                                        }\n                                                        var btnTitleStr = btnTitle[info.id];\n                                                        if (typeof(btnTitleStr) === 'undefined') {\n                                                            btnTitleStr = info.id;\n                                                        }\n                                                        return (\n                                                            <li key={info.uri} className={btnClassName}>\n                                                                {\n                                                                    (() => {\n                                                                        var width = 600;\n                                                                        var height = 500;\n                                                                        if (btnClassName === \"btn-go\") {\n                                                                            width = 500;\n                                                                            height = 600;\n                                                                        }\n                                                                        var clickHandler = (() => {\n                                                                            var obj = this;\n                                                                            return function (event) {\n                                                                                if (typeof(event) === 'undefined' || !event) {\n                                                                                    event = window.event;\n                                                                                }\n                                                                                var element = event.target;\n                                                                                while (element && element.className !== \"idp-button-with-popup\") {\n                                                                                    element = element.parentNode != element ? element.parentNode : null;\n                                                                                }\n                                                                                if (element) {\n                                                                                    obj.startPopupLogin(element, event);\n                                                                                }\n                                                                            }\n                                                                        })();\n                                                                        if (btnClassName === \"btn-fb\") {\n                                                                            return (\n                                                                                <a onClick={clickHandler}\n                                                                                   className=\"idp-button-with-popup\"\n                                                                                   href={info.uri}\n                                                                                   data-popup-href={info.popupTokenUri}\n                                                                                   data-popup-width={width}\n                                                                                   data-popup-height={height}>\n                                                                    <span className=\"icon-BB_icn_sm_facebook\">\n                                                                        <span className=\"path1\"></span>\n                                                                        <span className=\"path2\"></span>\n                                                                    </span>\n                                                                                    Facebook\n                                                                                </a>\n                                                                            );\n                                                                        } else if (btnClassName === \"btn-go\") {\n                                                                            return (\n                                                                                <a onClick={clickHandler}\n                                                                                   className=\"idp-button-with-popup\"\n                                                                                   href={info.uri}\n                                                                                   data-popup-href={info.popupTokenUri}\n                                                                                   data-popup-width={width}\n                                                                                   data-popup-height={height}>\n                                                                    <span className=\"icon-BB_icn_sm_google\">\n                                                                        <span className=\"path1\"></span>\n                                                                        <span className=\"path2\"></span>\n                                                                    </span>\n                                                                                    Google\n                                                                                </a>\n                                                                            );\n                                                                        } else if (btnClassName === \"btn-tw\") {\n                                                                            return (\n                                                                                <a onClick={clickHandler}\n                                                                                   className=\"idp-button-with-popup\"\n                                                                                   href={info.uri}\n                                                                                   data-popup-href={info.popupTokenUri}\n                                                                                   data-popup-width={width}\n                                                                                   data-popup-height={height}>\n                                                                    <span className=\"icon-BB_icn_sm_twitter\">\n                                                                        <span className=\"path1\"></span>\n                                                                        <span className=\"path2\"></span>\n                                                                    </span>\n                                                                                    Twitter\n                                                                                </a>\n                                                                            );\n                                                                        } else if (btnClassName === \"btn-wl\") {\n                                                                            return (\n                                                                                <a onClick={clickHandler}\n                                                                                   className=\"idp-button-with-popup\"\n                                                                                   href={info.uri}\n                                                                                   data-popup-href={info.popupTokenUri}\n                                                                                   data-popup-width={width}\n                                                                                   data-popup-height={height}>\n                                                                    <span className=\"icon-BB_icn_sm_windows\">\n                                                                        <span className=\"path1\"></span>\n                                                                        <span className=\"path2\"></span>\n                                                                        <span className=\"path3\"></span>\n                                                                        <span className=\"path4\"></span>\n                                                                    </span>\n                                                                                    Windows Live ID\n                                                                                </a>\n                                                                            );\n                                                                        } else if (btnClassName === \"btn-sko\") {\n                                                                            return (\n                                                                                <a onClick={clickHandler}\n                                                                                   className=\"idp-button-with-popup\"\n                                                                                   href={info.uri}\n                                                                                   data-popup-href={info.popupTokenUri}\n                                                                                   data-popup-width={width}\n                                                                                   data-popup-height={height}>\n                                                                    <span className=\"icon-BB_icn_sm_skolon\">\n                                                                        <span className=\"path1\"></span>\n                                                                        <span className=\"path2\"></span>\n                                                                    </span>\n                                                                                    Skolon\n                                                                                </a>\n                                                                            );\n                                                                        } else if (btnClassName === \"btn-feide\") {\n                                                                            return (\n                                                                                <a onClick={clickHandler}\n                                                                                   className=\"idp-button-with-popup\"\n                                                                                   href={info.uri}\n                                                                                   data-popup-href={info.popupTokenUri}\n                                                                                   data-popup-width={width}\n                                                                                   data-popup-height={height}>\n                                                                                    <img src={feideLogo}\n                                                                                         alt=\"\"/>\n                                                                                    {btnTitleStr}\n                                                                                </a>\n                                                                            );\n                                                                        } else {\n                                                                            return (\n                                                                                <a onClick={clickHandler}\n                                                                                   className=\"idp-button-with-popup\"\n                                                                                   href={info.uri}\n                                                                                   data-popup-href={info.popupTokenUri}\n                                                                                   data-popup-width={width}\n                                                                                   data-popup-height={height}>\n                                                                                    <span>{info.id}</span>\n                                                                                </a>\n                                                                            );\n                                                                        }\n                                                                    })()\n                                                                }\n                                                            </li>\n                                                        );\n                                                    })\n                                                }\n                                            </ul>\n\n                                            <p\n                                                className=\"center-text terms\">\n                                                <FormattedMessage\n                                                    id=\"weWillNeverPost\"\n                                                    defaultMessage=\"We will never post without your permission.\"\n                                                />\n                                            </p>\n                                            <p className=\"border-title text-center\">\n                                                        <span>\n                                                            <FormattedMessage\n                                                                id=\"orSeparator\"\n                                                                defaultMessage=\"OR\"\n                                                            />\n                                                        </span>\n                                            </p>\n                                        </div>\n                                    );\n                                } else {\n                                    return (<span></span>);\n                                }\n                            })()\n                        }\n                    </div>\n                );\n            } else {\n                return (\n                    <span></span>\n                );\n            }\n        } else {\n            return (\n                <span></span>\n            );\n        }\n    }\n\n    renderMainContentPartDefaultLoginPart() {\n        const {formatMessage} = this.props.intl;\n\n        if (this.state.mustChangeUsername) {\n            return this.renderMustChangeUsername();\n        } else if (this.state.idpEmailConflict !== false) {\n            return this.renderIdpEmailInUse();\n        } else if (this.state.mode === 'login') {\n            var data = JSON.stringify({\n                \"mode\": \"login\",\n                \"username\": this.state.username,\n                \"password\": this.state.password,\n                \"loginError\": this.state.loginError\n            });\n            var hash = sha1(data);\n            return (\n                <div key={hash}>\n                    <UserPasswordLogin onLogin={(username, password) => {\n                        return this.login(username, password);\n                    }} onForgotPassword={() => {\n                        return this.forgotPassword();\n                    }} onSignup={() => {\n                        return this.signup();\n                    }} username={this.state.username} password={this.state.password} loginError={this.state.loginError} />\n                </div>\n            );\n        } else if (this.state.mode === 'signup' || this.state.mode === 'signuptermsandconditions') {\n            var data = JSON.stringify({\n                \"mode\": \"signup\",\n                \"fields\": this.state.signupFields,\n                \"errors\": this.state.signupErrors\n            });\n            var hash = sha1(data);\n            var termsAndConditions = this.props.termsAndConditions;\n            termsAndConditions = termsAndConditions ? termsAndConditions : false;\n            var termsElement;\n            if (this.state.mode === 'signuptermsandconditions') {\n                termsElement = (\n                    <TermsAndConditions key={'signuptermsandconditions'} onAccept={() => {\n                        if (this.state.termsAndConditionsCallback !== null) {\n                            this.state.termsAndConditionsCallback(true);\n                            if (this.state.termsAndConditionsMode) {\n                                this.setState({\n                                    'mode': this.state.termsAndConditionsMode,\n                                    'termsAndConditions': null,\n                                    'termsAndConditionsMode': null,\n                                    'termsAndConditionsCallback': null\n                                });\n                            }\n                        } else {\n                            this.loginOperations.acceptTermsAndConditions(this.state.jwt);\n                        }\n                    }} onDecline={() => {\n                        if (this.state.termsAndConditionsCallback !== null) {\n                            this.state.termsAndConditionsCallback(false);\n                            if (this.state.termsAndConditionsMode) {\n                                this.setState({\n                                    'mode': this.state.termsAndConditionsMode,\n                                    'termsAndConditions': null,\n                                    'termsAndConditionsMode': null,\n                                    'termsAndConditionsCallback': null\n                                });\n                            }\n                        } else {\n                            this.declineTermsAndConditions();\n                        }\n                    }} termsAndConditions={this.state.termsAndConditions} />\n                );\n            } else {\n                termsElement = ( <span key={'no-signuptermsandconditions'}></span> );\n            }\n            if (this.state.email) {\n                return (\n                    <div>\n                        {termsElement}\n                        <div key={hash}>\n                            <SignupVerifiedEmailForm\n                                visible={this.state.mode === 'signup'}\n                                email={this.state.email}\n                                withoutPassword={this.state.extParams.signupWithoutPassword}\n                                autoSubmit={this.state.extParams.signupAutoSubmit}\n                                termsAndConditions={termsAndConditions}\n                                fields={this.state.signupFields}\n                                errors={this.state.signupErrors}\n                                onSignup={(password, termsAndConditions) => {\n                                    this.signupVerifiedSubmit(password, termsAndConditions);\n                                }}\n                                onLogin={() => {\n                                    this.setLoginMode();\n                                }}\n                                onTermsAndConditionsRequired={(termsAndConditions, accepted) => {\n                                    this.showTermsAndConditionsWithCallback(termsAndConditions, accepted);\n                                }}\n                            />\n                        </div>\n                    </div>\n                );\n            } else {\n                return (\n                    <div>\n                        {termsElement}\n                        <div key={hash}>\n                            <SignupForm\n                                visible={this.state.mode === 'signup'}\n                                withoutPassword={this.state.extParams.signupWithoutPassword}\n                                autoSubmit={this.state.extParams.signupAutoSubmit}\n                                termsAndConditions={termsAndConditions}\n                                fields={this.state.signupFields}\n                                errors={this.state.signupErrors}\n                                onSignup={(email, password, termsAndConditions) => {\n                                    this.signupSubmit(email, password, termsAndConditions);\n                                }}\n                                onLogin={() => {\n                                    this.setLoginMode();\n                                }}\n                                onTermsAndConditionsRequired={(termsAndConditions, accepted) => {\n                                    this.showTermsAndConditionsWithCallback(termsAndConditions, accepted);\n                                }}\n                            />\n                        </div>\n                    </div>\n                );\n            }\n        } else if (this.state.mode === 'forgotpassword') {\n            return (\n                <form key=\"forgotpassword\" method=\"post\">\n                    <div>\n                        <h1>\n                            <FormattedMessage\n                                id=\"resetPasswordHeading\"\n                                defaultMessage=\"Reset or create password\"\n                            />\n                        </h1>\n                        <label for=\"email-input\">\n                            <FormattedMessage\n                                id=\"emailFieldLabel\"\n                                defaultMessage=\"Email: \"\n                            />\n                        </label>\n                        <input type=\"text\" id=\"email-input\" name=\"email\"/>\n                    </div>\n                    <div>\n                        <input onClick={ (event) => { this.forgotPasswordByEmail(event); }} type=\"submit\" value={formatMessage(messages.continueButton)}/>\n                    </div>\n                </form>\n            );\n        } else if (this.state.mode === 'waitforemail') {\n            return (\n                <div key=\"waitforemail\" class=\"surikatt\">\n                    <div class=\"col-sm-4\"></div>\n                    <div class=\"col-sm-8\">\n                        <h1>\n                            <FormattedMessage\n                                id=\"weHaveSentEmailTitle\"\n                                defaultMessage=\"Nearly there!\"\n                            />\n                        </h1>\n                        <p>\n                            <FormattedMessage\n                                id=\"weHaveSentEmail\"\n                                defaultMessage={'We have sent you an e-mail to{linebreak}{resetEmail} ({changeEmailLink})'}\n                                values={{\n                                    \"linebreak\": <br/>,\n                                    \"resetEmail\": this.state.resetEmail,\n                                    \"changeEmailLink\": <a\n                                        onClick={(event) => {\n                                            event.preventDefault();\n                                            this.setState({'mode': 'forgotpassword'});\n                                        }} href=\"\"><FormattedMessage id=\"changeForgottenEmail\" defaultMessage=\"change email\"/></a>\n                                }}\n                            />\n                        </p>\n                        <p>\n                            <FormattedMessage\n                                id=\"pleaseFollowTheLinkFromEmail\"\n                                defaultMessage=\"Please follow the link in that e-mail to finish setting up your account.\"\n                            />\n                        </p>\n                        <div>\n                            <p>\n                                <FormattedMessage\n                                    id=\"didNotGetEmail\"\n                                    defaultMessage={'Didn\\'t get an email? {resendEmailLink}'}\n                                    values={{\n                                        \"resendEmailLink\": <a onClick={(event) => {\n                                            event.preventDefault();\n                                            this.forgotPasswordRequest(this.state.resetEmail);\n                                        }} href=\"\"><FormattedMessage id=\"resendEmail\" defaultMessage=\"Resend email.\"/></a>\n                                    }}\n                                />\n                            </p>\n                            <p>\n                                <FormattedMessage\n                                    id=\"rememberToCheckYourSpam\"\n                                    defaultMessage=\"Psst! Remember to check your spam folder\"\n                                />\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else if (this.state.mode === \"termsandconditions\") {\n            return (\n                <TermsAndConditions onAccept={() => {\n                    if (this.state.termsAndConditionsCallback !== null) {\n                        this.state.termsAndConditionsCallback(true);\n                        if (this.state.termsAndConditionsMode) {\n                            this.setState({\n                                'mode': this.state.termsAndConditionsMode,\n                                'termsAndConditions': null,\n                                'termsAndConditionsMode': null,\n                                'termsAndConditionsCallback': null\n                            });\n                        }\n                    } else {\n                        this.loginOperations.acceptTermsAndConditions(this.state.jwt);\n                    }\n                }} onDecline={() => {\n                    if (this.state.termsAndConditionsCallback !== null) {\n                        this.state.termsAndConditionsCallback(false);\n                        if (this.state.termsAndConditionsMode) {\n                            this.setState({\n                                'mode': this.state.termsAndConditionsMode,\n                                'termsAndConditions': null,\n                                'termsAndConditionsMode': null,\n                                'termsAndConditionsCallback': null\n                            });\n                        }\n                    } else {\n                        this.declineTermsAndConditions();\n                    }\n                }} termsAndConditions={this.state.termsAndConditions} />\n            );\n        } else {\n            return (\n                <span key=\"unknown-mode\"></span>\n            );\n        }\n    }\n\n    renderEnterpriseLogin() {\n        return (\n            <EnterpriseLogins\n                enterpriseLogins={this.getEnterpriseLogins()}\n                onClose={() => { this.setState({'mode': 'login'}); }}\n            />\n        );\n    }\n\n    render() {\n        if (this.state.spinner) {\n            return (\n                <Loader\n                    type=\"ThreeDots\"\n                    color=\"#00BFFF\"\n                    height=\"200\"\n                    width=\"200\"\n                />\n            );\n        }\n        return (\n            <div className=\"reactive-auth-login\">\n                { this.state.mode === 'enterprise-login' ? this.renderEnterpriseLogin() : null }\n                { this.state.mode !== 'enterprise-login' ? this.renderTopWithExtIdps() : null }\n                { this.state.mode !== 'enterprise-login' ? this.renderMainContentPartDefaultLoginPart() : null }\n            </div>\n        );\n    }\n}\n\nReactiveLogin.propTypes = {\n    intl: intlShape.isRequired,\n};\n\nconst ReactiveLoginClass = ReactiveLogin;\n\nexport {ReactiveLoginClass};\nexport default injectIntl(ReactiveLogin);\n"],"sourceRoot":""}